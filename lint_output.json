[{"filePath":"C:\\Users\\hafiz\\projects\\coin\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\accounts.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[645,648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[645,648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":120,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3954,3957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3954,3957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4378,4381],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4378,4381],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\";\r\n\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { auth } from \"@/lib/auth\";\r\nimport { revalidatePath } from \"next/cache\";\r\nimport { getCurrentDateInKL } from \"@/lib/utils\";\r\n\r\nasync function getAuthenticatedUserId() {\r\n    const session = await auth();\r\n    if (!session?.user?.id) {\r\n        throw new Error(\"Unauthorized\");\r\n    }\r\n    return session.user.id;\r\n}\r\n\r\nexport async function getBankAccounts() {\r\n    const userId = await getAuthenticatedUserId();\r\n    const accounts = await prisma.bankAccount.findMany({\r\n        where: { userId },\r\n        orderBy: { name: \"asc\" },\r\n    });\r\n\r\n    return accounts.map((account: any) => ({\r\n        ...account,\r\n        balance: Number(account.balance),\r\n        targetAmount: account.targetAmount ? Number(account.targetAmount) : null,\r\n        growthRate: account.growthRate ? Number(account.growthRate) : null,\r\n    }));\r\n}\r\n\r\nexport async function createBankAccount(formData: FormData) {\r\n    const userId = await getAuthenticatedUserId();\r\n    const name = formData.get(\"name\") as string;\r\n    const type = formData.get(\"type\") as string || \"Savings\";\r\n    const balance = Number(formData.get(\"balance\")) || 0;\r\n    const isSavings = formData.get(\"isSavings\") === \"true\";\r\n    const targetAmount = formData.get(\"targetAmount\") ? Number(formData.get(\"targetAmount\")) : null;\r\n    const growthRate = Number(formData.get(\"growthRate\")) || 0;\r\n    const targetDate = formData.get(\"targetDate\") ? new Date(formData.get(\"targetDate\") as string) : null;\r\n\r\n    if (!name) {\r\n        return { error: \"Name is required\" };\r\n    }\r\n\r\n    try {\r\n        await prisma.bankAccount.create({\r\n            data: {\r\n                name,\r\n                type,\r\n                balance,\r\n                isSavings,\r\n                targetAmount,\r\n                growthRate,\r\n                targetDate,\r\n                userId,\r\n            },\r\n        });\r\n        revalidatePath(\"/accounts\");\r\n        return { success: true };\r\n    } catch {\r\n        return { error: \"Failed to create account\" };\r\n    }\r\n}\r\n\r\nexport async function updateBankAccount(id: string, formData: FormData) {\r\n    const userId = await getAuthenticatedUserId();\r\n    const name = formData.get(\"name\") as string;\r\n    const type = formData.get(\"type\") as string;\r\n    const balance = Number(formData.get(\"balance\"));\r\n    const isSavings = formData.get(\"isSavings\") === \"true\";\r\n    const targetAmount = formData.get(\"targetAmount\") ? Number(formData.get(\"targetAmount\")) : null;\r\n    const growthRate = Number(formData.get(\"growthRate\"));\r\n    const targetDate = formData.get(\"targetDate\") ? new Date(formData.get(\"targetDate\") as string) : null;\r\n\r\n    try {\r\n        await prisma.bankAccount.update({\r\n            where: { id, userId },\r\n            data: {\r\n                name,\r\n                type,\r\n                balance,\r\n                isSavings,\r\n                targetAmount,\r\n                growthRate,\r\n                targetDate,\r\n            },\r\n        });\r\n        revalidatePath(\"/accounts\");\r\n        return { success: true };\r\n    } catch {\r\n        return { error: \"Failed to update account\" };\r\n    }\r\n}\r\n\r\nexport async function deleteBankAccount(id: string) {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    try {\r\n        await prisma.bankAccount.delete({\r\n            where: { id, userId },\r\n        });\r\n        revalidatePath(\"/accounts\");\r\n        return { success: true };\r\n    } catch {\r\n        return { error: \"Failed to delete account\" };\r\n    }\r\n}\r\n\r\nexport async function getSavingsGrowthStats() {\r\n    const userId = await getAuthenticatedUserId();\r\n    const now = getCurrentDateInKL();\r\n    const currentYear = now.getFullYear();\r\n\r\n    const accounts = await prisma.bankAccount.findMany({\r\n        where: { userId, isSavings: true },\r\n    });\r\n\r\n    const startOfYear = new Date(currentYear, 0, 1);\r\n\r\n    const stats = await Promise.all(accounts.map(async (account: any) => {\r\n        const transactions = await prisma.transaction.findMany({\r\n            where: {\r\n                bankAccountId: account.id,\r\n                date: {\r\n                    gte: startOfYear,\r\n                },\r\n            },\r\n            select: {\r\n                amount: true,\r\n                type: true,\r\n            },\r\n        });\r\n\r\n        const growthAmount = transactions.reduce((sum: number, tx: any) => {\r\n            return tx.type === \"income\"\r\n                ? sum + Number(tx.amount)\r\n                : sum - Number(tx.amount);\r\n        }, 0);\r\n\r\n        const currentBalance = Number(account.balance);\r\n        const startingBalance = currentBalance - growthAmount;\r\n        const growthPercentage = startingBalance !== 0\r\n            ? (growthAmount / startingBalance) * 100\r\n            : growthAmount > 0 ? 100 : 0;\r\n\r\n        return {\r\n            accountId: account.id,\r\n            accountName: account.name,\r\n            currentBalance,\r\n            growthAmount,\r\n            growthPercentage,\r\n            startingBalance,\r\n        };\r\n    }));\r\n\r\n    const totalGrowthAmount = stats.reduce((sum, s) => sum + s.growthAmount, 0);\r\n    const totalStartingBalance = stats.reduce((sum, s) => sum + s.startingBalance, 0);\r\n    const totalGrowthPercentage = totalStartingBalance !== 0\r\n        ? (totalGrowthAmount / totalStartingBalance) * 100\r\n        : totalGrowthAmount > 0 ? 100 : 0;\r\n\r\n    return {\r\n        byAccount: stats,\r\n        totalGrowthAmount,\r\n        totalGrowthPercentage,\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\budgets.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\categories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\credit-cards.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Prisma' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Prisma"},"fix":{"range":[141,181],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[861,864],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[861,864],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[939,942],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[939,942],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\";\r\n\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { auth } from \"@/lib/auth\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nimport { Prisma } from \"@prisma/client\";\r\n\r\nasync function getAuthenticatedUserId() {\r\n    const session = await auth();\r\n    if (!session?.user?.id) {\r\n        throw new Error(\"Unauthorized\");\r\n    }\r\n    return session.user.id;\r\n}\r\n\r\nexport async function getCreditCards() {\r\n    const userId = await getAuthenticatedUserId();\r\n    const cards = await prisma.creditCard.findMany({\r\n        where: { userId },\r\n        include: {\r\n            transactions: {\r\n                select: {\r\n                    amount: true,\r\n                    type: true,\r\n                    bankAccountId: true,\r\n                },\r\n            },\r\n        },\r\n        orderBy: { name: \"asc\" },\r\n    });\r\n\r\n    return cards.map((card: any) => {\r\n        const balance = card.transactions.reduce((acc: number, tx: any) => {\r\n            // Expenses increase credit card \"balance\" (debt)\r\n            // Income (payments) decrease it\r\n            // Special case: if it has a bankAccountId and type is 'expense', \r\n            // it's a payment from an account to the card\r\n            if (tx.bankAccountId && tx.type === \"expense\") {\r\n                return acc - Number(tx.amount);\r\n            }\r\n\r\n            return tx.type === \"expense\"\r\n                ? acc + Number(tx.amount)\r\n                : acc - Number(tx.amount);\r\n        }, 0);\r\n\r\n        return {\n            id: card.id,\n            name: card.name,\n            lastFour: card.lastFour,\n            limit: card.limit ? Number(card.limit) : null,\n            statementDay: card.statementDay,\n            dueDay: card.dueDay,\n            color: card.color,\n            balance: balance,\n        };\n    });\n}\n\r\nexport async function createCreditCard(formData: FormData) {\n    const userId = await getAuthenticatedUserId();\n    const name = formData.get(\"name\") as string;\n    const lastFour = formData.get(\"lastFour\") as string | null;\n    const limit = formData.get(\"limit\") ? Number(formData.get(\"limit\")) : null;\n    const color = formData.get(\"color\") as string | null;\n    const statementDay = Number(formData.get(\"statementDay\"));\n    const dueDay = Number(formData.get(\"dueDay\"));\n\n    if (!name) {\n        return { error: \"Credit card name is required\" };\n    }\n\n    if (!Number.isFinite(statementDay) || statementDay < 1 || statementDay > 31) {\n        return { error: \"Statement date must be between 1 and 31\" };\n    }\n    if (!Number.isFinite(dueDay) || dueDay < 1 || dueDay > 31) {\n        return { error: \"Payment due date must be between 1 and 31\" };\n    }\n\n    try {\n        await prisma.creditCard.create({\n            data: { name, lastFour, limit, statementDay, dueDay, color, userId },\n        });\n        revalidatePath(\"/settings\");\n        return { success: true };\n    } catch {\r\n        return { error: \"Credit card already exists\" };\r\n    }\r\n}\r\n\r\nexport async function updateCreditCard(id: string, formData: FormData) {\n    const userId = await getAuthenticatedUserId();\n    const name = formData.get(\"name\") as string;\n    const lastFour = formData.get(\"lastFour\") as string | null;\n    const limit = formData.get(\"limit\") ? Number(formData.get(\"limit\")) : null;\n    const color = formData.get(\"color\") as string | null;\n    const statementDay = Number(formData.get(\"statementDay\"));\n    const dueDay = Number(formData.get(\"dueDay\"));\n\n    if (!Number.isFinite(statementDay) || statementDay < 1 || statementDay > 31) {\n        return { error: \"Statement date must be between 1 and 31\" };\n    }\n    if (!Number.isFinite(dueDay) || dueDay < 1 || dueDay > 31) {\n        return { error: \"Payment due date must be between 1 and 31\" };\n    }\n\n    try {\n        await prisma.creditCard.update({\n            where: { id, userId },\n            data: { name, lastFour, limit, statementDay, dueDay, color },\n        });\n        revalidatePath(\"/settings\");\n        return { success: true };\n    } catch {\r\n        return { error: \"Failed to update credit card\" };\r\n    }\r\n}\r\n\r\nexport async function deleteCreditCard(id: string) {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    try {\r\n        await prisma.creditCard.delete({\r\n            where: { id, userId },\r\n        });\r\n        revalidatePath(\"/settings\");\r\n        return { success: true };\r\n    } catch {\r\n        return { error: \"Failed to delete credit card\" };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\data-management.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1824,1827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1824,1827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\";\r\n\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { auth } from \"@/lib/auth\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nimport { Prisma } from \"@prisma/client\";\r\n\r\nasync function getAuthenticatedUserId() {\r\n    const session = await auth();\r\n    if (!session?.user?.id) {\r\n        throw new Error(\"Unauthorized\");\r\n    }\r\n    return session.user.id;\r\n}\r\n\r\n// Helper to serialize Prisma data for client consumption (converts Decimals to numbers/strings)\r\nfunction serializeData<T>(data: T): T {\r\n    return JSON.parse(JSON.stringify(data));\r\n}\r\n\r\nexport async function exportUserData() {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    const [\r\n        categories,\r\n        creditCards,\r\n        incomeSources,\r\n        bankAccounts,\r\n        loans,\r\n        installments,\r\n        years,\r\n    ] = await Promise.all([\r\n        prisma.category.findMany({ where: { userId } }),\r\n        prisma.creditCard.findMany({ where: { userId } }),\r\n        prisma.incomeSource.findMany({ where: { userId } }),\r\n        prisma.bankAccount.findMany({ where: { userId } }),\r\n        prisma.loan.findMany({ where: { userId } }),\r\n        prisma.installment.findMany({ where: { userId } }),\r\n        prisma.year.findMany({\r\n            where: { userId },\r\n            include: {\r\n                months: {\r\n                    include: {\r\n                        budgets: true,\r\n                        transactions: true,\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n    ]);\r\n\r\n    return serializeData({\r\n        categories,\r\n        creditCards,\r\n        incomeSources,\r\n        bankAccounts,\r\n        loans,\r\n        installments,\r\n        years,\r\n        exportedAt: new Date().toISOString(),\r\n        version: \"1.0\",\r\n    });\r\n}\r\n\r\nexport async function importUserData(data: any) {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    if (!data || !data.years) {\r\n        return { error: \"Invalid data format\" };\r\n    }\r\n\r\n    try {\r\n        await prisma.$transaction(async (tx: Prisma.TransactionClient) => {\r\n            // 1. Clear existing data\r\n            await tx.year.deleteMany({ where: { userId } });\r\n            await tx.category.deleteMany({ where: { userId } });\r\n            await tx.creditCard.deleteMany({ where: { userId } });\r\n            await tx.incomeSource.deleteMany({ where: { userId } });\r\n            await tx.bankAccount.deleteMany({ where: { userId } });\r\n            await tx.loan.deleteMany({ where: { userId } });\r\n            await tx.installment.deleteMany({ where: { userId } });\r\n\r\n            // 2. Import Categories\r\n            const categoryMap = new Map();\r\n            if (data.categories) {\r\n                for (const cat of data.categories) {\r\n                    const newCat = await tx.category.create({\r\n                        data: {\r\n                            name: cat.name,\r\n                            icon: cat.icon,\r\n                            color: cat.color,\r\n                            isDefault: cat.isDefault,\r\n                            userId,\r\n                        },\r\n                    });\r\n                    categoryMap.set(cat.id, newCat.id);\r\n                }\r\n            }\r\n\r\n            // 3. Import Credit Cards\r\n            const cardMap = new Map();\r\n            if (data.creditCards) {\n                for (const card of data.creditCards) {\n                    const newCard = await tx.creditCard.create({\n                        data: {\n                            name: card.name,\n                            lastFour: card.lastFour,\n                            limit: card.limit,\n                            statementDay: card.statementDay ?? null,\n                            dueDay: card.dueDay ?? null,\n                            color: card.color,\n                            userId,\n                        },\n                    });\n                    cardMap.set(card.id, newCard.id);\n                }\r\n            }\r\n\r\n            // 4. Import Income Sources\r\n            const incomeMap = new Map();\r\n            if (data.incomeSources) {\r\n                for (const source of data.incomeSources) {\r\n                    const newSource = await tx.incomeSource.create({\r\n                        data: {\r\n                            name: source.name,\r\n                            type: source.type,\r\n                            userId,\r\n                        },\r\n                    });\r\n                    incomeMap.set(source.id, newSource.id);\r\n                }\r\n            }\r\n\r\n            // 5. Import Bank Accounts\r\n            const bankMap = new Map();\r\n            if (data.bankAccounts) {\r\n                for (const bank of data.bankAccounts) {\r\n                    const newBank = await tx.bankAccount.create({\r\n                        data: {\r\n                            name: bank.name,\r\n                            type: bank.type || \"Savings\",\r\n                            balance: bank.balance,\r\n                            isSavings: bank.isSavings,\r\n                            targetAmount: bank.targetAmount,\r\n                            growthRate: bank.growthRate,\r\n                            targetDate: bank.targetDate ? new Date(bank.targetDate) : null,\r\n                            userId,\r\n                        },\r\n                    });\r\n                    bankMap.set(bank.id, newBank.id);\r\n                }\r\n            }\r\n\r\n            // 6. Import Loans\r\n            const loanMap = new Map();\r\n            if (data.loans) {\r\n                for (const loan of data.loans) {\r\n                    const newLoan = await tx.loan.create({\r\n                        data: {\r\n                            name: loan.name,\r\n                            totalAmount: loan.totalAmount,\r\n                            remainingAmount: loan.remainingAmount,\r\n                            interestRate: loan.interestRate,\r\n                            monthlyPayment: loan.monthlyPayment,\r\n                            dueDate: loan.dueDate,\r\n                            userId,\r\n                        },\r\n                    });\r\n                    loanMap.set(loan.id, newLoan.id);\r\n                }\r\n            }\r\n\r\n            // 7. Import Installments\r\n            const instMap = new Map();\r\n            if (data.installments) {\r\n                for (const inst of data.installments) {\r\n                    const newInst = await tx.installment.create({\r\n                        data: {\r\n                            name: inst.name,\r\n                            totalAmount: inst.totalAmount,\r\n                            monthlyPayment: inst.monthlyPayment,\r\n                            totalMonths: inst.totalMonths,\r\n                            remainingMonths: inst.remainingMonths,\r\n                            startDate: new Date(inst.startDate),\r\n                            creditCardId: cardMap.get(inst.creditCardId),\n                            categoryId: inst.categoryId ? categoryMap.get(inst.categoryId) : null,\n                            userId,\n                        },\n                    });\n                    instMap.set(inst.id, newInst.id);\r\n                }\r\n            }\r\n\r\n            // 8. Import Years, Months, Budgets, and Transactions\r\n            if (data.years) {\r\n                for (const year of data.years) {\r\n                    const newYear = await tx.year.create({\r\n                        data: {\r\n                            year: year.year,\r\n                            userId,\r\n                        },\r\n                    });\r\n\r\n                    if (year.months) {\r\n                        for (const month of year.months) {\r\n                            const newMonth = await tx.month.create({\r\n                                data: {\r\n                                    month: month.month,\r\n                                    yearId: newYear.id,\r\n                                },\r\n                            });\r\n\r\n                            if (month.budgets) {\r\n                                for (const budget of month.budgets) {\r\n                                    await tx.budget.create({\r\n                                        data: {\r\n                                            planned: budget.planned,\r\n                                            type: budget.type,\r\n                                            monthId: newMonth.id,\r\n                                            categoryId: categoryMap.get(budget.categoryId),\r\n                                        },\r\n                                    });\r\n                                }\r\n                            }\r\n\r\n                            if (month.transactions) {\r\n                                for (const txData of month.transactions) {\r\n                                    await tx.transaction.create({\r\n                                        data: {\r\n                                            date: new Date(txData.date),\r\n                                            amount: txData.amount,\r\n                                            description: txData.description,\r\n                                            notes: txData.notes,\r\n                                            type: txData.type,\r\n                                            monthId: newMonth.id,\r\n                                            categoryId: txData.categoryId ? categoryMap.get(txData.categoryId) : null,\r\n                                            creditCardId: txData.creditCardId ? cardMap.get(txData.creditCardId) : null,\r\n                                            incomeSourceId: txData.incomeSourceId ? incomeMap.get(txData.incomeSourceId) : null,\r\n                                            bankAccountId: txData.bankAccountId ? bankMap.get(txData.bankAccountId) : null,\r\n                                            loanId: txData.loanId ? loanMap.get(txData.loanId) : null,\r\n                                            installmentId: txData.installmentId ? instMap.get(txData.installmentId) : null,\r\n                                        },\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        revalidatePath(\"/\");\r\n        revalidatePath(\"/settings\");\r\n        return { success: true };\r\n    } catch (e) {\r\n        console.error(\"Import error:\", e);\r\n        return { error: \"Failed to import data. Please check the file format.\" };\r\n    }\r\n}\r\n\r\nexport async function clearAllUserData() {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    try {\r\n        await prisma.$transaction([\r\n            prisma.year.deleteMany({ where: { userId } }),\r\n            prisma.category.deleteMany({ where: { userId } }),\r\n            prisma.creditCard.deleteMany({ where: { userId } }),\r\n            prisma.incomeSource.deleteMany({ where: { userId } }),\r\n            prisma.bankAccount.deleteMany({ where: { userId } }),\r\n            prisma.loan.deleteMany({ where: { userId } }),\r\n            prisma.installment.deleteMany({ where: { userId } }),\r\n        ]);\r\n\r\n        revalidatePath(\"/\");\r\n        revalidatePath(\"/settings\");\r\n        return { success: true };\r\n    } catch (e) {\r\n        console.error(\"Clear data error:\", e);\r\n        return { error: \"Failed to clear data\" };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\income-sources.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\installments.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2057,2060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2057,2060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { auth } from \"@/lib/auth\";\nimport { revalidatePath } from \"next/cache\";\nimport { ensureYearAndMonth } from \"./transactions\";\nimport { Prisma } from \"@prisma/client\";\nimport { getCurrentDateInKL } from \"@/lib/utils\";\n\nasync function getAuthenticatedUserId() {\n    const session = await auth();\n    if (!session?.user?.id) {\n        throw new Error(\"Unauthorized\");\n    }\n    return session.user.id;\n}\n\nfunction getLastDayOfMonth(year: number, monthIndex: number) {\n    return new Date(year, monthIndex + 1, 0).getDate();\n}\n\nfunction createStatementDate(year: number, monthIndex: number, statementDay: number) {\n    const day = Math.min(statementDay, getLastDayOfMonth(year, monthIndex));\n    return new Date(year, monthIndex, day);\n}\n\nfunction getFirstStatementDateAfter(startDate: Date, statementDay: number) {\n    const year = startDate.getFullYear();\n    const monthIndex = startDate.getMonth();\n    const sameMonth = createStatementDate(year, monthIndex, statementDay);\n    if (startDate <= sameMonth) {\n        return sameMonth;\n    }\n    const nextMonthIndex = (monthIndex + 1) % 12;\n    const nextYear = monthIndex === 11 ? year + 1 : year;\n    return createStatementDate(nextYear, nextMonthIndex, statementDay);\n}\n\nfunction addMonthsKeepingStatementDay(baseDate: Date, statementDay: number, monthsToAdd: number) {\n    const year = baseDate.getFullYear();\n    const monthIndex = baseDate.getMonth();\n    const totalMonths = monthIndex + monthsToAdd;\n    const targetYear = year + Math.floor(totalMonths / 12);\n    const targetMonthIndex = totalMonths % 12;\n    return createStatementDate(targetYear, targetMonthIndex, statementDay);\n}\n\nexport async function getInstallments() {\n    const userId = await getAuthenticatedUserId();\n    const installments = await prisma.installment.findMany({\n        where: { userId },\n        include: {\n            creditCard: true,\n            category: true,\n        },\n        orderBy: { startDate: \"desc\" },\n    });\n\n    return installments.map((inst: any) => ({\n        ...inst,\n        totalAmount: Number(inst.totalAmount),\n        monthlyPayment: Number(inst.monthlyPayment),\n    }));\n}\n\nexport async function createInstallment(formData: FormData) {\n    const userId = await getAuthenticatedUserId();\n    const name = formData.get(\"name\") as string;\n    const totalAmount = Number(formData.get(\"totalAmount\"));\n    const monthlyPayment = Number(formData.get(\"monthlyPayment\"));\n    const totalMonths = Number(formData.get(\"totalMonths\"));\n    const currentBalancePayment = Number(formData.get(\"currentBalancePayment\") || 0);\n    const startDate = new Date(formData.get(\"startDate\") as string);\n    const creditCardId = formData.get(\"creditCardId\") as string;\n    const categoryId = formData.get(\"categoryId\") as string || null;\n\n    if (!name || !totalAmount || !monthlyPayment || !totalMonths || !creditCardId) {\n        return { error: \"All fields are required\" };\n    }\n\n    try {\n        const normalizedPaidAmount = Number.isFinite(currentBalancePayment) ? Math.max(currentBalancePayment, 0) : 0;\n        const paidMonths = monthlyPayment > 0 ? Math.floor(normalizedPaidAmount / monthlyPayment) : 0;\n        const remainderAmount = monthlyPayment > 0 ? normalizedPaidAmount - paidMonths * monthlyPayment : 0;\n        const remainingMonths = Math.max(totalMonths - Math.min(paidMonths, totalMonths), 0);\n\n        const creditCard = await prisma.creditCard.findUnique({\n            where: { id: creditCardId, userId },\n            select: { statementDay: true },\n        });\n\n        if (!creditCard?.statementDay) {\n            return { error: \"Credit card statement date is required\" };\n        }\n\n        const totalPaymentCount = normalizedPaidAmount > 0\n            ? paidMonths + (remainderAmount > 0 ? 1 : 0)\n            : 0;\n\n        const firstStatementDate = getFirstStatementDateAfter(startDate, creditCard.statementDay);\n        const scheduledTransactions: { amount: number; date: Date; monthId: string }[] = [];\n        if (totalPaymentCount > 0) {\n            for (let i = 0; i < totalPaymentCount; i++) {\n                const amount = i < paidMonths ? monthlyPayment : remainderAmount;\n                const date = addMonthsKeepingStatementDay(firstStatementDate, creditCard.statementDay, i);\n                const year = date.getFullYear();\n                const month = date.getMonth() + 1;\n                const { monthRecord } = await ensureYearAndMonth(userId, year, month);\n                scheduledTransactions.push({ amount, date, monthId: monthRecord.id });\n            }\n        }\n\n        await prisma.$transaction(async (tx: Prisma.TransactionClient) => {\n            const installment = await tx.installment.create({\n                data: {\n                    name,\n                    totalAmount,\n                    monthlyPayment,\n                    totalMonths,\n                    remainingMonths,\n                    startDate,\n                    creditCardId,\n                    categoryId,\n                    userId,\n                },\n            });\n\n            if (scheduledTransactions.length > 0) {\n                for (const scheduled of scheduledTransactions) {\n                    await tx.transaction.create({\n                        data: {\n                            date: scheduled.date,\n                            amount: scheduled.amount,\n                            description: `Installment Balance Payment: ${name}`,\n                            type: \"expense\",\n                            monthId: scheduled.monthId,\n                            creditCardId,\n                            categoryId,\n                            installmentId: installment.id,\n                        },\n                    });\n                }\n            }\n        });\n        revalidatePath(\"/settings/credit-cards\");\n        revalidatePath(\"/accounts\");\n        return { success: true };\n    } catch {\n        return { error: \"Failed to create installment\" };\n    }\n}\n\nexport async function deleteInstallment(id: string) {\n    const userId = await getAuthenticatedUserId();\n\n    try {\n        await prisma.installment.delete({\n            where: { id, userId },\n        });\n        revalidatePath(\"/settings/credit-cards\");\n        return { success: true };\n    } catch {\n        return { error: \"Failed to delete installment\" };\n    }\n}\n\nexport async function payInstallment(id: string) {\n    const userId = await getAuthenticatedUserId();\n    const date = getCurrentDateInKL();\n    const year = date.getFullYear();\n    const month = date.getMonth() + 1;\n\n    try {\n        const installment = await prisma.installment.findUnique({\n            where: { id, userId },\n        });\n\n        if (!installment) return { error: \"Installment not found\" };\n        if (installment.remainingMonths <= 0) return { error: \"Installment already completed\" };\n\n        const { monthRecord } = await ensureYearAndMonth(userId, year, month);\n\n        await prisma.$transaction(async (tx: Prisma.TransactionClient) => {\n            // 1. Create transaction\n            await tx.transaction.create({\n                data: {\n                    date,\n                    amount: installment.monthlyPayment,\n                    description: `Installment Payment: ${installment.name}`,\n                    type: \"expense\",\n                    monthId: monthRecord.id,\n                    creditCardId: installment.creditCardId,\n                    categoryId: installment.categoryId,\n                    installmentId: installment.id,\n                },\n            });\n\n            // 2. Decrement remaining months\n            await tx.installment.update({\n                where: { id, userId },\n                data: {\n                    remainingMonths: {\n                        decrement: 1,\n                    },\n                },\n            });\n        });\n\n        revalidatePath(\"/settings/credit-cards\");\n        revalidatePath(`/month/${year}/${month}`);\n        return { success: true };\n    } catch (e) {\n        console.error(e);\n        return { error: \"Failed to process payment\" };\n    }\n}\n\nexport async function updateInstallment(id: string, formData: FormData) {\n    const userId = await getAuthenticatedUserId();\n    const name = formData.get(\"name\") as string;\n    const totalAmount = Number(formData.get(\"totalAmount\"));\n    const monthlyPayment = Number(formData.get(\"monthlyPayment\"));\n    const remainingMonths = Number(formData.get(\"remainingMonths\"));\n    const creditCardId = formData.get(\"creditCardId\") as string;\n    const categoryId = formData.get(\"categoryId\") as string || null;\n\n    try {\n        await prisma.installment.update({\n            where: { id, userId },\n            data: {\n                name,\n                totalAmount,\n                monthlyPayment,\n                remainingMonths,\n                creditCardId,\n                categoryId,\n            },\n        });\n        revalidatePath(\"/settings/credit-cards\");\n        return { success: true };\n    } catch {\n        return { error: \"Failed to update installment\" };\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\loans.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[577,580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[577,580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\";\r\n\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { auth } from \"@/lib/auth\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nasync function getAuthenticatedUserId() {\r\n    const session = await auth();\r\n    if (!session?.user?.id) {\r\n        throw new Error(\"Unauthorized\");\r\n    }\r\n    return session.user.id;\r\n}\r\n\r\nexport async function getLoans() {\r\n    const userId = await getAuthenticatedUserId();\r\n    const loans = await prisma.loan.findMany({\r\n        where: { userId },\r\n        orderBy: { createdAt: \"desc\" },\r\n    });\r\n\r\n    return loans.map((loan: any) => ({\r\n        ...loan,\r\n        totalAmount: Number(loan.totalAmount),\r\n        remainingAmount: Number(loan.remainingAmount),\r\n        interestRate: Number(loan.interestRate),\r\n        monthlyPayment: loan.monthlyPayment ? Number(loan.monthlyPayment) : null,\r\n    }));\r\n}\r\n\r\nexport async function createLoan(formData: FormData) {\r\n    const userId = await getAuthenticatedUserId();\r\n    const name = formData.get(\"name\") as string;\r\n    const totalAmount = Number(formData.get(\"totalAmount\"));\r\n    const remainingAmount = Number(formData.get(\"remainingAmount\"));\r\n    const interestRate = Number(formData.get(\"interestRate\"));\r\n    const monthlyPayment = formData.get(\"monthlyPayment\") ? Number(formData.get(\"monthlyPayment\")) : null;\r\n    const dueDate = formData.get(\"dueDate\") ? Number(formData.get(\"dueDate\")) : null;\r\n\r\n    if (!name || isNaN(totalAmount) || isNaN(interestRate)) {\r\n        return { error: \"Name, total amount, and interest rate are required\" };\r\n    }\r\n\r\n    try {\r\n        await prisma.loan.create({\r\n            data: {\r\n                name,\r\n                totalAmount,\r\n                remainingAmount: isNaN(remainingAmount) ? totalAmount : remainingAmount,\r\n                interestRate,\r\n                monthlyPayment,\r\n                dueDate,\r\n                userId,\r\n            },\r\n        });\r\n        revalidatePath(\"/loans\");\r\n        return { success: true };\r\n    } catch {\r\n        return { error: \"Failed to create loan\" };\r\n    }\r\n}\r\n\r\nexport async function updateLoan(id: string, formData: FormData) {\r\n    const userId = await getAuthenticatedUserId();\r\n    const name = formData.get(\"name\") as string;\r\n    const totalAmount = Number(formData.get(\"totalAmount\"));\r\n    const remainingAmount = Number(formData.get(\"remainingAmount\"));\r\n    const interestRate = Number(formData.get(\"interestRate\"));\r\n    const monthlyPayment = formData.get(\"monthlyPayment\") ? Number(formData.get(\"monthlyPayment\")) : null;\r\n    const dueDate = formData.get(\"dueDate\") ? Number(formData.get(\"dueDate\")) : null;\r\n\r\n    try {\r\n        await prisma.loan.update({\r\n            where: { id, userId },\r\n            data: {\r\n                name,\r\n                totalAmount,\r\n                remainingAmount,\r\n                interestRate,\r\n                monthlyPayment,\r\n                dueDate,\r\n            },\r\n        });\r\n        revalidatePath(\"/loans\");\r\n        return { success: true };\r\n    } catch {\r\n        return { error: \"Failed to update loan\" };\r\n    }\r\n}\r\n\r\nexport async function deleteLoan(id: string) {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    try {\r\n        await prisma.loan.delete({\r\n            where: { id, userId },\r\n        });\r\n        revalidatePath(\"/loans\");\r\n        return { success: true };\r\n    } catch {\r\n        return { error: \"Failed to delete loan\" };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\transactions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1966,1969],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1966,1969],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":373,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":373,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13682,13685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13682,13685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":374,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":374,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13745,13748],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13745,13748],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":377,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":377,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13844,13847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13844,13847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":378,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":378,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13908,13911],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13908,13911],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":381,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":381,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14048,14051],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14048,14051],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":383,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":383,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14120,14123],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14120,14123],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":384,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":384,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14226,14229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14226,14229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":427,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":427,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15494,15497],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15494,15497],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":431,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":431,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15652,15655],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15652,15655],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":432,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":432,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15719,15722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15719,15722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":435,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":435,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15821,15824],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15821,15824],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":436,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":436,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15889,15892],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15889,15892],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":441,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":441,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16052,16055],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16052,16055],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":443,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":443,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16139,16142],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16139,16142],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":444,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":444,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16202,16205],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16202,16205],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":446,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":446,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16302,16305],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16302,16305],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":447,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":447,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16366,16369],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16366,16369],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":452,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":452,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16581,16584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16581,16584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":453,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":453,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16647,16650],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16647,16650],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\";\r\n\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { auth } from \"@/lib/auth\";\r\nimport { revalidatePath } from \"next/cache\";\r\nimport { Decimal } from \"@prisma/client/runtime/library\";\r\nimport { Prisma } from \"@prisma/client\";\r\n\r\nasync function getAuthenticatedUserId() {\r\n    const session = await auth();\r\n    if (!session?.user?.id) {\r\n        throw new Error(\"Unauthorized\");\r\n    }\r\n    return session.user.id;\r\n}\r\n\r\nexport async function ensureYearAndMonth(userId: string, year: number, month: number) {\r\n    let yearRecord = await prisma.year.findUnique({\r\n        where: { userId_year: { userId, year } },\r\n    });\r\n\r\n    if (!yearRecord) {\r\n        yearRecord = await prisma.year.create({\r\n            data: { year, userId },\r\n        });\r\n    }\r\n\r\n    let monthRecord = await prisma.month.findUnique({\r\n        where: { yearId_month: { yearId: yearRecord.id, month } },\r\n    });\r\n\r\n    if (!monthRecord) {\r\n        monthRecord = await prisma.month.create({\r\n            data: { month, yearId: yearRecord.id },\r\n        });\r\n    }\r\n\r\n    return { yearRecord, monthRecord };\r\n}\r\n\r\nexport async function getTransactions(year: number, month: number) {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    const yearRecord = await prisma.year.findUnique({\r\n        where: { userId_year: { userId, year } },\r\n    });\r\n\r\n    if (!yearRecord) return [];\r\n\r\n    const monthRecord = await prisma.month.findUnique({\r\n        where: { yearId_month: { yearId: yearRecord.id, month } },\r\n        include: {\r\n            transactions: {\r\n                include: {\r\n                    category: true,\r\n                    creditCard: true,\r\n                    incomeSource: true,\r\n                    bankAccount: true,\r\n                    loan: true,\r\n                },\r\n                orderBy: { date: \"desc\" },\r\n            },\r\n        },\r\n    });\r\n\r\n    const transactions = monthRecord?.transactions || [];\r\n\r\n    return transactions.map((tx: any) => ({\r\n        ...tx,\r\n        amount: Number(tx.amount),\r\n        bankAccount: tx.bankAccount ? {\r\n            ...tx.bankAccount,\r\n            balance: Number(tx.bankAccount.balance),\r\n            targetAmount: tx.bankAccount.targetAmount ? Number(tx.bankAccount.targetAmount) : null,\r\n            growthRate: tx.bankAccount.growthRate ? Number(tx.bankAccount.growthRate) : null,\r\n        } : null,\r\n        loan: tx.loan ? {\r\n            ...tx.loan,\r\n            totalAmount: Number(tx.loan.totalAmount),\r\n            remainingAmount: Number(tx.loan.remainingAmount),\r\n            interestRate: Number(tx.loan.interestRate),\r\n            monthlyPayment: tx.loan.monthlyPayment ? Number(tx.loan.monthlyPayment) : null,\r\n        } : null,\r\n    }));\r\n}\r\n\r\nexport async function createTransaction(formData: FormData) {\r\n    const userId = await getAuthenticatedUserId();\r\n    const dateStr = formData.get(\"date\") as string;\r\n    const date = new Date(dateStr);\r\n    const [year, month] = dateStr.split(\"-\").map(Number);\r\n    const amount = formData.get(\"amount\") as string;\r\n    const description = formData.get(\"description\") as string;\r\n    const notes = formData.get(\"notes\") as string;\r\n    const type = formData.get(\"type\") as string;\r\n    const categoryId = formData.get(\"categoryId\") as string;\r\n    const creditCardId = formData.get(\"creditCardId\") as string;\r\n    const incomeSourceId = formData.get(\"incomeSourceId\") as string;\r\n    const bankAccountId = formData.get(\"bankAccountId\") as string;\r\n\r\n    const loanId = formData.get(\"loanId\") as string;\r\n\r\n    if (!amount || !type) {\r\n        return { error: \"Amount and type are required\" };\r\n    }\r\n\r\n    const { monthRecord } = await ensureYearAndMonth(userId, year, month);\r\n\r\n    try {\r\n        await prisma.$transaction(async (tx: Prisma.TransactionClient) => {\r\n            await tx.transaction.create({\r\n                data: {\r\n                    date,\r\n                    amount: new Decimal(amount),\r\n                    description: description || null,\r\n                    notes: notes || null,\r\n                    type,\r\n                    monthId: monthRecord.id,\r\n                    categoryId: categoryId || null,\r\n                    creditCardId: creditCardId || null,\r\n                    incomeSourceId: incomeSourceId || null,\r\n                    bankAccountId: bankAccountId || null,\r\n                    loanId: loanId || null,\r\n                },\r\n            });\r\n\r\n            // Update Bank Account balance if linked\r\n            if (bankAccountId) {\r\n                await tx.bankAccount.update({\r\n                    where: { id: bankAccountId, userId },\r\n                    data: {\r\n                        balance: type === \"income\"\r\n                            ? { increment: new Decimal(amount) }\r\n                            : { decrement: new Decimal(amount) },\r\n                    },\r\n                });\r\n            }\r\n\r\n            // If it's a loan payment, update the loan's remaining amount\r\n            if (loanId && type === \"expense\") {\r\n                await tx.loan.update({\r\n                    where: { id: loanId, userId },\r\n                    data: {\r\n                        remainingAmount: {\r\n                            decrement: new Decimal(amount),\r\n                        },\r\n                    },\r\n                });\r\n            }\r\n        });\r\n\r\n        revalidatePath(`/month/${year}/${month}`);\r\n        revalidatePath(\"/transactions\");\r\n        revalidatePath(\"/accounts\");\r\n        revalidatePath(\"/loans\");\r\n        revalidatePath(\"/\");\r\n        return { success: true };\r\n    } catch (e) {\r\n        console.error(\"Create transaction error:\", e);\r\n        return { error: \"Failed to create transaction\" };\r\n    }\r\n}\r\n\r\nexport async function updateTransaction(id: string, formData: FormData) {\r\n    const userId = await getAuthenticatedUserId();\r\n    const dateStr = formData.get(\"date\") as string;\r\n    const date = new Date(dateStr);\r\n    const amount = new Decimal(formData.get(\"amount\") as string);\r\n    const description = formData.get(\"description\") as string;\r\n    const notes = formData.get(\"notes\") as string;\r\n    const type = formData.get(\"type\") as string;\r\n    const categoryId = formData.get(\"categoryId\") as string;\r\n    const creditCardId = formData.get(\"creditCardId\") as string;\r\n    const incomeSourceId = formData.get(\"incomeSourceId\") as string;\r\n    const bankAccountId = formData.get(\"bankAccountId\") as string;\r\n    const loanId = formData.get(\"loanId\") as string;\r\n\r\n    const [year, month] = dateStr.split(\"-\").map(Number);\r\n\r\n    try {\r\n        const oldTx = await prisma.transaction.findFirst({\r\n            where: { id, month: { year: { userId } } },\r\n            include: { month: { include: { year: true } } },\r\n        });\r\n\r\n        if (!oldTx) return { error: \"Transaction not found\" };\r\n\r\n        const { monthRecord } = await ensureYearAndMonth(userId, year, month);\r\n\r\n        await prisma.$transaction(async (tx: Prisma.TransactionClient) => {\r\n            // 1. Reverse OLD effects\r\n            if (oldTx.bankAccountId) {\r\n                await tx.bankAccount.update({\r\n                    where: { id: oldTx.bankAccountId, userId },\r\n                    data: {\r\n                        balance: oldTx.type === \"income\"\r\n                            ? { decrement: oldTx.amount }\r\n                            : { increment: oldTx.amount },\r\n                    },\r\n                });\r\n            }\r\n            if (oldTx.loanId && oldTx.type === \"expense\") {\r\n                await tx.loan.update({\r\n                    where: { id: oldTx.loanId, userId },\r\n                    data: { remainingAmount: { increment: oldTx.amount } },\r\n                });\r\n            }\r\n            if (oldTx.installmentId && oldTx.type === \"expense\") {\r\n                await tx.installment.update({\r\n                    where: { id: oldTx.installmentId, userId },\r\n                    data: { remainingMonths: { increment: 1 } },\r\n                });\r\n            }\r\n\r\n            // 2. Apply NEW effects\r\n            if (bankAccountId) {\r\n                await tx.bankAccount.update({\r\n                    where: { id: bankAccountId, userId },\r\n                    data: {\r\n                        balance: type === \"income\"\r\n                            ? { increment: amount }\r\n                            : { decrement: amount },\r\n                    },\r\n                });\r\n            }\r\n            if (loanId && type === \"expense\") {\r\n                await tx.loan.update({\r\n                    where: { id: loanId, userId },\r\n                    data: { remainingAmount: { decrement: amount } },\r\n                });\r\n            }\r\n            // Preserve installment link; re-apply its effect if the updated tx is still an expense.\n            const finalInstallmentId = oldTx.installmentId;\n            if (finalInstallmentId && type === \"expense\") {\n                await tx.installment.update({\n                    where: { id: finalInstallmentId, userId },\n                    data: { remainingMonths: { decrement: 1 } },\n                });\n            }\n\r\n            // 3. Update transaction\r\n            await tx.transaction.update({\r\n                where: { id },\r\n                data: {\r\n                    date,\r\n                    amount,\r\n                    description: description || null,\r\n                    notes: notes || null,\r\n                    type,\r\n                    monthId: monthRecord.id,\r\n                    categoryId: categoryId || null,\r\n                    creditCardId: creditCardId || null,\r\n                    incomeSourceId: incomeSourceId || null,\r\n                    bankAccountId: bankAccountId || null,\r\n                    loanId: loanId || null,\r\n                    installmentId: finalInstallmentId,\r\n                },\r\n            });\r\n        });\r\n\r\n        revalidatePath(`/month/${year}/${month}`);\r\n        revalidatePath(`/month/${oldTx.month.year.year}/${oldTx.month.month}`);\r\n        revalidatePath(\"/transactions\");\r\n        revalidatePath(\"/accounts\");\r\n        revalidatePath(\"/loans\");\r\n        revalidatePath(\"/\");\r\n        return { success: true };\r\n    } catch (e) {\r\n        console.error(\"Update transaction error:\", e);\r\n        return { error: \"Failed to update transaction\" };\r\n    }\r\n}\r\n\r\nexport async function deleteTransaction(id: string) {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    try {\r\n        const transaction = await prisma.transaction.findFirst({\r\n            where: {\r\n                id,\r\n                month: { year: { userId } },\r\n            },\r\n            include: {\r\n                month: { include: { year: true } },\r\n            },\r\n        });\r\n\r\n        if (!transaction) return { error: \"Transaction not found\" };\r\n\r\n        const { amount, type, bankAccountId, loanId, installmentId } = transaction;\r\n        const year = transaction.month.year.year;\r\n        const month = transaction.month.month;\r\n\r\n        await prisma.$transaction(async (tx: Prisma.TransactionClient) => {\r\n            // 1. Reverse bank account balance\r\n            if (bankAccountId) {\r\n                await tx.bankAccount.update({\r\n                    where: { id: bankAccountId, userId },\r\n                    data: {\r\n                        balance: type === \"income\"\r\n                            ? { decrement: amount }\r\n                            : { increment: amount },\r\n                    },\r\n                });\r\n            }\r\n\r\n            // 2. Reverse loan amount\r\n            if (loanId && type === \"expense\") {\r\n                await tx.loan.update({\r\n                    where: { id: loanId, userId },\r\n                    data: {\r\n                        remainingAmount: { increment: amount },\r\n                    },\r\n                });\r\n            }\r\n\r\n            // 3. Reverse installment count\r\n            if (installmentId && type === \"expense\") {\r\n                await tx.installment.update({\r\n                    where: { id: installmentId, userId },\r\n                    data: {\r\n                        remainingMonths: { increment: 1 },\r\n                    },\r\n                });\r\n            }\r\n\r\n            // 4. Delete the transaction\r\n            await tx.transaction.delete({\r\n                where: { id },\r\n            });\r\n        });\r\n\r\n        revalidatePath(`/month/${year}/${month}`);\r\n        revalidatePath(\"/transactions\");\r\n        revalidatePath(\"/accounts\");\r\n        revalidatePath(\"/loans\");\r\n        revalidatePath(\"/settings/credit-cards\");\r\n        revalidatePath(\"/\");\r\n        return { success: true };\r\n    } catch (e) {\r\n        console.error(\"Delete transaction error:\", e);\r\n        return { error: \"Failed to delete transaction\" };\r\n    }\r\n}\r\n\r\nexport async function getMonthlyStats(year: number, month: number) {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    const yearRecord = await prisma.year.findUnique({\r\n        where: { userId_year: { userId, year } },\r\n    });\r\n\r\n    if (!yearRecord) {\r\n        return { totalIncome: 0, totalExpenses: 0, balance: 0, categoryBreakdown: [] };\r\n    }\r\n\r\n    const monthRecord = await prisma.month.findUnique({\r\n        where: { yearId_month: { yearId: yearRecord.id, month } },\r\n        include: {\r\n            transactions: { include: { category: true } },\r\n            budgets: { include: { category: true } },\r\n        },\r\n    });\r\n\r\n    if (!monthRecord) {\r\n        return { totalIncome: 0, totalExpenses: 0, balance: 0, categoryBreakdown: [] };\r\n    }\r\n\r\n    const transactions = monthRecord.transactions;\r\n    const budgets = monthRecord.budgets;\r\n\r\n    const totalIncome = transactions\r\n        .filter((t: any) => t.type === \"income\")\r\n        .reduce((sum: number, t: any) => sum + Number(t.amount), 0);\r\n\r\n    const totalExpenses = transactions\r\n        .filter((t: any) => t.type === \"expense\")\r\n        .reduce((sum: number, t: any) => sum + Number(t.amount), 0);\r\n\r\n    // Category breakdown with planned vs actual\r\n    const categoryBreakdown = budgets.map((budget: any) => {\r\n        const actual = transactions\r\n            .filter((t: any) => t.categoryId === budget.categoryId && t.type === \"expense\")\r\n            .reduce((sum: number, t: any) => sum + Number(t.amount), 0);\r\n\r\n        return {\r\n            id: budget.category.id,\r\n            name: budget.category.name,\r\n            color: budget.category.color,\r\n            icon: budget.category.icon,\r\n            planned: Number(budget.planned),\r\n            actual,\r\n            variance: Number(budget.planned) - actual,\r\n            type: budget.type,\r\n        };\r\n    });\r\n\r\n    return {\r\n        totalIncome,\r\n        totalExpenses,\r\n        balance: totalIncome - totalExpenses,\r\n        categoryBreakdown,\r\n    };\r\n}\r\n\r\nexport async function getYearlyStats(year: number) {\r\n    const userId = await getAuthenticatedUserId();\r\n\r\n    const yearRecord = await prisma.year.findUnique({\r\n        where: { userId_year: { userId, year } },\r\n        include: {\r\n            months: {\r\n                include: {\r\n                    transactions: { include: { category: true } },\r\n                    budgets: true,\r\n                },\r\n            },\r\n        },\r\n    });\r\n\r\n    if (!yearRecord) {\r\n        return { monthlyData: [], totalIncome: 0, totalExpenses: 0, topCategories: [] };\r\n    }\r\n\r\n    const monthlyData = Array.from({ length: 12 }, (_, i) => {\r\n        const monthNum = i + 1;\r\n        const monthRecord = yearRecord.months.find((m: any) => m.month === monthNum);\r\n        const transactions = monthRecord?.transactions || [];\r\n\r\n        const income = transactions\r\n            .filter((t: any) => t.type === \"income\")\r\n            .reduce((sum: number, t: any) => sum + Number(t.amount), 0);\r\n\r\n        const expenses = transactions\r\n            .filter((t: any) => t.type === \"expense\")\r\n            .reduce((sum: number, t: any) => sum + Number(t.amount), 0);\r\n\r\n        return { month: monthNum, income, expenses };\r\n    });\r\n\r\n    const allTransactions = yearRecord.months.flatMap((m: any) => m.transactions);\r\n    const totalIncome = allTransactions\r\n        .filter((t: any) => t.type === \"income\")\r\n        .reduce((sum: number, t: any) => sum + Number(t.amount), 0);\r\n    const totalExpenses = allTransactions\r\n        .filter((t: any) => t.type === \"expense\")\r\n        .reduce((sum: number, t: any) => sum + Number(t.amount), 0);\r\n\r\n    // Top spending categories\r\n    const categoryTotals: Record<string, { name: string; color: string | null; total: number }> = {};\r\n    allTransactions\r\n        .filter((t: any) => t.type === \"expense\" && t.category)\r\n        .forEach((t: any) => {\r\n            const catId = t.categoryId!;\r\n            if (!categoryTotals[catId]) {\r\n                categoryTotals[catId] = { name: t.category!.name, color: t.category!.color, total: 0 };\r\n            }\r\n            categoryTotals[catId].total += Number(t.amount);\r\n        });\r\n\r\n    const topCategories = Object.entries(categoryTotals)\r\n        .map(([id, data]) => ({ id, ...data }))\r\n        .sort((a, b) => b.total - a.total)\r\n        .slice(0, 5);\r\n\r\n    return { monthlyData, totalIncome, totalExpenses, topCategories };\r\n}\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\actions\\user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\accounts\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\loans\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\month\\[year]\\[month]\\budgets\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[610,613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[610,613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BudgetsPage } from \"@/components/budgets-page\";\r\nimport { getBudgets } from \"@/actions/budgets\";\r\nimport { getCategories } from \"@/actions/categories\";\r\n\r\n\r\nexport default async function BudgetsSettingsPage({\r\n    params,\r\n}: {\r\n    params: Promise<{ year: string; month: string }>;\r\n}) {\r\n    const { year: yearStr, month: monthStr } = await params;\r\n    const year = parseInt(yearStr);\r\n    const month = parseInt(monthStr);\r\n\r\n    const [budgets, categories] = await Promise.all([\r\n        getBudgets(year, month),\r\n        getCategories(),\r\n    ]);\r\n\r\n    const formattedBudgets = budgets.map((b: any) => ({\r\n        ...b,\r\n        planned: Number(b.planned),\r\n    }));\r\n\r\n    return (\r\n        <BudgetsPage\r\n            year={year}\r\n            month={month}\r\n            budgets={formattedBudgets}\r\n            categories={categories}\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\month\\[year]\\[month]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1855,1858],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1855,1858],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1986,1989],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1986,1989],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":202,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9511,9514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9511,9514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":299,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":299,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16059,16062],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16059,16062],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from \"next/link\";\r\nimport {\r\n    ArrowDownRight,\r\n    ArrowUpRight,\r\n    Calendar,\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    Copy,\r\n    Plus,\r\n} from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { getMonthlyStats, getTransactions } from \"@/actions/transactions\";\r\nimport { copyBudgetsFromPreviousMonth } from \"@/actions/budgets\";\r\nimport { formatCurrency } from \"@/lib/utils\";\r\n\r\nconst monthNames = [\r\n    \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n    \"July\", \"August\", \"September\", \"October\", \"November\", \"December\",\r\n];\r\n\r\nexport default async function MonthlyViewPage({\r\n    params,\r\n}: {\r\n    params: Promise<{ year: string; month: string }>;\r\n}) {\r\n    const { year: yearStr, month: monthStr } = await params;\r\n    const year = parseInt(yearStr);\r\n    const month = parseInt(monthStr);\r\n\r\n    const stats = await getMonthlyStats(year, month);\r\n    const transactions = await getTransactions(year, month);\r\n\r\n    // Calculate previous and next month\r\n    let prevYear = year;\r\n    let prevMonth = month - 1;\r\n    if (prevMonth === 0) {\r\n        prevMonth = 12;\r\n        prevYear--;\r\n    }\r\n    let nextYear = year;\r\n    let nextMonth = month + 1;\r\n    if (nextMonth === 13) {\r\n        nextMonth = 1;\r\n        nextYear++;\r\n    }\r\n\r\n    const totalPlanned = stats.categoryBreakdown.reduce(\r\n        (sum: number, cat: any) => sum + cat.planned,\r\n        0\r\n    );\r\n    const totalActual = stats.categoryBreakdown.reduce(\r\n        (sum: number, cat: any) => sum + cat.actual,\r\n        0\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <header className=\"flex h-16 shrink-0 items-center gap-2 border-b\">\r\n                <div className=\"flex items-center gap-2 px-4\">\r\n                    <SidebarTrigger className=\"-ml-1\" />\r\n                    <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\r\n                    <Calendar className=\"h-4 w-4\" />\r\n                    <h1 className=\"text-lg font-semibold\">Monthly View</h1>\r\n                </div>\r\n            </header>\r\n            <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n                {/* Month Navigator */}\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <Button variant=\"outline\" size=\"icon\" asChild>\r\n                            <Link href={`/month/${prevYear}/${prevMonth}`}>\r\n                                <ChevronLeft className=\"h-4 w-4\" />\r\n                            </Link>\r\n                        </Button>\r\n                        <h2 className=\"text-2xl font-bold\">\r\n                            {monthNames[month - 1]} {year}\r\n                        </h2>\r\n                        <Button variant=\"outline\" size=\"icon\" asChild>\r\n                            <Link href={`/month/${nextYear}/${nextMonth}`}>\r\n                                <ChevronRight className=\"h-4 w-4\" />\r\n                            </Link>\r\n                        </Button>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <form\r\n                            action={async () => {\r\n                                \"use server\";\r\n                                await copyBudgetsFromPreviousMonth(year, month);\r\n                            }}\r\n                        >\r\n                            <Button variant=\"outline\" type=\"submit\">\r\n                                <Copy className=\"mr-2 h-4 w-4\" />\r\n                                Copy from {monthNames[prevMonth - 1]}\r\n                            </Button>\r\n                        </form>\r\n                        <Button asChild>\r\n                            <Link href={`/month/${year}/${month}/budgets`}>\r\n                                <Plus className=\"mr-2 h-4 w-4\" />\r\n                                Manage Budgets\r\n                            </Link>\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Summary Cards */}\r\n                <div className=\"grid gap-4 md:grid-cols-4\">\r\n                    <Card className=\"bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border-emerald-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                                Total Income\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold text-emerald-600 dark:text-emerald-400\">\r\n                                {formatCurrency(stats.totalIncome)}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"bg-gradient-to-br from-rose-500/10 to-rose-600/5 border-rose-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                                Total Expenses\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold text-rose-600 dark:text-rose-400\">\r\n                                {formatCurrency(stats.totalExpenses)}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"bg-gradient-to-br from-indigo-500/10 to-indigo-600/5 border-indigo-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                                Total Planned\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold text-indigo-600 dark:text-indigo-400\">{formatCurrency(totalPlanned)}</div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"bg-gradient-to-br from-amber-500/10 to-amber-600/5 border-amber-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                                Budget Variance\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div\r\n                                className={`text-2xl font-bold ${totalPlanned - totalActual >= 0\r\n                                    ? \"text-emerald-600 dark:text-emerald-400\"\r\n                                    : \"text-rose-600 dark:text-rose-400\"\r\n                                    }`}\r\n                            >\r\n                                {totalPlanned - totalActual >= 0 ? \"+\" : \"\"}\r\n                                {formatCurrency(totalPlanned - totalActual)}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                {/* Planned vs Actual Table */}\r\n                <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden\">\r\n                    <CardHeader className=\"bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-800\">\r\n                        <CardTitle className=\"text-lg font-bold uppercase tracking-tight\">Planned vs Actual by Category</CardTitle>\r\n                        <CardDescription className=\"font-medium text-[10px] uppercase tracking-widest\">\r\n                            Compare your budgeted amounts with actual spending\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        {stats.categoryBreakdown.length > 0 ? (\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead>Category</TableHead>\r\n                                        <TableHead>Type</TableHead>\r\n                                        <TableHead className=\"text-right\">Planned</TableHead>\r\n                                        <TableHead className=\"text-right\">Actual</TableHead>\r\n                                        <TableHead className=\"text-right\">Variance</TableHead>\r\n                                        <TableHead className=\"w-[200px]\">Progress</TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {stats.categoryBreakdown.map((cat: any) => {\r\n                                        const percentage =\r\n                                            cat.planned > 0 ? (cat.actual / cat.planned) * 100 : 0;\r\n                                        const isOverBudget = cat.actual > cat.planned;\r\n                                        return (\r\n                                            <TableRow key={cat.id}>\r\n                                                <TableCell>\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <div\r\n                                                            className=\"h-3 w-3 rounded-full\"\r\n                                                            style={{ backgroundColor: cat.color || \"#6b7280\" }}\r\n                                                        />\r\n                                                        <span className=\"font-medium\">{cat.name}</span>\r\n                                                    </div>\r\n                                                </TableCell>\r\n                                                <TableCell>\r\n                                                    <Badge variant=\"outline\">{cat.type}</Badge>\r\n                                                </TableCell>\r\n                                                <TableCell className=\"text-right\">\r\n                                                    {formatCurrency(cat.planned)}\r\n                                                </TableCell>\r\n                                                <TableCell className=\"text-right\">\r\n                                                    {formatCurrency(cat.actual)}\r\n                                                </TableCell>\r\n                                                <TableCell className=\"text-right\">\r\n                                                    <span\r\n                                                        className={\r\n                                                            cat.variance >= 0 ? \"text-emerald-500\" : \"text-red-500\"\r\n                                                        }\r\n                                                    >\r\n                                                        {cat.variance >= 0 ? \"+\" : \"\"}\r\n                                                        {formatCurrency(cat.variance)}\r\n                                                    </span>\r\n                                                </TableCell>\r\n                                                <TableCell>\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <Progress\r\n                                                            value={Math.min(percentage, 100)}\r\n                                                            className={`flex-1 ${isOverBudget ? \"[&>div]:bg-red-500\" : \"\"\r\n                                                                }`}\r\n                                                        />\r\n                                                        <span className=\"text-xs text-muted-foreground w-12 text-right\">\r\n                                                            {percentage.toFixed(0)}%\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        );\r\n                                    })}\r\n                                </TableBody>\r\n                            </Table>\r\n                        ) : (\r\n                            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                                <p className=\"text-muted-foreground\">\r\n                                    No budgets set for this month\r\n                                </p>\r\n                                <Button variant=\"outline\" className=\"mt-4\" asChild>\r\n                                    <Link href={`/month/${year}/${month}/budgets`}>\r\n                                        Set Up Budgets\r\n                                    </Link>\r\n                                </Button>\r\n                            </div>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Transactions List */}\r\n                <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden\">\r\n                    <CardHeader className=\"bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-800\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <CardTitle className=\"text-lg font-bold uppercase tracking-tight\">Transactions</CardTitle>\r\n                                <CardDescription className=\"font-medium text-[10px] uppercase tracking-widest\">\r\n                                    {transactions.length} transactions this month\r\n                                </CardDescription>\r\n                            </div>\r\n                            <Button asChild size=\"sm\" className=\"bg-indigo-600 hover:bg-indigo-700 font-bold uppercase tracking-tight text-[10px]\">\r\n                                <Link href=\"/transactions/new\">\r\n                                    <Plus className=\"mr-2 h-3 w-3\" />\r\n                                    Add Transaction\r\n                                </Link>\r\n                            </Button>\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        {transactions.length > 0 ? (\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead>Date</TableHead>\r\n                                        <TableHead>Description</TableHead>\r\n                                        <TableHead>Category</TableHead>\r\n                                        <TableHead>Payment Method</TableHead>\r\n                                        <TableHead className=\"text-right\">Amount</TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {transactions.map((tx: any) => (\r\n                                        <TableRow key={tx.id}>\r\n                                            <TableCell>\r\n                                                {new Date(tx.date).toLocaleDateString()}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    {tx.type === \"income\" ? (\r\n                                                        <ArrowUpRight className=\"h-4 w-4 text-emerald-500\" />\r\n                                                    ) : (\r\n                                                        <ArrowDownRight className=\"h-4 w-4 text-red-500\" />\r\n                                                    )}\r\n                                                    {tx.description || \"-\"}\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {tx.category ? (\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <div\r\n                                                            className=\"h-2 w-2 rounded-full\"\r\n                                                            style={{\r\n                                                                backgroundColor: tx.category.color || \"#6b7280\",\r\n                                                            }}\r\n                                                        />\r\n                                                        {tx.category.name}\r\n                                                        {tx.loanId && (\r\n                                                            <Badge variant=\"outline\" className=\"text-[10px] h-4 px-1 bg-red-500/10 text-red-500 border-red-500/20 ml-2\">\r\n                                                                Loan\r\n                                                            </Badge>\r\n                                                        )}\r\n                                                    </div>\r\n                                                ) : tx.incomeSource ? (\r\n                                                    tx.incomeSource.name\r\n                                                ) : (\r\n                                                    \"-\"\r\n                                                )}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {tx.creditCard?.name || tx.bankAccount?.name || \"-\"}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-right\">\r\n                                                <span\r\n                                                    className={`font-medium ${tx.type === \"income\"\r\n                                                        ? \"text-emerald-500\"\r\n                                                        : \"text-red-500\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {tx.type === \"income\" ? \"+\" : \"-\"}{formatCurrency(Number(tx.amount))}\r\n                                                </span>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        ) : (\r\n                            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                                <p className=\"text-muted-foreground\">No transactions yet</p>\r\n                                <Button variant=\"outline\" className=\"mt-4\" asChild>\r\n                                    <Link href=\"/transactions/new\">Add Your First Transaction</Link>\r\n                                </Button>\r\n                            </div>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1402,1405],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1402,1405],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1540,1543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1540,1543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1637,1640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1637,1640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1692,1695],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1692,1695],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1817,1820],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1817,1820],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1948,1951],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1948,1951],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9686,9689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9686,9689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":237,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":237,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14079,14082],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14079,14082],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":303,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18427,18430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18427,18430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":305,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18566,18569],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18566,18569],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":308,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":308,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18807,18810],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18807,18810],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    ArrowDownRight,\r\n    ArrowUpRight,\r\n    CreditCard,\r\n    DollarSign,\r\n    Landmark,\r\n    PiggyBank,\r\n    TrendingUp,\r\n    Wallet,\r\n} from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { getMonthlyStats, getTransactions } from \"@/actions/transactions\";\r\nimport { getCreditCards } from \"@/actions/credit-cards\";\r\nimport { getBankAccounts, getSavingsGrowthStats } from \"@/actions/accounts\";\r\nimport { formatCurrency, getCurrentDateInKL } from \"@/lib/utils\";\r\n\r\nexport default async function DashboardPage() {\r\n    const currentDate = getCurrentDateInKL();\r\n    const year = currentDate.getFullYear();\r\n    const month = currentDate.getMonth() + 1;\r\n\r\n    const [stats, transactions, creditCards, bankAccounts, growthStats] = await Promise.all([\r\n        getMonthlyStats(year, month),\r\n        getTransactions(year, month),\r\n        getCreditCards(),\r\n        getBankAccounts(),\r\n        getSavingsGrowthStats(),\r\n    ]);\r\n\r\n    const recentTransactions = transactions.slice(0, 5).map((tx: any) => ({\r\n        ...tx,\r\n        amount: Number(tx.amount),\r\n    }));\r\n\r\n    const totalBalance = bankAccounts.reduce((sum: number, a: any) => sum + Number(a.balance), 0);\r\n    const totalSavings = bankAccounts\r\n        .filter((a: any) => a.isSavings)\r\n        .reduce((sum: number, a: any) => sum + Number(a.balance), 0);\r\n\r\n    const totalPlanned = stats.categoryBreakdown.reduce(\r\n        (sum: number, cat: any) => sum + cat.planned,\r\n        0\r\n    );\r\n    const totalActual = stats.categoryBreakdown.reduce(\r\n        (sum: number, cat: any) => sum + cat.actual,\r\n        0\r\n    );\r\n    const budgetUtilization =\r\n        totalPlanned > 0 ? (totalActual / totalPlanned) * 100 : 0;\r\n\r\n    const monthNames = [\r\n        \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n        \"July\", \"August\", \"September\", \"October\", \"November\", \"December\",\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            <header className=\"flex h-16 shrink-0 items-center gap-2 border-b\">\r\n                <div className=\"flex items-center gap-2 px-4\">\r\n                    <SidebarTrigger className=\"-ml-1\" />\r\n                    <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\r\n                    <h1 className=\"text-lg font-semibold\">Dashboard</h1>\r\n                </div>\r\n            </header>\r\n            <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n                {/* Welcome Section */}\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold tracking-tight\">\r\n                            {monthNames[month - 1]} {year}\r\n                        </h2>\r\n                        <p className=\"text-muted-foreground\">\r\n                            Your financial overview at a glance\r\n                        </p>\r\n                    </div>\r\n                    <Button asChild>\r\n                        <Link href=\"/transactions/new\">\r\n                            <DollarSign className=\"mr-2 h-4 w-4\" />\r\n                            Add Transaction\r\n                        </Link>\r\n                    </Button>\r\n                </div>\r\n\r\n                {/* Stats Cards */}\r\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n                    <Card className=\"bg-gradient-to-br from-indigo-500/10 to-indigo-600/5 border-indigo-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                        <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\r\n                            <CardTitle className=\"text-sm font-semibold uppercase tracking-wider text-muted-foreground\">Total Balance</CardTitle>\r\n                            <Landmark className=\"h-4 w-4 text-indigo-500\" />\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold text-indigo-600 dark:text-indigo-400\">\r\n                                {formatCurrency(totalBalance)}\r\n                            </div>\r\n                            <p className=\"text-[10px] text-muted-foreground uppercase mt-1\">Across all accounts</p>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card className=\"bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border-emerald-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                        <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\r\n                            <CardTitle className=\"text-sm font-semibold uppercase tracking-wider text-muted-foreground\">Total Savings</CardTitle>\r\n                            <PiggyBank className=\"h-4 w-4 text-emerald-500\" />\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"flex items-baseline gap-2\">\r\n                                <div className=\"text-2xl font-bold text-emerald-600 dark:text-emerald-400\">\r\n                                    {formatCurrency(totalSavings)}\r\n                                </div>\r\n                                <div className={`flex items-center text-xs font-medium ${growthStats.totalGrowthAmount >= 0 ? \"text-emerald-600\" : \"text-rose-600\"}`}>\r\n                                    {growthStats.totalGrowthAmount >= 0 ? <TrendingUp className=\"mr-1 h-3 w-3\" /> : <ArrowDownRight className=\"mr-1 h-3 w-3\" />}\r\n                                    {growthStats.totalGrowthPercentage.toFixed(1)}%\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex justify-between items-center mt-1\">\r\n                                <p className=\"text-[10px] text-muted-foreground uppercase\">Marked as savings</p>\r\n                                <p className={`text-[10px] font-medium ${growthStats.totalGrowthAmount >= 0 ? \"text-emerald-600\" : \"text-rose-600\"}`}>\r\n                                    {growthStats.totalGrowthAmount >= 0 ? \"+\" : \"\"}{formatCurrency(growthStats.totalGrowthAmount)} YTD\r\n                                </p>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card className=\"bg-gradient-to-br from-rose-500/10 to-rose-600/5 border-rose-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                        <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\r\n                            <CardTitle className=\"text-sm font-semibold uppercase tracking-wider text-muted-foreground\">Monthly Expenses</CardTitle>\r\n                            <ArrowDownRight className=\"h-4 w-4 text-rose-500\" />\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold text-rose-600 dark:text-rose-400\">\r\n                                {formatCurrency(stats.totalExpenses)}\r\n                            </div>\r\n                            <p className=\"text-[10px] text-muted-foreground uppercase mt-1\">This month</p>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card className=\"bg-gradient-to-br from-amber-500/10 to-amber-600/5 border-amber-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                        <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\r\n                            <CardTitle className=\"text-sm font-semibold uppercase tracking-wider text-muted-foreground\">Budget Used</CardTitle>\r\n                            <TrendingUp className=\"h-4 w-4 text-amber-500\" />\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold text-amber-600 dark:text-amber-400\">\r\n                                {budgetUtilization.toFixed(1)}%\r\n                            </div>\r\n                            <Progress value={Math.min(budgetUtilization, 100)} className=\"h-1.5 mt-3\" />\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                {/* Category Breakdown and Recent Transactions */}\r\n                <div className=\"grid gap-6 lg:grid-cols-2\">\r\n                    {/* Category Breakdown */}\r\n                    <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden\">\r\n                        <CardHeader className=\"bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-800\">\r\n                            <CardTitle className=\"flex items-center gap-2 text-lg font-bold uppercase tracking-tight\">\r\n                                <TrendingUp className=\"h-5 w-5 text-indigo-500\" />\r\n                                Category Breakdown\r\n                            </CardTitle>\r\n                            <CardDescription className=\"font-medium text-[10px] uppercase tracking-widest\">Planned vs actual spending</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"pt-6\">\r\n                            {stats.categoryBreakdown.length > 0 ? (\r\n                                <div className=\"space-y-4\">\r\n                                    {stats.categoryBreakdown.map((cat: any) => {\r\n                                        const percentage =\r\n                                            cat.planned > 0 ? (cat.actual / cat.planned) * 100 : 0;\r\n                                        const isOverBudget = cat.actual > cat.planned;\r\n                                        return (\r\n                                            <div key={cat.id} className=\"space-y-2\">\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <div\r\n                                                            className=\"h-3 w-3 rounded-full\"\r\n                                                            style={{ backgroundColor: cat.color || \"#6b7280\" }}\r\n                                                        />\r\n                                                        <span className=\"text-sm font-medium\">{cat.name}</span>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <span className=\"text-sm text-muted-foreground\">\r\n                                                            {formatCurrency(cat.actual)} / {formatCurrency(cat.planned)}\r\n                                                        </span>\r\n                                                        {isOverBudget && (\r\n                                                            <Badge variant=\"destructive\" className=\"text-xs\">\r\n                                                                Over\r\n                                                            </Badge>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                                <Progress\r\n                                                    value={Math.min(percentage, 100)}\r\n                                                    className={isOverBudget ? \"[&>div]:bg-red-500\" : \"\"}\r\n                                                />\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"flex flex-col items-center justify-center py-8 text-center\">\r\n                                    <PiggyBank className=\"h-12 w-12 text-muted-foreground/50\" />\r\n                                    <p className=\"mt-2 text-sm text-muted-foreground\">\r\n                                        No budgets set for this month\r\n                                    </p>\r\n                                    <Button variant=\"outline\" className=\"mt-4\" asChild>\r\n                                        <Link href={`/month/${year}/${month}/budgets`}>\r\n                                            Set Up Budgets\r\n                                        </Link>\r\n                                    </Button>\r\n                                </div>\r\n                            )}\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Recent Transactions */}\r\n                    <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden\">\r\n                        <CardHeader className=\"bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-800\">\r\n                            <CardTitle className=\"flex items-center gap-2 text-lg font-bold uppercase tracking-tight\">\r\n                                <CreditCard className=\"h-5 w-5 text-rose-500\" />\r\n                                Recent Transactions\r\n                            </CardTitle>\r\n                            <CardDescription className=\"font-medium text-[10px] uppercase tracking-widest\">Latest activity this month</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            {recentTransactions.length > 0 ? (\r\n                                <div className=\"space-y-4\">\r\n                                    {recentTransactions.map((tx: any) => (\r\n                                        <div\r\n                                            key={tx.id}\r\n                                            className=\"flex items-center justify-between\"\r\n                                        >\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div\r\n                                                    className={`flex h-9 w-9 items-center justify-center rounded-full ${tx.type === \"income\"\r\n                                                        ? \"bg-emerald-500/10 text-emerald-500\"\r\n                                                        : \"bg-red-500/10 text-red-500\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {tx.type === \"income\" ? (\r\n                                                        <ArrowUpRight className=\"h-4 w-4\" />\r\n                                                    ) : (\r\n                                                        <ArrowDownRight className=\"h-4 w-4\" />\r\n                                                    )}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"text-sm font-medium\">\r\n                                                        {tx.description || tx.category?.name || \"Transaction\"}\r\n                                                    </p>\r\n                                                    <p className=\"text-xs text-muted-foreground\">\r\n                                                        {new Date(tx.date).toLocaleDateString()}\r\n                                                        {tx.creditCard && ` ΓÇó ${tx.creditCard.name}`}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <span\r\n                                                className={`text-sm font-semibold ${tx.type === \"income\" ? \"text-emerald-500\" : \"text-red-500\"\r\n                                                    }`}\r\n                                            >\r\n                                                {tx.type === \"income\" ? \"+\" : \"-\"}{formatCurrency(Number(tx.amount))}\r\n                                            </span>\r\n                                        </div>\r\n                                    ))}\r\n                                    <Button variant=\"outline\" className=\"w-full\" asChild>\r\n                                        <Link href=\"/transactions\">View All Transactions</Link>\r\n                                    </Button>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"flex flex-col items-center justify-center py-8 text-center\">\r\n                                    <Wallet className=\"h-12 w-12 text-muted-foreground/50\" />\r\n                                    <p className=\"mt-2 text-sm text-muted-foreground\">\r\n                                        No transactions this month\r\n                                    </p>\r\n                                    <Button variant=\"outline\" className=\"mt-4\" asChild>\r\n                                        <Link href=\"/transactions/new\">Add Your First Transaction</Link>\r\n                                    </Button>\r\n                                </div>\r\n                            )}\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                {/* Credit Cards Overview */}\r\n                {creditCards.length > 0 && (\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle className=\"flex items-center gap-2\">\r\n                                <CreditCard className=\"h-5 w-5\" />\r\n                                Your Credit Cards\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                                {creditCards.map((card: any) => {\r\n                                    const cardTransactions = transactions.filter(\r\n                                        (tx: any) => tx.creditCardId === card.id && tx.type === \"expense\"\r\n                                    );\r\n                                    const totalSpent = cardTransactions.reduce(\r\n                                        (sum: number, tx: any) => sum + Number(tx.amount),\r\n                                        0\r\n                                    );\r\n                                    return (\r\n                                        <div\r\n                                            key={card.id}\r\n                                            className=\"flex items-center gap-4 rounded-lg border p-4\"\r\n                                            style={{ borderColor: card.color || undefined }}\r\n                                        >\r\n                                            <div\r\n                                                className=\"flex h-10 w-10 items-center justify-center rounded-lg\"\r\n                                                style={{\r\n                                                    backgroundColor: card.color\r\n                                                        ? `${card.color}20`\r\n                                                        : undefined,\r\n                                                }}\r\n                                            >\r\n                                                <CreditCard\r\n                                                    className=\"h-5 w-5\"\r\n                                                    style={{ color: card.color || undefined }}\r\n                                                />\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"font-medium\">{card.name}</p>\r\n                                                <p className=\"text-sm text-muted-foreground\">\r\n                                                    {formatCurrency(totalSpent)} spent this month\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\profile\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\settings\\categories\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\settings\\credit-cards\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\settings\\income-sources\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\settings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Trash2"},"fix":{"range":[111,124],"text":""},"desc":"Remove unused variable \"Trash2\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3176,3179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3176,3179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5908,5911],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5908,5911],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":180,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9000,9003],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9000,9003],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from \"next/link\";\r\nimport {\r\n    CreditCard,\r\n    DollarSign,\r\n    Folder,\r\n    Plus,\r\n    Settings,\r\n    Trash2,\r\n} from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { getCategories } from \"@/actions/categories\";\r\nimport { getCreditCards } from \"@/actions/credit-cards\";\r\nimport { getIncomeSources } from \"@/actions/income-sources\";\r\n\r\nimport { DataManagement } from \"@/components/data-management\";\r\nimport { Database } from \"lucide-react\";\r\n\r\nexport default async function SettingsPage() {\r\n    const [categories, creditCards, incomeSources] = await Promise.all([\r\n        getCategories(),\r\n        getCreditCards(),\r\n        getIncomeSources(),\r\n    ]);\r\n\r\n    return (\r\n        <>\r\n            <header className=\"flex h-16 shrink-0 items-center gap-2 border-b\">\r\n                <div className=\"flex items-center gap-2 px-4\">\r\n                    <SidebarTrigger className=\"-ml-1\" />\r\n                    <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\r\n                    <Settings className=\"h-4 w-4\" />\r\n                    <h1 className=\"text-lg font-semibold\">Settings</h1>\r\n                </div>\r\n            </header>\r\n            <div className=\"flex flex-1 flex-col gap-8 p-6\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold tracking-tight\">Settings</h2>\r\n                    <p className=\"text-muted-foreground\">\r\n                        Manage your categories, credit cards, and income sources\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"grid gap-6 lg:grid-cols-2\">\r\n                    {/* Categories */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div>\r\n                                    <CardTitle className=\"flex items-center gap-2\">\r\n                                        <Folder className=\"h-5 w-5\" />\r\n                                        Categories\r\n                                    </CardTitle>\r\n                                    <CardDescription>\r\n                                        Organize your spending by category\r\n                                    </CardDescription>\r\n                                </div>\r\n                                <Button size=\"sm\" asChild>\r\n                                    <Link href=\"/settings/categories\">\r\n                                        <Plus className=\"mr-2 h-4 w-4\" />\r\n                                        Manage\r\n                                    </Link>\r\n                                </Button>\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"space-y-3\">\r\n                                {categories.map((cat: any) => (\r\n                                    <div\r\n                                        key={cat.id}\r\n                                        className=\"flex items-center justify-between rounded-lg border p-3\"\r\n                                    >\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div\r\n                                                className=\"h-4 w-4 rounded-full\"\r\n                                                style={{ backgroundColor: cat.color || \"#6b7280\" }}\r\n                                            />\r\n                                            <span className=\"font-medium\">{cat.name}</span>\r\n                                            {cat.isDefault && (\r\n                                                <Badge variant=\"secondary\">Default</Badge>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {categories.length === 0 && (\r\n                                    <p className=\"text-center text-muted-foreground py-4\">\r\n                                        No categories yet\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Credit Cards */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div>\r\n                                    <CardTitle className=\"flex items-center gap-2\">\r\n                                        <CreditCard className=\"h-5 w-5\" />\r\n                                        Credit Cards\r\n                                    </CardTitle>\r\n                                    <CardDescription>\r\n                                        Track spending by payment method\r\n                                    </CardDescription>\r\n                                </div>\r\n                                <Button size=\"sm\" asChild>\r\n                                    <Link href=\"/settings/credit-cards\">\r\n                                        <Plus className=\"mr-2 h-4 w-4\" />\r\n                                        Add\r\n                                    </Link>\r\n                                </Button>\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"space-y-3\">\r\n                                {creditCards.map((card: any) => (\r\n                                    <div\r\n                                        key={card.id}\r\n                                        className=\"flex items-center justify-between rounded-lg border p-3\"\r\n                                        style={{ borderColor: card.color || undefined }}\r\n                                    >\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <CreditCard\r\n                                                className=\"h-5 w-5\"\r\n                                                style={{ color: card.color || undefined }}\r\n                                            />\r\n                                            <div>\r\n                                                <span className=\"font-medium\">{card.name}</span>\r\n                                                {card.lastFour && (\r\n                                                    <span className=\"text-muted-foreground text-sm ml-2\">\r\n                                                        ΓÇóΓÇóΓÇóΓÇó {card.lastFour}\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {creditCards.length === 0 && (\r\n                                    <p className=\"text-center text-muted-foreground py-4\">\r\n                                        No credit cards yet\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Income Sources */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div>\r\n                                    <CardTitle className=\"flex items-center gap-2\">\r\n                                        <DollarSign className=\"h-5 w-5\" />\r\n                                        Income Sources\r\n                                    </CardTitle>\r\n                                    <CardDescription>\r\n                                        Track where your money comes from\r\n                                    </CardDescription>\r\n                                </div>\r\n                                <Button size=\"sm\" asChild>\r\n                                    <Link href=\"/settings/income-sources\">\r\n                                        <Plus className=\"mr-2 h-4 w-4\" />\r\n                                        Add\r\n                                    </Link>\r\n                                </Button>\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"space-y-3\">\r\n                                {incomeSources.map((source: any) => (\r\n                                    <div\r\n                                        key={source.id}\r\n                                        className=\"flex items-center justify-between rounded-lg border p-3\"\r\n                                    >\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <DollarSign className=\"h-5 w-5 text-emerald-500\" />\r\n                                            <div>\r\n                                                <span className=\"font-medium\">{source.name}</span>\r\n                                                <Badge variant=\"outline\" className=\"ml-2\">\r\n                                                    {source.type}\r\n                                                </Badge>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {incomeSources.length === 0 && (\r\n                                    <p className=\"text-center text-muted-foreground py-4\">\r\n                                        No income sources yet\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                <div className=\"space-y-6\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold tracking-tight flex items-center gap-2\">\r\n                            <Database className=\"h-6 w-6\" />\r\n                            Data Management\r\n                        </h2>\r\n                        <p className=\"text-muted-foreground\">\r\n                            Control your data by exporting your records or starting fresh.\r\n                        </p>\r\n                    </div>\r\n                    <DataManagement />\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\transactions\\new\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\transactions\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowDownRight' is defined but never used.","line":3,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowDownRight"},"fix":{"range":[45,60],"text":""},"desc":"Remove unused variable \"ArrowDownRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowUpRight' is defined but never used.","line":4,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowUpRight"},"fix":{"range":[59,78],"text":""},"desc":"Remove unused variable \"ArrowUpRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":5,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[78,91],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Search' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Search"},"fix":{"range":[102,115],"text":""},"desc":"Remove unused variable \"Search\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Table' is defined but never used.","line":20,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":10,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Table"},"fix":{"range":[410,416],"text":""},"desc":"Remove unused variable \"Table\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TableBody' is defined but never used.","line":21,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TableBody"},"fix":{"range":[415,431],"text":""},"desc":"Remove unused variable \"TableBody\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TableCell' is defined but never used.","line":22,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TableCell"},"fix":{"range":[431,447],"text":""},"desc":"Remove unused variable \"TableCell\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TableHead' is defined but never used.","line":23,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TableHead"},"fix":{"range":[447,463],"text":""},"desc":"Remove unused variable \"TableHead\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TableHeader' is defined but never used.","line":24,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TableHeader"},"fix":{"range":[463,481],"text":""},"desc":"Remove unused variable \"TableHeader\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TableRow' is defined but never used.","line":25,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":13,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"TableRow"},"fix":{"range":[396,530],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":28,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Badge"},"fix":{"range":[582,628],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1640,1643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1640,1643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1703,1706],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1703,1706],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1800,1803],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1800,1803],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1864,1867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1864,1867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from \"next/link\";\r\nimport {\r\n    ArrowDownRight,\r\n    ArrowUpRight,\r\n    Filter,\r\n    Plus,\r\n    Search,\r\n    Wallet,\r\n} from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { getTransactions } from \"@/actions/transactions\";\r\nimport { getCategories } from \"@/actions/categories\";\r\nimport { getCreditCards } from \"@/actions/credit-cards\";\r\nimport { getIncomeSources } from \"@/actions/income-sources\";\r\nimport { getBankAccounts } from \"@/actions/accounts\";\r\nimport { getLoans } from \"@/actions/loans\";\r\nimport { formatCurrency, getCurrentDateInKL } from \"@/lib/utils\";\r\nimport { TransactionList } from \"@/components/transaction-list\";\r\n\r\nexport default async function TransactionsPage() {\r\n    const currentDate = getCurrentDateInKL();\r\n    const year = currentDate.getFullYear();\r\n    const month = currentDate.getMonth() + 1;\r\n\r\n    const [transactions, categories, creditCards, incomeSources, bankAccounts, loans] = await Promise.all([\r\n        getTransactions(year, month),\r\n        getCategories(),\r\n        getCreditCards(),\r\n        getIncomeSources(),\r\n        getBankAccounts(),\r\n        getLoans(),\r\n    ]);\r\n\r\n    const totalIncome = transactions\r\n        .filter((t: any) => t.type === \"income\")\r\n        .reduce((sum: number, t: any) => sum + Number(t.amount), 0);\r\n    const totalExpenses = transactions\r\n        .filter((t: any) => t.type === \"expense\")\r\n        .reduce((sum: number, t: any) => sum + Number(t.amount), 0);\r\n\r\n    return (\r\n        <>\r\n            <header className=\"flex h-16 shrink-0 items-center gap-2 border-b\">\r\n                <div className=\"flex items-center gap-2 px-4\">\r\n                    <SidebarTrigger className=\"-ml-1\" />\r\n                    <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\r\n                    <Wallet className=\"h-4 w-4\" />\r\n                    <h1 className=\"text-lg font-semibold\">Transactions</h1>\r\n                </div>\r\n            </header>\r\n            <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold tracking-tight\">All Transactions</h2>\r\n                        <p className=\"text-muted-foreground\">\r\n                            Manage and view your financial transactions\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <Button asChild>\r\n                            <Link href=\"/transactions/new\">\r\n                                <Plus className=\"mr-2 h-4 w-4\" />\r\n                                Add Transaction\r\n                            </Link>\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Summary Cards */}\r\n                <div className=\"grid gap-4 md:grid-cols-3\">\r\n                    <Card>\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                                This Month Income\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold text-emerald-500\">\r\n                                +{formatCurrency(totalIncome)}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card>\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                                This Month Expenses\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold text-red-500\">\r\n                                -{formatCurrency(totalExpenses)}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card>\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                                Total Transactions\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold\">{transactions.length}</div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                {/* Transactions Table */}\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Transaction History</CardTitle>\r\n                        <CardDescription>\r\n                            View and manage all your transactions\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <TransactionList\r\n                            initialTransactions={transactions}\r\n                            categories={categories}\r\n                            creditCards={creditCards}\r\n                            incomeSources={incomeSources}\r\n                            bankAccounts={bankAccounts}\r\n                            loans={loans}\r\n                        />\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\(dashboard)\\year\\[year]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1361,1364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1361,1364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from \"next/link\";\r\nimport { ChevronLeft, ChevronRight, TrendingUp } from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { getYearlyStats } from \"@/actions/transactions\";\r\nimport { formatCurrency } from \"@/lib/utils\";\r\nimport { MonthlyBreakdownChart } from \"@/components/monthly-breakdown-chart\";\r\n\r\nconst monthNames = [\r\n    \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n    \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\r\n];\r\n\r\nexport default async function YearlyViewPage({\r\n    params,\r\n}: {\r\n    params: Promise<{ year: string }>;\r\n}) {\r\n    const { year: yearStr } = await params;\r\n    const year = parseInt(yearStr);\r\n    const stats = await getYearlyStats(year);\r\n\r\n    const maxMonthlyValue = Math.max(\r\n        ...stats.monthlyData.map((m) => Math.max(m.income, m.expenses)),\r\n        1\r\n    );\r\n\r\n    const fullMonthNames = [\r\n        \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n        \"July\", \"August\", \"September\", \"October\", \"November\", \"December\",\r\n    ];\r\n\r\n    const chartData = stats.monthlyData.map((d: any) => ({\r\n        month: fullMonthNames[d.month - 1],\r\n        income: d.income,\r\n        expenses: d.expenses,\r\n    }));\r\n\r\n    return (\r\n        <>\r\n            <header className=\"flex h-16 shrink-0 items-center gap-2 border-b\">\r\n                <div className=\"flex items-center gap-2 px-4\">\r\n                    <SidebarTrigger className=\"-ml-1\" />\r\n                    <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\r\n                    <TrendingUp className=\"h-4 w-4\" />\r\n                    <h1 className=\"text-lg font-semibold\">Yearly Overview</h1>\r\n                </div>\r\n            </header>\r\n            <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n                {/* Year Navigator */}\r\n                <div className=\"flex items-center gap-4\">\r\n                    <Button variant=\"outline\" size=\"icon\" asChild>\r\n                        <Link href={`/year/${year - 1}`}>\r\n                            <ChevronLeft className=\"h-4 w-4\" />\r\n                        </Link>\r\n                    </Button>\r\n                    <h2 className=\"text-2xl font-bold\">{year}</h2>\r\n                    <Button variant=\"outline\" size=\"icon\" asChild>\r\n                        <Link href={`/year/${year + 1}`}>\r\n                            <ChevronRight className=\"h-4 w-4\" />\r\n                        </Link>\r\n                    </Button>\r\n                </div>\r\n\r\n                {/* Summary Cards */}\r\n                <div className=\"grid gap-4 md:grid-cols-3\">\r\n                    <Card className=\"bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border-emerald-500/20\">\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium\">Total Income</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-3xl font-bold text-emerald-500\">\r\n                                {formatCurrency(stats.totalIncome)}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"bg-gradient-to-br from-red-500/10 to-red-600/5 border-red-500/20\">\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium\">Total Expenses</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-3xl font-bold text-red-500\">\r\n                                {formatCurrency(stats.totalExpenses)}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20\">\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium\">Net Savings</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className={`text-3xl font-bold ${stats.totalIncome - stats.totalExpenses >= 0 ? \"text-blue-500\" : \"text-red-500\"}`}>\r\n                                {formatCurrency(stats.totalIncome - stats.totalExpenses)}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                {/* Monthly Breakdown Chart */}\r\n                <MonthlyBreakdownChart data={chartData} />\r\n\r\n                {/* Monthly Detailed List */}\r\n                <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden\">\r\n                    <CardHeader className=\"bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-800\">\r\n                        <CardTitle className=\"text-lg font-bold uppercase tracking-tight\">Monthly Details</CardTitle>\r\n                        <CardDescription className=\"font-medium text-[10px] uppercase tracking-widest\">Detailed breakdown by month</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"pt-6\">\r\n                        <div className=\"space-y-4\">\r\n                            {stats.monthlyData.map((month, index) => (\r\n                                <Link\r\n                                    key={month.month}\r\n                                    href={`/month/${year}/${month.month}`}\r\n                                    className=\"block\"\r\n                                >\r\n                                    <div className=\"flex items-center gap-4 p-3 rounded-lg hover:bg-muted/50 transition-colors border border-transparent hover:border-slate-100 dark:hover:border-slate-800\">\r\n                                        <div className=\"w-12 text-sm font-medium\">\r\n                                            {monthNames[index]}\r\n                                        </div>\r\n                                        <div className=\"flex-1 space-y-2\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div className=\"w-16 text-xs text-emerald-500 font-bold uppercase tracking-tighter\">Income</div>\r\n                                                <Progress\r\n                                                    value={(month.income / maxMonthlyValue) * 100}\r\n                                                    className=\"flex-1 h-2 bg-emerald-100 dark:bg-emerald-950 [&>div]:bg-emerald-500\"\r\n                                                />\r\n                                                <div className=\"w-24 text-sm text-right font-mono\">\r\n                                                    {formatCurrency(month.income)}\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div className=\"w-16 text-xs text-red-500 font-bold uppercase tracking-tighter\">Expenses</div>\r\n                                                <Progress\r\n                                                    value={(month.expenses / maxMonthlyValue) * 100}\r\n                                                    className=\"flex-1 h-2 bg-rose-100 dark:bg-rose-950 [&>div]:bg-red-500\"\r\n                                                />\r\n                                                <div className=\"w-24 text-sm text-right font-mono\">\r\n                                                    {formatCurrency(month.expenses)}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className={`w-24 text-right font-bold ${month.income - month.expenses >= 0 ? \"text-emerald-500\" : \"text-red-500\"}`}>\r\n                                            {month.income - month.expenses >= 0 ? \"+\" : \"\"}\r\n                                            {formatCurrency(month.income - month.expenses)}\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                            ))}\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Top Spending Categories */}\r\n                {stats.topCategories.length > 0 && (\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Top Spending Categories</CardTitle>\r\n                            <CardDescription>Your biggest expense areas this year</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"space-y-4\">\r\n                                {stats.topCategories.map((cat, index) => {\r\n                                    const percentage = stats.totalExpenses > 0\r\n                                        ? (cat.total / stats.totalExpenses) * 100\r\n                                        : 0;\r\n                                    return (\r\n                                        <div key={cat.id} className=\"flex items-center gap-4\">\r\n                                            <div className=\"w-8 text-lg font-bold text-muted-foreground\">\r\n                                                #{index + 1}\r\n                                            </div>\r\n                                            <div\r\n                                                className=\"h-4 w-4 rounded-full\"\r\n                                                style={{ backgroundColor: cat.color || \"#6b7280\" }}\r\n                                            />\r\n                                            <div className=\"flex-1\">\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <span className=\"font-medium\">{cat.name}</span>\r\n                                                    <span className=\"text-muted-foreground\">\r\n                                                        {formatCurrency(cat.total)}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <Progress value={percentage} className=\"mt-1\" />\r\n                                            </div>\r\n                                            <div className=\"w-16 text-right text-sm text-muted-foreground\">\r\n                                                {percentage.toFixed(1)}%\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\api\\auth\\[...nextauth]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\app\\login\\page.tsx","messages":[{"ruleId":"@next/next/no-html-link-for-pages","severity":2,"message":"Do not use an `<a>` element to navigate to `/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages","line":8,"column":9,"nodeType":"JSXOpeningElement","endLine":8,"endColumn":92}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Wallet } from \"lucide-react\";\nimport { LoginForm } from \"@/components/login-form\";\n\nexport default function LoginPage() {\n  return (\n    <div className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10\">\n      <div className=\"flex w-full max-w-sm flex-col gap-6\">\n        <a href=\"/\" className=\"flex items-center gap-2 self-center font-medium text-white\">\n          <div className=\"bg-gradient-to-br from-emerald-500 to-teal-600 text-white flex size-8 items-center justify-center rounded-lg\">\n            <Wallet className=\"size-5\" />\n          </div>\n          <span className=\"text-xl font-semibold\">Coin Tracker</span>\n        </a>\n        <LoginForm />\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\accounts-dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Target' is defined but never used.","line":4,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Target"},"fix":{"range":[76,84],"text":""},"desc":"Remove unused variable \"Target\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardDescription"},"fix":{"range":[243,265],"text":""},"desc":"Remove unused variable \"CardDescription\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CartesianGrid' is defined but never used.","line":44,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":40,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CartesianGrid"},"fix":{"range":[1266,1281],"text":""},"desc":"Remove unused variable \"CartesianGrid\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XAxis' is defined but never used.","line":44,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":47,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"XAxis"},"fix":{"range":[1281,1288],"text":""},"desc":"Remove unused variable \"XAxis\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'YAxis' is defined but never used.","line":44,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":54,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"YAxis"},"fix":{"range":[1288,1295],"text":""},"desc":"Remove unused variable \"YAxis\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Tooltip' is defined but never used.","line":44,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":63,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Tooltip"},"fix":{"range":[1295,1304],"text":""},"desc":"Remove unused variable \"Tooltip\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Plus, PiggyBank, Target, TrendingUp, Trash2, Pencil, Landmark, Wallet, CreditCard as CardIcon, ArrowDownRight, Smartphone } from \"lucide-react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { createBankAccount, deleteBankAccount, updateBankAccount } from \"@/actions/accounts\";\r\nimport { toast } from \"sonner\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { Area, AreaChart, CartesianGrid, XAxis, YAxis, Tooltip, ResponsiveContainer } from \"recharts\";\r\nimport { formatCurrency } from \"@/lib/utils\";\r\n\r\ninterface AccountsDashboardProps {\r\n    accounts: {\r\n        id: string;\r\n        name: string;\r\n        type: string;\r\n        balance: number;\r\n        isSavings: boolean;\r\n        targetAmount: number | null;\r\n        growthRate: number | null;\r\n        targetDate: Date | null;\r\n    }[];\r\n    growthStats: {\r\n        byAccount: {\r\n            accountId: string;\r\n            growthAmount: number;\r\n            growthPercentage: number;\r\n        }[];\r\n    };\r\n}\r\n\r\nexport function AccountsDashboard({ accounts, growthStats }: AccountsDashboardProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [editOpen, setEditOpen] = useState(false);\r\n    const [selectedAccount, setSelectedAccount] = useState<AccountsDashboardProps[\"accounts\"][0] | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\r\n    const [idToDelete, setIdToDelete] = useState<string | null>(null);\r\n\r\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        const result = await createBankAccount(formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Account added\");\r\n            setOpen(false);\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleEditSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        if (!selectedAccount) return;\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        const result = await updateBankAccount(selectedAccount.id, formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Account updated\");\r\n            setEditOpen(false);\r\n            setSelectedAccount(null);\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleDelete(id: string) {\r\n        setIdToDelete(id);\r\n        setDeleteConfirmOpen(true);\r\n    }\r\n\r\n    async function confirmDelete() {\r\n        if (!idToDelete) return;\r\n        const result = await deleteBankAccount(idToDelete);\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Account deleted\");\r\n            setDeleteConfirmOpen(false);\r\n            setIdToDelete(null);\r\n        }\r\n    }\r\n\r\n    // Calculate total balance vs total savings\r\n    const totalBalance = accounts.reduce((sum, a) => sum + Number(a.balance), 0);\r\n    const savingsAccounts = accounts.filter(a => a.isSavings);\r\n    const totalSavings = savingsAccounts.reduce((sum, a) => sum + Number(a.balance), 0);\r\n\r\n    // Simple projection for savings accounts\r\n    const projectionData = Array.from({ length: 12 }, (_, i) => {\r\n        const month = i + 1;\r\n        const projected = savingsAccounts.reduce((sum, a) => {\r\n            const annualRate = Number(a.growthRate || 0) / 100;\r\n            const monthlyRate = annualRate / 12;\r\n            return sum + (Number(a.balance) * Math.pow(1 + monthlyRate, month));\r\n        }, 0);\r\n        return {\r\n            name: `Month ${month}`,\r\n            value: projected,\r\n        };\r\n    });\r\n\r\n    const getAccountIcon = (type: string) => {\r\n        switch (type.toLowerCase()) {\r\n            case \"cash\": return <Wallet className=\"h-4 w-4\" />;\r\n            case \"e-wallet\": return <Smartphone className=\"h-4 w-4\" />;\r\n            case \"credit\": return <CardIcon className=\"h-4 w-4\" />;\r\n            default: return <Landmark className=\"h-4 w-4\" />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold tracking-tight\">Accounts</h2>\r\n                    <p className=\"text-muted-foreground\">\r\n                        Manage your bank accounts, wallets and savings\r\n                    </p>\r\n                </div>\r\n                <Dialog open={open} onOpenChange={setOpen}>\r\n                    <DialogTrigger asChild>\r\n                        <Button>\r\n                            <Plus className=\"mr-2 h-4 w-4\" />\r\n                            Add Account\r\n                        </Button>\r\n                    </DialogTrigger>\r\n                    <DialogContent>\r\n                        <DialogHeader>\r\n                            <DialogTitle>Add Account</DialogTitle>\r\n                            <DialogDescription>\r\n                                Create a new bank account or wallet\r\n                            </DialogDescription>\r\n                        </DialogHeader>\r\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"name\">Name</Label>\r\n                                <Input id=\"name\" name=\"name\" placeholder=\"e.g., Maybank, Cash\" required />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"type\">Type</Label>\r\n                                <Select name=\"type\" defaultValue=\"Savings\">\r\n                                    <SelectTrigger>\r\n                                        <SelectValue placeholder=\"Select type\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value=\"Savings\">Bank Account</SelectItem>\r\n                                        <SelectItem value=\"E-Wallet\">E-Wallet</SelectItem>\r\n                                        <SelectItem value=\"Cash\">Cash</SelectItem>\r\n                                        <SelectItem value=\"Investment\">Investment</SelectItem>\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"balance\">Initial Balance</Label>\r\n                                <Input id=\"balance\" name=\"balance\" type=\"number\" step=\"0.01\" placeholder=\"0.00\" />\r\n                            </div>\r\n                            <div className=\"flex items-center justify-between rounded-lg border p-3\">\r\n                                <div className=\"space-y-0.5\">\r\n                                    <Label>Mark as Savings</Label>\r\n                                    <p className=\"text-xs text-muted-foreground\">Include in total savings calculation</p>\r\n                                </div>\r\n                                <Switch name=\"isSavings\" value=\"true\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"targetAmount\">Target Amount (Optional)</Label>\r\n                                <Input id=\"targetAmount\" name=\"targetAmount\" type=\"number\" step=\"0.01\" placeholder=\"0.00\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"growthRate\">Annual Return (%) (Optional)</Label>\r\n                                <Input id=\"growthRate\" name=\"growthRate\" type=\"number\" step=\"0.01\" placeholder=\"e.g. 4.0\" />\r\n                            </div>\r\n                            <div className=\"flex gap-2 pt-4\">\r\n                                <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                    {loading ? \"Adding...\" : \"Add Account\"}\r\n                                </Button>\r\n                            </div>\r\n                        </form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n\r\n                {/* Edit Dialog */}\r\n                <Dialog open={editOpen} onOpenChange={setEditOpen}>\r\n                    <DialogContent>\r\n                        <DialogHeader>\r\n                            <DialogTitle>Edit Account</DialogTitle>\r\n                            <DialogDescription>\r\n                                Update account details\r\n                            </DialogDescription>\r\n                        </DialogHeader>\r\n                        {selectedAccount && (\r\n                            <form onSubmit={handleEditSubmit} className=\"space-y-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-name\">Name</Label>\r\n                                    <Input id=\"edit-name\" name=\"name\" defaultValue={selectedAccount.name} required />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-type\">Type</Label>\r\n                                    <Select name=\"type\" defaultValue={selectedAccount.type}>\r\n                                        <SelectTrigger>\r\n                                            <SelectValue placeholder=\"Select type\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"Savings\">Bank Account</SelectItem>\r\n                                            <SelectItem value=\"E-Wallet\">E-Wallet</SelectItem>\r\n                                            <SelectItem value=\"Cash\">Cash</SelectItem>\r\n                                            <SelectItem value=\"Investment\">Investment</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-balance\">Current Balance</Label>\r\n                                    <Input id=\"edit-balance\" name=\"balance\" type=\"number\" step=\"0.01\" defaultValue={selectedAccount.balance} />\r\n                                </div>\r\n                                <div className=\"flex items-center justify-between rounded-lg border p-3\">\r\n                                    <div className=\"space-y-0.5\">\r\n                                        <Label>Mark as Savings</Label>\r\n                                        <p className=\"text-xs text-muted-foreground\">Include in total savings calculation</p>\r\n                                    </div>\r\n                                    <Switch name=\"isSavings\" value=\"true\" defaultChecked={selectedAccount.isSavings} />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-targetAmount\">Target Amount (Optional)</Label>\r\n                                    <Input id=\"edit-targetAmount\" name=\"targetAmount\" type=\"number\" step=\"0.01\" defaultValue={selectedAccount.targetAmount ?? \"\"} />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-growthRate\">Annual Return (%) (Optional)</Label>\r\n                                    <Input id=\"edit-growthRate\" name=\"growthRate\" type=\"number\" step=\"0.01\" defaultValue={selectedAccount.growthRate ?? \"\"} />\r\n                                </div>\r\n                                <div className=\"flex gap-2 pt-4\">\r\n                                    <Button type=\"button\" variant=\"outline\" className=\"flex-1\" onClick={() => setEditOpen(false)}>\r\n                                        Cancel\r\n                                    </Button>\r\n                                    <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                        {loading ? \"Updating...\" : \"Update Account\"}\r\n                                    </Button>\r\n                                </div>\r\n                            </form>\r\n                        )}\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n            <AlertDialog open={deleteConfirmOpen} onOpenChange={setDeleteConfirmOpen}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This action cannot be undone. This will permanently delete your bank account\r\n                            and all associated records.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel onClick={() => setIdToDelete(null)}>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={confirmDelete} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n\r\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n                {/* Total Balance Card */}\r\n                <Card className=\"bg-gradient-to-br from-indigo-500/10 to-indigo-600/5 border-indigo-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">Total Balance</CardTitle>\r\n                        <Landmark className=\"h-4 w-4 text-indigo-500\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold text-indigo-600 dark:text-indigo-400\">\r\n                            {formatCurrency(totalBalance)}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mt-1 font-medium\">\r\n                            Across {accounts.length} accounts\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Total Savings Card */}\r\n                <Card className=\"bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border-emerald-500/20 shadow-sm transition-all hover:shadow-md\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">Total Savings</CardTitle>\r\n                        <PiggyBank className=\"h-4 w-4 text-emerald-500\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold text-emerald-600 dark:text-emerald-400\">\r\n                            {formatCurrency(totalSavings)}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mt-1 font-medium\">\r\n                            {savingsAccounts.length} savings accounts\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Growth Chart */}\r\n                <Card className=\"col-span-full lg:col-span-1 border-emerald-500/10\">\r\n                    <CardHeader className=\"pb-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <CardTitle className=\"text-sm font-medium\">1-Year Projection</CardTitle>\r\n                            <TrendingUp className=\"h-4 w-4 text-emerald-500\" />\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"h-[70px] w-full\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <AreaChart data={projectionData}>\r\n                                    <defs>\r\n                                        <linearGradient id=\"colorValue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                            <stop offset=\"5%\" stopColor=\"#10b981\" stopOpacity={0.3} />\r\n                                            <stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0} />\r\n                                        </linearGradient>\r\n                                    </defs>\r\n                                    <Area\r\n                                        type=\"monotone\"\r\n                                        dataKey=\"value\"\r\n                                        stroke=\"#10b981\"\r\n                                        strokeWidth={2}\r\n                                        fill=\"url(#colorValue)\"\r\n                                    />\r\n                                </AreaChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                        <div className=\"mt-2 text-[10px] uppercase font-bold tracking-wider text-muted-foreground text-center\">\r\n                            Projected Growth\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n                {accounts.map((account) => {\r\n                    const progress = account.targetAmount ? (Number(account.balance) / Number(account.targetAmount)) * 100 : 0;\r\n                    const stats = growthStats.byAccount.find(s => s.accountId === account.id);\r\n                    const isPositive = stats ? stats.growthAmount >= 0 : true;\r\n\r\n                    return (\r\n                        <Card key={account.id} className=\"group relative overflow-hidden transition-all hover:shadow-md hover:border-emerald-500/30\">\r\n                            <CardHeader className=\"pb-2\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className={`p-2 rounded-lg ${account.isSavings ? 'bg-emerald-500/10 text-emerald-600' : 'bg-slate-500/10 text-slate-600'}`}>\r\n                                            {getAccountIcon(account.type)}\r\n                                        </div>\r\n                                        <CardTitle className=\"text-base font-semibold\">{account.name}</CardTitle>\r\n                                    </div>\r\n                                    <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10\">\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-muted-foreground hover:text-primary\"\r\n                                            onClick={() => {\r\n                                                setSelectedAccount(account);\r\n                                                setEditOpen(true);\r\n                                            }}\r\n                                        >\r\n                                            <Pencil className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-muted-foreground hover:text-destructive\"\r\n                                            onClick={() => handleDelete(account.id)}\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </CardHeader>\r\n                            <CardContent className=\"relative\">\r\n                                <div className=\"text-3xl font-bold mb-1 tracking-tight\">{formatCurrency(Number(account.balance))}</div>\r\n                                <div className=\"flex items-center justify-between mb-4\">\r\n                                    <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-widest\">\r\n                                        {account.type === \"Savings\" ? \"Bank Account\" : account.type}\r\n                                    </span>\r\n                                    {account.isSavings && (\r\n                                        <span className=\"text-[10px] font-bold uppercase tracking-tight bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 px-2 py-0.5 rounded-full\">Savings</span>\r\n                                    )}\r\n                                </div>\r\n                                {account.targetAmount && account.isSavings && (\r\n                                    <div className=\"space-y-2 mt-4\">\r\n                                        <div className=\"flex justify-between text-xs font-semibold\">\r\n                                            <span className=\"text-muted-foreground\">Target: {formatCurrency(Number(account.targetAmount))}</span>\r\n                                            <span className=\"text-emerald-600\">{progress.toFixed(0)}%</span>\r\n                                        </div>\r\n                                        <Progress value={progress} className=\"h-1.5 bg-emerald-100 dark:bg-emerald-950 [&>div]:bg-emerald-500\" />\r\n                                    </div>\r\n                                )}\r\n                                {Number(account.growthRate) > 0 && (\r\n                                    <div className=\"absolute top-2 right-2 flex items-center gap-1.5 px-2 py-1 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 rounded-md text-[10px] font-bold tracking-tight\">\r\n                                        <TrendingUp className=\"h-3 w-3\" />\r\n                                        <span>{Number(account.growthRate)}%</span>\r\n                                    </div>\r\n                                )}\r\n                                {account.isSavings && stats && (\r\n                                    <div className=\"mt-4 border-t pt-4\">\r\n                                        <div className=\"flex items-center justify-between text-xs font-semibold\">\r\n                                            <span className=\"text-muted-foreground\">YTD Growth</span>\r\n                                            <div className={`flex items-center gap-1 ${isPositive ? 'text-emerald-500' : 'text-red-500'}`}>\r\n                                                {isPositive ? <TrendingUp className=\"h-3 w-3\" /> : <ArrowDownRight className=\"h-3 w-3\" />}\r\n                                                <span>{isPositive ? '+' : ''}{formatCurrency(stats.growthAmount)} ({stats.growthPercentage.toFixed(1)}%)</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </CardContent>\r\n                        </Card>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\app-sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\budgets-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\categories-settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Switch' is defined but never used.","line":26,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Switch"},"fix":{"range":[730,778],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { ArrowLeft, Folder, Plus, Trash2, Tag, Pencil } from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { createCategory, deleteCategory, updateCategory } from \"@/actions/categories\";\r\nimport { toast } from \"sonner\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\ninterface CategoriesSettingsProps {\r\n    categories: {\r\n        id: string;\r\n        name: string;\r\n        icon?: string | null;\r\n        color?: string | null;\r\n        isDefault?: boolean;\r\n    }[];\r\n}\r\n\r\nexport function CategoriesSettings({ categories }: CategoriesSettingsProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [editOpen, setEditOpen] = useState(false);\r\n    const [selectedCategory, setSelectedCategory] = useState<CategoriesSettingsProps[\"categories\"][0] | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\r\n    const [idToDelete, setIdToDelete] = useState<string | null>(null);\r\n    const router = useRouter();\r\n\r\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        const result = await createCategory(formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Category added\");\r\n            setOpen(false);\r\n            router.refresh();\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleEditSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        if (!selectedCategory) return;\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        const result = await updateCategory(selectedCategory.id, formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Category updated\");\r\n            setEditOpen(false);\r\n            setSelectedCategory(null);\r\n            router.refresh();\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleDelete(id: string) {\r\n        setIdToDelete(id);\r\n        setDeleteConfirmOpen(true);\r\n    }\r\n\r\n    async function confirmDelete() {\r\n        if (!idToDelete) return;\r\n        const result = await deleteCategory(idToDelete);\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Category deleted\");\r\n            setDeleteConfirmOpen(false);\r\n            setIdToDelete(null);\r\n            router.refresh();\r\n        }\r\n    }\r\n\r\n    // Predefined colors for categories\r\n    const colors = [\r\n        \"#ef4444\", // red\r\n        \"#f97316\", // orange\r\n        \"#f59e0b\", // amber\r\n        \"#84cc16\", // lime\r\n        \"#10b981\", // emerald\r\n        \"#06b6d4\", // cyan\r\n        \"#3b82f6\", // blue\r\n        \"#6366f1\", // indigo\r\n        \"#8b5cf6\", // violet\r\n        \"#d946ef\", // fuchsia\r\n        \"#ec4899\", // pink\r\n        \"#6b7280\", // gray\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            <header className=\"flex h-16 shrink-0 items-center gap-2 border-b\">\r\n                <div className=\"flex items-center gap-2 px-4\">\r\n                    <SidebarTrigger className=\"-ml-1\" />\r\n                    <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\r\n                    <Button variant=\"ghost\" size=\"icon\" asChild>\r\n                        <Link href=\"/settings\">\r\n                            <ArrowLeft className=\"h-4 w-4\" />\r\n                        </Link>\r\n                    </Button>\r\n                    <Folder className=\"h-4 w-4\" />\r\n                    <h1 className=\"text-lg font-semibold\">Categories</h1>\r\n                </div>\r\n            </header>\r\n            <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold tracking-tight\">Categories</h2>\r\n                        <p className=\"text-muted-foreground\">\r\n                            Manage your spending categories\r\n                        </p>\r\n                    </div>\r\n                    <Dialog open={open} onOpenChange={setOpen}>\r\n                        <DialogTrigger asChild>\r\n                            <Button>\r\n                                <Plus className=\"mr-2 h-4 w-4\" />\r\n                                Add Category\r\n                            </Button>\r\n                        </DialogTrigger>\r\n                        <DialogContent>\r\n                            <DialogHeader>\r\n                                <DialogTitle>Add Category</DialogTitle>\r\n                                <DialogDescription>\r\n                                    Create a new category for your transactions\r\n                                </DialogDescription>\r\n                            </DialogHeader>\r\n                            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"name\">Name</Label>\r\n                                    <Input\r\n                                        id=\"name\"\r\n                                        name=\"name\"\r\n                                        placeholder=\"e.g., Groceries, Transport\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Color</Label>\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {colors.map((color) => (\r\n                                            <label\r\n                                                key={color}\r\n                                                className=\"cursor-pointer relative flex items-center justify-center p-0.5 rounded-full border-2 border-transparent hover:border-gray-400 has-[:checked]:border-black dark:has-[:checked]:border-white\"\r\n                                            >\r\n                                                <input\r\n                                                    type=\"radio\"\r\n                                                    name=\"color\"\r\n                                                    value={color}\r\n                                                    className=\"sr-only\"\r\n                                                    defaultChecked={color === colors[0]}\r\n                                                />\r\n                                                <span\r\n                                                    className=\"w-6 h-6 rounded-full\"\r\n                                                    style={{ backgroundColor: color }}\r\n                                                />\r\n                                            </label>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex gap-2 pt-4\">\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"outline\"\r\n                                        className=\"flex-1\"\r\n                                        onClick={() => setOpen(false)}\r\n                                    >\r\n                                        Cancel\r\n                                    </Button>\r\n                                    <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                        {loading ? \"Adding...\" : \"Add Category\"}\r\n                                    </Button>\r\n                                </div>\r\n                            </form>\r\n                        </DialogContent>\r\n                    </Dialog>\r\n\r\n                    {/* Edit Dialog */}\r\n                    <Dialog open={editOpen} onOpenChange={setEditOpen}>\r\n                        <DialogContent>\r\n                            <DialogHeader>\r\n                                <DialogTitle>Edit Category</DialogTitle>\r\n                                <DialogDescription>\r\n                                    Update category details\r\n                                </DialogDescription>\r\n                            </DialogHeader>\r\n                            {selectedCategory && (\r\n                                <form onSubmit={handleEditSubmit} className=\"space-y-4\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label htmlFor=\"edit-name\">Name</Label>\r\n                                        <Input\r\n                                            id=\"edit-name\"\r\n                                            name=\"name\"\r\n                                            defaultValue={selectedCategory.name}\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label>Color</Label>\r\n                                        <div className=\"flex flex-wrap gap-2\">\r\n                                            {colors.map((color) => (\r\n                                                <label\r\n                                                    key={color}\r\n                                                    className=\"cursor-pointer relative flex items-center justify-center p-0.5 rounded-full border-2 border-transparent hover:border-gray-400 has-[:checked]:border-black dark:has-[:checked]:border-white\"\r\n                                                >\r\n                                                    <input\r\n                                                        type=\"radio\"\r\n                                                        name=\"color\"\r\n                                                        value={color}\r\n                                                        className=\"sr-only\"\r\n                                                        defaultChecked={color === (selectedCategory.color || colors[0])}\r\n                                                    />\r\n                                                    <span\r\n                                                        className=\"w-6 h-6 rounded-full\"\r\n                                                        style={{ backgroundColor: color }}\r\n                                                    />\r\n                                                </label>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex gap-2 pt-4\">\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            variant=\"outline\"\r\n                                            className=\"flex-1\"\r\n                                            onClick={() => setEditOpen(false)}\r\n                                        >\r\n                                            Cancel\r\n                                        </Button>\r\n                                        <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                            {loading ? \"Updating...\" : \"Update Category\"}\r\n                                        </Button>\r\n                                    </div>\r\n                                </form>\r\n                            )}\r\n                        </DialogContent>\r\n                    </Dialog>\r\n                </div>\r\n\r\n                <AlertDialog open={deleteConfirmOpen} onOpenChange={setDeleteConfirmOpen}>\r\n                    <AlertDialogContent>\r\n                        <AlertDialogHeader>\r\n                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\r\n                            <AlertDialogDescription>\r\n                                This will permanently delete this category. Transactions in this category will become uncategorized.\r\n                            </AlertDialogDescription>\r\n                        </AlertDialogHeader>\r\n                        <AlertDialogFooter>\r\n                            <AlertDialogCancel onClick={() => setIdToDelete(null)}>Cancel</AlertDialogCancel>\r\n                            <AlertDialogAction onClick={confirmDelete} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n                                Delete\r\n                            </AlertDialogAction>\r\n                        </AlertDialogFooter>\r\n                    </AlertDialogContent>\r\n                </AlertDialog>\r\n\r\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                    {categories.map((category) => (\r\n                        <Card key={category.id} className=\"group relative\">\r\n                            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                                <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\r\n                                    <div\r\n                                        className=\"w-3 h-3 rounded-full\"\r\n                                        style={{ backgroundColor: category.color || \"#6b7280\" }}\r\n                                    />\r\n                                    {category.name}\r\n                                </CardTitle>\r\n                                <Tag className=\"h-4 w-4 text-muted-foreground\" />\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <div className=\"flex items-center justify-between mt-2\">\r\n                                    {category.isDefault && (\r\n                                        <Badge variant=\"secondary\">Default</Badge>\r\n                                    )}\r\n                                    <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-auto\">\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-muted-foreground hover:text-primary\"\r\n                                            onClick={() => {\r\n                                                setSelectedCategory(category);\r\n                                                setEditOpen(true);\r\n                                            }}\r\n                                        >\r\n                                            <Pencil className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-muted-foreground hover:text-destructive\"\r\n                                            onClick={() => handleDelete(category.id)}\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n\r\n                {categories.length === 0 && (\r\n                    <Card>\r\n                        <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                            <Folder className=\"h-12 w-12 text-muted-foreground/50\" />\r\n                            <p className=\"mt-4 text-lg font-medium\">No categories found</p>\r\n                            <p className=\"text-muted-foreground\">\r\n                                Add your first category to start organizing expenses\r\n                            </p>\r\n                        </CardContent>\r\n                    </Card>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\credit-cards-settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Switch' is defined but never used.","line":19,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Switch"},"fix":{"range":[597,645],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getInstallments' is defined but never used.","line":53,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getInstallments"},"fix":{"range":[1586,1608],"text":""},"desc":"Remove unused variable \"getInstallments\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CalendarIcon' is defined but never used.","line":58,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":34,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CalendarIcon"},"fix":{"range":[1746,1771],"text":""},"desc":"Remove unused variable \"CalendarIcon\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { ArrowLeft, CreditCard, DollarSign, Plus, Trash2 } from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { createCreditCard, deleteCreditCard, updateCreditCard } from \"@/actions/credit-cards\";\r\nimport { toast } from \"sonner\";\r\nimport { Pencil } from \"lucide-react\";\r\n\r\nconst colors = [\r\n    \"#ef4444\", \"#f97316\", \"#f59e0b\", \"#84cc16\", \"#22c55e\",\r\n    \"#14b8a6\", \"#06b6d4\", \"#3b82f6\", \"#6366f1\", \"#8b5cf6\",\r\n    \"#a855f7\", \"#d946ef\", \"#ec4899\", \"#f43f5e\",\r\n];\r\n\r\nimport { formatCurrency, getCurrentDateInKL } from \"@/lib/utils\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport {\r\n    createInstallment,\r\n    deleteInstallment,\r\n    getInstallments,\r\n    payInstallment,\r\n    updateInstallment\r\n} from \"@/actions/installments\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Calendar as CalendarIcon, History, Pencil as EditPencil } from \"lucide-react\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { DatePicker } from \"@/components/ui/date-picker\";\r\n\r\ninterface CreditCardsSettingsProps {\r\n    creditCards: {\n        id: string;\n        name: string;\n        lastFour: string | null;\n        limit: number | null;\n        statementDay: number | null;\n        dueDay: number | null;\n        color: string | null;\n        balance: number;\n    }[];\n    installments: {\r\n        id: string;\r\n        name: string;\r\n        totalAmount: number;\r\n        monthlyPayment: number;\r\n        totalMonths: number;\r\n        remainingMonths: number;\r\n        startDate: string;\r\n        creditCardId: string;\r\n        categoryId: string | null;\r\n        category: {\r\n            name: string;\r\n            color: string | null;\r\n        } | null;\r\n        creditCard: {\r\n            name: string;\r\n        };\r\n    }[];\r\n    categories: {\r\n        id: string;\r\n        name: string;\r\n        color: string | null;\r\n    }[];\r\n}\r\n\r\nexport function CreditCardsSettings({ creditCards, installments, categories }: CreditCardsSettingsProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [editOpen, setEditOpen] = useState(false);\r\n    const [installmentOpen, setInstallmentOpen] = useState(false);\r\n    const [editInstallmentOpen, setEditInstallmentOpen] = useState(false);\r\n    const [selectedCard, setSelectedCard] = useState<CreditCardsSettingsProps[\"creditCards\"][0] | null>(null);\r\n    const [selectedInstallment, setSelectedInstallment] = useState<CreditCardsSettingsProps[\"installments\"][0] | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [selectedColor, setSelectedColor] = useState(colors[4]);\r\n    const [installmentDate, setInstallmentDate] = useState<Date | undefined>(getCurrentDateInKL());\r\n    const [deleteCardOpen, setDeleteCardOpen] = useState(false);\r\n    const [cardToDelete, setCardToDelete] = useState<string | null>(null);\r\n    const [deleteInstOpen, setDeleteInstOpen] = useState(false);\r\n    const [instToDelete, setInstToDelete] = useState<string | null>(null);\r\n    const router = useRouter();\r\n\r\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        formData.set(\"color\", selectedColor);\r\n\r\n        const result = await createCreditCard(formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Credit card added\");\r\n            setOpen(false);\r\n            router.refresh();\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleEditSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        if (!selectedCard) return;\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        formData.set(\"color\", selectedColor);\r\n\r\n        const result = await updateCreditCard(selectedCard.id, formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Credit card updated\");\r\n            setEditOpen(false);\r\n            setSelectedCard(null);\r\n            router.refresh();\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleDelete(id: string) {\r\n        setCardToDelete(id);\r\n        setDeleteCardOpen(true);\r\n    }\r\n\r\n    async function confirmDeleteCard() {\r\n        if (!cardToDelete) return;\r\n        const result = await deleteCreditCard(cardToDelete);\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Credit card deleted\");\r\n            setDeleteCardOpen(false);\r\n            setCardToDelete(null);\r\n            router.refresh();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <header className=\"flex h-16 shrink-0 items-center gap-2 border-b\">\r\n                <div className=\"flex items-center gap-2 px-4\">\r\n                    <SidebarTrigger className=\"-ml-1\" />\r\n                    <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\r\n                    <Button variant=\"ghost\" size=\"icon\" asChild>\r\n                        <Link href=\"/settings\">\r\n                            <ArrowLeft className=\"h-4 w-4\" />\r\n                        </Link>\r\n                    </Button>\r\n                    <CreditCard className=\"h-4 w-4\" />\r\n                    <h1 className=\"text-lg font-semibold\">Credit Cards</h1>\r\n                </div>\r\n            </header>\r\n            <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold tracking-tight\">Credit Cards</h2>\r\n                        <p className=\"text-muted-foreground\">\r\n                            Manage your payment methods\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <Dialog open={open} onOpenChange={(val) => {\r\n                            setOpen(val);\r\n                            if (val) setSelectedColor(colors[4]);\r\n                        }}>\r\n                            <DialogTrigger asChild>\r\n                                <Button>\r\n                                    <Plus className=\"mr-2 h-4 w-4\" />\r\n                                    Add Credit Card\r\n                                </Button>\r\n                            </DialogTrigger>\r\n                            <DialogContent>\r\n                                <DialogHeader>\r\n                                    <DialogTitle>Add Credit Card</DialogTitle>\r\n                                    <DialogDescription>\r\n                                        Add a new credit card to track your spending\r\n                                    </DialogDescription>\r\n                                </DialogHeader>\r\n                                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label htmlFor=\"name\">Card Name</Label>\r\n                                        <Input\r\n                                            id=\"name\"\r\n                                            name=\"name\"\r\n                                            placeholder=\"e.g., Visa Platinum\"\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"limit\">Credit Limit (optional)</Label>\n                                        <Input\n                                            id=\"limit\"\n                                            name=\"limit\"\n                                            type=\"number\"\n                                            step=\"0.01\"\n                                            placeholder=\"5000.00\"\n                                        />\n                                    </div>\n                                    <div className=\"grid grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"statementDay\">Statement Day</Label>\n                                            <Input\n                                                id=\"statementDay\"\n                                                name=\"statementDay\"\n                                                type=\"number\"\n                                                min=\"1\"\n                                                max=\"31\"\n                                                placeholder=\"19\"\n                                                required\n                                            />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"dueDay\">Payment Due Day</Label>\n                                            <Input\n                                                id=\"dueDay\"\n                                                name=\"dueDay\"\n                                                type=\"number\"\n                                                min=\"1\"\n                                                max=\"31\"\n                                                placeholder=\"5\"\n                                                required\n                                            />\n                                        </div>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"lastFour\">Last 4 Digits (optional)</Label>\n                                        <Input\n                                            id=\"lastFour\"\n                                            name=\"lastFour\"\r\n                                            placeholder=\"1234\"\r\n                                            maxLength={4}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label>Color</Label>\r\n                                        <div className=\"flex flex-wrap gap-2\">\r\n                                            {colors.map((color) => (\r\n                                                <button\r\n                                                    key={color}\r\n                                                    type=\"button\"\r\n                                                    className={`h-8 w-8 rounded-full transition-transform ${selectedColor === color\r\n                                                        ? \"ring-2 ring-offset-2 ring-offset-background scale-110\"\r\n                                                        : \"\"\r\n                                                        }`}\r\n                                                    style={{ backgroundColor: color, [\"--tw-ring-color\" as string]: color } as React.CSSProperties}\r\n                                                    onClick={() => setSelectedColor(color)}\r\n                                                />\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex gap-2 pt-4\">\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            variant=\"outline\"\r\n                                            className=\"flex-1\"\r\n                                            onClick={() => setOpen(false)}\r\n                                        >\r\n                                            Cancel\r\n                                        </Button>\r\n                                        <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                            {loading ? \"Adding...\" : \"Add Card\"}\r\n                                        </Button>\r\n                                    </div>\r\n                                </form>\r\n                            </DialogContent>\r\n                        </Dialog>\r\n\r\n                        <Dialog open={editOpen} onOpenChange={setEditOpen}>\r\n                            <DialogContent>\r\n                                <DialogHeader>\r\n                                    <DialogTitle>Edit Credit Card</DialogTitle>\r\n                                    <DialogDescription>\r\n                                        Update your credit card details\r\n                                    </DialogDescription>\r\n                                </DialogHeader>\r\n                                {selectedCard && (\r\n                                    <form onSubmit={handleEditSubmit} className=\"space-y-4\">\r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"edit-name\">Card Name</Label>\r\n                                            <Input\r\n                                                id=\"edit-name\"\r\n                                                name=\"name\"\r\n                                                defaultValue={selectedCard.name}\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"edit-limit\">Credit Limit (optional)</Label>\n                                            <Input\n                                                id=\"edit-limit\"\n                                                name=\"limit\"\n                                                type=\"number\"\n                                                step=\"0.01\"\n                                                defaultValue={selectedCard.limit || \"\"}\n                                                placeholder=\"5000.00\"\n                                            />\n                                        </div>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            <div className=\"space-y-2\">\n                                                <Label htmlFor=\"edit-statementDay\">Statement Day</Label>\n                                                <Input\n                                                    id=\"edit-statementDay\"\n                                                    name=\"statementDay\"\n                                                    type=\"number\"\n                                                    min=\"1\"\n                                                    max=\"31\"\n                                                    defaultValue={selectedCard.statementDay || \"\"}\n                                                    required\n                                                />\n                                            </div>\n                                            <div className=\"space-y-2\">\n                                                <Label htmlFor=\"edit-dueDay\">Payment Due Day</Label>\n                                                <Input\n                                                    id=\"edit-dueDay\"\n                                                    name=\"dueDay\"\n                                                    type=\"number\"\n                                                    min=\"1\"\n                                                    max=\"31\"\n                                                    defaultValue={selectedCard.dueDay || \"\"}\n                                                    required\n                                                />\n                                            </div>\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"edit-lastFour\">Last 4 Digits (optional)</Label>\n                                            <Input\n                                                id=\"edit-lastFour\"\n                                                name=\"lastFour\"\r\n                                                defaultValue={selectedCard.lastFour || \"\"}\r\n                                                placeholder=\"1234\"\r\n                                                maxLength={4}\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"space-y-2\">\r\n                                            <Label>Color</Label>\r\n                                            <div className=\"flex flex-wrap gap-2\">\r\n                                                {colors.map((color) => (\r\n                                                    <button\r\n                                                        key={color}\r\n                                                        type=\"button\"\r\n                                                        className={`h-8 w-8 rounded-full transition-transform ${selectedColor === color\r\n                                                            ? \"ring-2 ring-offset-2 ring-offset-background scale-110\"\r\n                                                            : \"\"\r\n                                                            }`}\r\n                                                        style={{ backgroundColor: color, [\"--tw-ring-color\" as string]: color } as React.CSSProperties}\r\n                                                        onClick={() => setSelectedColor(color)}\r\n                                                    />\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex gap-2 pt-4\">\r\n                                            <Button\r\n                                                type=\"button\"\r\n                                                variant=\"outline\"\r\n                                                className=\"flex-1\"\r\n                                                onClick={() => setEditOpen(false)}\r\n                                            >\r\n                                                Cancel\r\n                                            </Button>\r\n                                            <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                                {loading ? \"Updating...\" : \"Update Card\"}\r\n                                            </Button>\r\n                                        </div>\r\n                                    </form>\r\n                                )}\r\n                            </DialogContent>\r\n                        </Dialog>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                    {creditCards.map((card) => {\r\n                        const usagePercent = card.limit ? (card.balance / card.limit) * 100 : 0;\r\n                        const isOverLimit = usagePercent > 100;\r\n\r\n                        return (\r\n                            <Card\r\n                                key={card.id}\r\n                                className=\"relative overflow-hidden group transition-all hover:shadow-md border-l-4\"\r\n                                style={{ borderColor: card.color || undefined }}\r\n                            >\r\n                                <div\r\n                                    className=\"absolute inset-0 opacity-5\"\r\n                                    style={{ backgroundColor: card.color || undefined }}\r\n                                />\r\n                                <CardHeader className=\"relative pb-2\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <CreditCard\r\n                                                className=\"h-8 w-8\"\r\n                                                style={{ color: card.color || undefined }}\r\n                                            />\r\n                                            <div>\r\n                                                <CardTitle className=\"text-lg\">{card.name}</CardTitle>\r\n                                                {card.lastFour && (\r\n                                                    <CardDescription>ΓÇóΓÇóΓÇóΓÇó {card.lastFour}</CardDescription>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-8 w-8 text-muted-foreground hover:text-primary\"\r\n                                                onClick={() => {\r\n                                                    setSelectedCard(card);\r\n                                                    setSelectedColor(card.color || colors[4]);\r\n                                                    setEditOpen(true);\r\n                                                }}\r\n                                            >\r\n                                                <Pencil className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-8 w-8 text-muted-foreground hover:text-destructive\"\r\n                                                onClick={() => handleDelete(card.id)}\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                </CardHeader>\r\n                                <CardContent className=\"relative space-y-4\">\r\n                                    <div className=\"flex justify-between items-end\">\r\n                                        <div>\r\n                                            <p className=\"text-xs text-muted-foreground uppercase font-semibold\">Balance</p>\r\n                                            <p className=\"text-2xl font-bold\">{formatCurrency(card.balance)}</p>\r\n                                        </div>\r\n                                        {card.limit && (\r\n                                            <div className=\"text-right\">\r\n                                                <p className=\"text-xs text-muted-foreground uppercase font-semibold\">Limit</p>\r\n                                                <p className=\"font-medium text-muted-foreground\">{formatCurrency(card.limit)}</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {card.limit && (\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <div className=\"flex justify-between text-xs\">\r\n                                                <span className={isOverLimit ? \"text-destructive font-bold\" : \"text-muted-foreground\"}>\r\n                                                    Usage: {usagePercent.toFixed(1)}%\r\n                                                </span>\r\n                                                <span className=\"text-muted-foreground\">\r\n                                                    {formatCurrency(card.limit - card.balance)} available\r\n                                                </span>\r\n                                            </div>\r\n                                            <Progress\r\n                                                value={Math.min(usagePercent, 100)}\r\n                                                className={`h-2 ${isOverLimit ? \"[&>div]:bg-destructive\" : \"\"}`}\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                                </CardContent>\r\n                            </Card>\r\n                        );\r\n                    })}\r\n                </div>\r\n\r\n                <div className=\"mt-8 space-y-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <h2 className=\"text-2xl font-bold tracking-tight\">Installments</h2>\r\n                            <p className=\"text-muted-foreground\">\r\n                                Track fixed-term payments tied to your credit cards\r\n                            </p>\r\n                        </div>\r\n                        <Dialog open={installmentOpen} onOpenChange={setInstallmentOpen}>\r\n                            <DialogTrigger asChild>\r\n                                <Button variant=\"outline\">\r\n                                    <Plus className=\"mr-2 h-4 w-4\" />\r\n                                    Add Installment\r\n                                </Button>\r\n                            </DialogTrigger>\r\n                            <DialogContent>\r\n                                <DialogHeader>\r\n                                    <DialogTitle>Add Installment</DialogTitle>\r\n                                    <DialogDescription>\r\n                                        Track a recurring purchase installment\r\n                                    </DialogDescription>\r\n                                </DialogHeader>\r\n                                <form onSubmit={async (e) => {\r\n                                    e.preventDefault();\r\n                                    setLoading(true);\r\n                                    const formData = new FormData(e.currentTarget);\r\n                                    if (installmentDate) {\r\n                                        formData.set(\"startDate\", installmentDate.toISOString());\r\n                                    }\r\n                                    const result = await createInstallment(formData);\r\n                                    if (result.error) toast.error(result.error);\r\n                                    else {\r\n                                        toast.success(\"Installment added\");\r\n                                        setInstallmentOpen(false);\r\n                                        setInstallmentDate(new Date());\r\n                                        router.refresh();\r\n                                    }\r\n                                    setLoading(false);\r\n                                }} className=\"space-y-4\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label htmlFor=\"inst-name\">Item Name</Label>\r\n                                        <Input id=\"inst-name\" name=\"name\" placeholder=\"e.g., iPhone 15 IPP\" required />\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"inst-total\">Total Amount</Label>\n                                            <Input id=\"inst-total\" name=\"totalAmount\" type=\"number\" step=\"0.01\" required />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"inst-monthly\">Monthly Payment</Label>\n                                            <Input id=\"inst-monthly\" name=\"monthlyPayment\" type=\"number\" step=\"0.01\" required />\n                                        </div>\n                                    </div>\n                                    <div className=\"grid grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"inst-paid\">Current Balance Payment</Label>\n                                            <Input id=\"inst-paid\" name=\"currentBalancePayment\" type=\"number\" step=\"0.01\" placeholder=\"0.00\" />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"inst-months\">Total Months</Label>\n                                            <Input id=\"inst-months\" name=\"totalMonths\" type=\"number\" required />\n                                        </div>\n                                    </div>\n                                    <div className=\"space-y-2 flex flex-col\">\n                                        <Label className=\"mb-2\">Start Date</Label>\n                                        <DatePicker date={installmentDate} setDate={setInstallmentDate} />\n                                    </div>\n                                    <div className=\"grid grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"inst-card\">Credit Card</Label>\n                                            <Select name=\"creditCardId\" required>\n                                                <SelectTrigger>\n                                                    <SelectValue placeholder=\"Select a card\" />\n                                                </SelectTrigger>\n                                                <SelectContent>\n                                                    {creditCards.map(card => (\n                                                        <SelectItem key={card.id} value={card.id}>{card.name}</SelectItem>\n                                                    ))}\n                                                </SelectContent>\n                                            </Select>\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"inst-category\">Category</Label>\n                                            <Select name=\"categoryId\">\n                                                <SelectTrigger id=\"inst-category\">\n                                                    <SelectValue placeholder=\"Select a category\" />\n                                                </SelectTrigger>\n                                                <SelectContent>\n                                                    {categories.map(cat => (\n                                                        <SelectItem key={cat.id} value={cat.id}>\n                                                            <div className=\"flex items-center gap-2\">\n                                                                <div className=\"h-2 w-2 rounded-full\" style={{ backgroundColor: cat.color || \"#6b7280\" }} />\n                                                                {cat.name}\n                                                            </div>\n                                                        </SelectItem>\n                                                    ))}\n                                                </SelectContent>\n                                            </Select>\n                                        </div>\n                                    </div>\n                                    <div className=\"flex gap-2 pt-4\">\r\n                                        <Button type=\"button\" variant=\"outline\" className=\"flex-1\" onClick={() => setInstallmentOpen(false)}>Cancel</Button>\r\n                                        <Button type=\"submit\" className=\"flex-1\" disabled={loading}>{loading ? \"Adding...\" : \"Add Installment\"}</Button>\r\n                                    </div>\r\n                                </form>\r\n                            </DialogContent>\r\n                        </Dialog>\r\n\r\n                        <Dialog open={editInstallmentOpen} onOpenChange={setEditInstallmentOpen}>\r\n                            <DialogContent>\r\n                                <DialogHeader>\r\n                                    <DialogTitle>Edit Installment</DialogTitle>\r\n                                    <DialogDescription>\r\n                                        Update your installment details\r\n                                    </DialogDescription>\r\n                                </DialogHeader>\r\n                                {selectedInstallment && (\r\n                                    <form onSubmit={async (e) => {\r\n                                        e.preventDefault();\r\n                                        setLoading(true);\r\n                                        const formData = new FormData(e.currentTarget);\r\n                                        const result = await updateInstallment(selectedInstallment.id, formData);\r\n                                        if (result.error) toast.error(result.error);\r\n                                        else {\r\n                                            toast.success(\"Installment updated\");\r\n                                            setEditInstallmentOpen(false);\r\n                                            router.refresh();\r\n                                        }\r\n                                        setLoading(false);\r\n                                    }} className=\"space-y-4\">\r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"edit-inst-name\">Item Name</Label>\r\n                                            <Input id=\"edit-inst-name\" name=\"name\" defaultValue={selectedInstallment.name} required />\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-2 gap-4\">\r\n                                            <div className=\"space-y-2\">\r\n                                                <Label htmlFor=\"edit-inst-total\">Total Amount</Label>\r\n                                                <Input id=\"edit-inst-total\" name=\"totalAmount\" type=\"number\" step=\"0.01\" defaultValue={selectedInstallment.totalAmount} required />\r\n                                            </div>\r\n                                            <div className=\"space-y-2\">\r\n                                                <Label htmlFor=\"edit-inst-monthly\">Monthly Payment</Label>\r\n                                                <Input id=\"edit-inst-monthly\" name=\"monthlyPayment\" type=\"number\" step=\"0.01\" defaultValue={selectedInstallment.monthlyPayment} required />\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-2 gap-4\">\r\n                                            <div className=\"space-y-2\">\r\n                                                <Label htmlFor=\"edit-inst-remaining\">Remaining Months</Label>\r\n                                                <Input id=\"edit-inst-remaining\" name=\"remainingMonths\" type=\"number\" defaultValue={selectedInstallment.remainingMonths} required />\r\n                                            </div>\r\n                                            <div className=\"space-y-2 flex flex-col justify-end\">\r\n                                                <Label htmlFor=\"edit-inst-card\" className=\"mb-2\">Credit Card</Label>\r\n                                                <Select name=\"creditCardId\" defaultValue={selectedInstallment.creditCardId}>\r\n                                                    <SelectTrigger id=\"edit-inst-card\">\r\n                                                        <SelectValue />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        {creditCards.map(card => (\r\n                                                            <SelectItem key={card.id} value={card.id}>{card.name}</SelectItem>\r\n                                                        ))}\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"edit-inst-category\">Category</Label>\r\n                                            <Select name=\"categoryId\" defaultValue={selectedInstallment.categoryId || undefined}>\r\n                                                <SelectTrigger id=\"edit-inst-category\">\r\n                                                    <SelectValue placeholder=\"Select a category\" />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    {categories.map(cat => (\r\n                                                        <SelectItem key={cat.id} value={cat.id}>\r\n                                                            <div className=\"flex items-center gap-2\">\r\n                                                                <div className=\"h-2 w-2 rounded-full\" style={{ backgroundColor: cat.color || \"#6b7280\" }} />\r\n                                                                {cat.name}\r\n                                                            </div>\r\n                                                        </SelectItem>\r\n                                                    ))}\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                        </div>\r\n                                        <div className=\"flex gap-2 pt-4\">\r\n                                            <Button type=\"button\" variant=\"outline\" className=\"flex-1\" onClick={() => setEditInstallmentOpen(false)}>Cancel</Button>\r\n                                            <Button type=\"submit\" className=\"flex-1\" disabled={loading}>{loading ? \"Updating...\" : \"Update Installment\"}</Button>\r\n                                        </div>\r\n                                    </form>\r\n                                )}\r\n                            </DialogContent>\r\n                        </Dialog>\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                        {installments.map((inst) => (\r\n                            <Card key={inst.id} className=\"group relative\">\r\n                                <CardHeader className=\"pb-2\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <div className=\"flex gap-2\">\r\n                                            <Badge variant=\"secondary\" className=\"bg-emerald-50 text-emerald-700 hover:bg-emerald-50 border-emerald-100\">\r\n                                                {inst.creditCard.name}\r\n                                            </Badge>\r\n                                            {inst.category && (\r\n                                                <Badge variant=\"outline\" className=\"flex items-center gap-1.5\">\r\n                                                    <div className=\"h-1.5 w-1.5 rounded-full\" style={{ backgroundColor: inst.category.color || \"#6b7280\" }} />\r\n                                                    {inst.category.name}\r\n                                                </Badge>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"flex gap-1\">\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-8 w-8 text-muted-foreground hover:text-primary opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                                onClick={() => {\r\n                                                    setSelectedInstallment(inst);\r\n                                                    setEditInstallmentOpen(true);\r\n                                                }}\r\n                                            >\r\n                                                <EditPencil className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-8 w-8 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                                onClick={() => {\r\n                                                    setInstToDelete(inst.id);\r\n                                                    setDeleteInstOpen(true);\r\n                                                }}\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                    <CardTitle className=\"text-base mt-2\">{inst.name}</CardTitle>\r\n                                </CardHeader>\r\n                                <CardContent className=\"space-y-4\">\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <div>\r\n                                            <p className=\"text-xs text-muted-foreground uppercase\">Monthly</p>\r\n                                            <p className=\"text-xl font-bold text-emerald-600\">{formatCurrency(inst.monthlyPayment)}</p>\r\n                                        </div>\r\n                                        <Button\r\n                                            size=\"sm\"\r\n                                            className=\"h-8 gap-1\"\r\n                                            variant=\"outline\"\r\n                                            disabled={loading || inst.remainingMonths <= 0}\r\n                                            onClick={async () => {\r\n                                                setLoading(true);\r\n                                                const result = await payInstallment(inst.id);\r\n                                                if (result.error) toast.error(result.error);\r\n                                                else {\r\n                                                    toast.success(\"Payment recorded\");\r\n                                                    router.refresh();\r\n                                                }\r\n                                                setLoading(false);\r\n                                            }}\r\n                                        >\r\n                                            <DollarSign className=\"h-3 w-3\" />\r\n                                            Pay\r\n                                        </Button>\r\n                                    </div>\r\n                                    <div className=\"flex justify-between items-end\">\r\n                                        <div className=\"text-xs text-muted-foreground uppercase\">Remaining</div>\r\n                                        <div className=\"text-right\">\r\n                                            <p className=\"font-semibold\">{inst.remainingMonths} / {inst.totalMonths} months</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <Progress value={((inst.totalMonths - inst.remainingMonths) / inst.totalMonths) * 100} className=\"h-1.5\" />\r\n                                        <div className=\"flex justify-between text-[10px] text-muted-foreground\">\r\n                                            <span>Start: {new Date(inst.startDate).toLocaleDateString()}</span>\r\n                                            <span>Total: {formatCurrency(inst.totalAmount)}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {installments.length === 0 && (\r\n                        <div className=\"rounded-lg border border-dashed p-8 text-center\">\r\n                            <History className=\"mx-auto h-8 w-8 text-muted-foreground/50\" />\r\n                            <p className=\"mt-2 text-sm font-medium\">No installments tracked</p>\r\n                            <p className=\"text-xs text-muted-foreground\">Add installments to track long-term credit card commitments</p>\r\n                        </div>\r\n                    )}\r\n                </div >\r\n\r\n                {\r\n                    creditCards.length === 0 && (\r\n                        <Card>\r\n                            <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                                <CreditCard className=\"h-12 w-12 text-muted-foreground/50\" />\r\n                                <p className=\"mt-4 text-lg font-medium\">No credit cards yet</p>\r\n                                <p className=\"text-muted-foreground\">\r\n                                    Add your first credit card to track spending\r\n                                </p>\r\n                            </CardContent>\r\n                        </Card>\r\n                    )\r\n                }\r\n            </div >\r\n            {/* Delete Card Confirmation */}\r\n            < AlertDialog open={deleteCardOpen} onOpenChange={setDeleteCardOpen} >\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Delete Credit Card?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This will permanently delete this credit card and all its transaction history. This action cannot be undone.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel onClick={() => setCardToDelete(null)}>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={confirmDeleteCard} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog >\r\n\r\n            {/* Delete Installment Confirmation */}\r\n            < AlertDialog open={deleteInstOpen} onOpenChange={setDeleteInstOpen} >\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Delete Installment?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            Are you sure you want to delete this installment? This will not delete past transactions.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel onClick={() => setInstToDelete(null)}>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={async () => {\r\n                            if (instToDelete) {\r\n                                await deleteInstallment(instToDelete);\r\n                                setDeleteInstOpen(false);\r\n                                setInstToDelete(null);\r\n                                router.refresh();\r\n                            }\r\n                        }} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog >\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\data-management.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":51,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":74,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":94,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport {\r\n    Download,\r\n    Upload,\r\n    Trash2,\r\n    AlertTriangle,\r\n    Loader2,\r\n    FileJson\r\n} from \"lucide-react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n    AlertDialogTrigger,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { toast } from \"sonner\";\r\nimport { exportUserData, importUserData, clearAllUserData } from \"@/actions/data-management\";\r\n\r\nexport function DataManagement() {\r\n    const [loading, setLoading] = useState<string | null>(null);\r\n\r\n    const handleExport = async () => {\r\n        setLoading(\"export\");\r\n        try {\r\n            const data = await exportUserData();\r\n            const blob = new Blob([JSON.stringify(data, null, 2)], { type: \"application/json\" });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement(\"a\");\r\n            a.href = url;\r\n            a.download = `coin-tracker-export-${new Date().toISOString().split('T')[0]}.json`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n            URL.revokeObjectURL(url);\r\n            toast.success(\"Data exported successfully\");\r\n        } catch (error) {\r\n            toast.error(\"Failed to export data\");\r\n        } finally {\r\n            setLoading(null);\r\n        }\r\n    };\r\n\r\n    const handleImport = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        setLoading(\"import\");\r\n        const reader = new FileReader();\r\n        reader.onload = async (event) => {\r\n            try {\r\n                const json = JSON.parse(event.target?.result as string);\r\n                const result = await importUserData(json);\r\n                if (result.error) {\r\n                    toast.error(result.error);\r\n                } else {\r\n                    toast.success(\"Data imported successfully\");\r\n                    window.location.reload();\r\n                }\r\n            } catch (error) {\r\n                toast.error(\"Invalid JSON file\");\r\n            } finally {\r\n                setLoading(null);\r\n                e.target.value = \"\";\r\n            }\r\n        };\r\n        reader.readAsText(file);\r\n    };\r\n\r\n    const handleClear = async () => {\r\n        setLoading(\"clear\");\r\n        try {\r\n            const result = await clearAllUserData();\r\n            if (result.error) {\r\n                toast.error(result.error);\r\n            } else {\r\n                toast.success(\"All data cleared\");\r\n                window.location.reload();\r\n            }\r\n        } catch (error) {\r\n            toast.error(\"Failed to clear data\");\r\n        } finally {\r\n            setLoading(null);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"grid gap-6 md:grid-cols-3\">\r\n            <Card className=\"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20 shadow-sm\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                        <Download className=\"h-5 w-5 text-blue-500\" />\r\n                        Export Data\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                        Download a backup of all your financial data in JSON format.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        className=\"w-full border-blue-200 hover:bg-blue-50 dark:border-blue-800 dark:hover:bg-blue-950\"\r\n                        onClick={handleExport}\r\n                        disabled={!!loading}\r\n                    >\r\n                        {loading === \"export\" ? (\r\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                        ) : (\r\n                            <FileJson className=\"mr-2 h-4 w-4\" />\r\n                        )}\r\n                        Export to JSON\r\n                    </Button>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Card className=\"bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border-emerald-500/20 shadow-sm\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                        <Upload className=\"h-5 w-5 text-emerald-500\" />\r\n                        Import Data\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                        Restore your data from a previous export. This will overwrite current data.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <label className=\"cursor-pointer\">\r\n                        <div className={`\r\n                            flex items-center justify-center gap-2 w-full h-10 px-4 py-2 \r\n                            text-sm font-medium transition-colors rounded-md border\r\n                            border-emerald-200 hover:bg-emerald-50 \r\n                            dark:border-emerald-800 dark:hover:bg-emerald-950\r\n                            ${loading ? \"opacity-50 cursor-not-allowed\" : \"cursor-pointer\"}\r\n                        `}>\r\n                            {loading === \"import\" ? (\r\n                                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                            ) : (\r\n                                <Upload className=\"mr-2 h-4 w-4\" />\r\n                            )}\r\n                            Select File\r\n                        </div>\r\n                        <input\r\n                            type=\"file\"\r\n                            accept=\".json\"\r\n                            className=\"hidden\"\r\n                            onChange={handleImport}\r\n                            disabled={!!loading}\r\n                        />\r\n                    </label>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Card className=\"bg-gradient-to-br from-rose-500/10 to-rose-600/5 border-rose-500/20 shadow-sm\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2 text-rose-600 dark:text-rose-400\">\r\n                        <Trash2 className=\"h-5 w-5\" />\r\n                        Danger Zone\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                        Permanently delete all your financial records. This cannot be undone.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <AlertDialog>\r\n                        <AlertDialogTrigger asChild>\r\n                            <Button\r\n                                variant=\"destructive\"\r\n                                className=\"w-full bg-rose-500 hover:bg-rose-600\"\r\n                                disabled={!!loading}\r\n                            >\r\n                                <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                                Clear All Data\r\n                            </Button>\r\n                        </AlertDialogTrigger>\r\n                        <AlertDialogContent>\r\n                            <AlertDialogHeader>\r\n                                <AlertDialogTitle className=\"flex items-center gap-2 text-rose-600\">\r\n                                    <AlertTriangle className=\"h-5 w-5\" />\r\n                                    Extreme Caution\r\n                                </AlertDialogTitle>\r\n                                <AlertDialogDescription>\r\n                                    This action will permanently delete all your accounts, transactions,\r\n                                    budgets, loans, and categories. This data cannot be recovered.\r\n                                </AlertDialogDescription>\r\n                            </AlertDialogHeader>\r\n                            <AlertDialogFooter>\r\n                                <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                                <AlertDialogAction\r\n                                    onClick={handleClear}\r\n                                    className=\"bg-rose-500 hover:bg-rose-600 text-white\"\r\n                                >\r\n                                    Yes, Clear All My Data\r\n                                </AlertDialogAction>\r\n                            </AlertDialogFooter>\r\n                        </AlertDialogContent>\r\n                    </AlertDialog>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\edit-transaction-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":29,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[34,45],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[780,783],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[780,783],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ArrowLeft, CreditCard, DollarSign, Landmark } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { DatePicker } from \"@/components/ui/date-picker\";\r\nimport { updateTransaction } from \"@/actions/transactions\";\r\nimport { toast } from \"sonner\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\n\r\ninterface EditTransactionFormProps {\r\n    transaction: any;\r\n    categories: { id: string; name: string; color: string | null }[];\r\n    creditCards: { id: string; name: string }[];\r\n    incomeSources: { id: string; name: string }[];\r\n    bankAccounts: { id: string; name: string; type: string }[];\r\n    loans: { id: string; name: string }[];\r\n    onSuccess: () => void;\r\n    onCancel: () => void;\r\n}\r\n\r\nexport function EditTransactionForm({\r\n    transaction,\r\n    categories,\r\n    creditCards,\r\n    incomeSources,\r\n    bankAccounts,\r\n    loans,\r\n    onSuccess,\r\n    onCancel,\r\n}: EditTransactionFormProps) {\r\n    const [type, setType] = useState<\"expense\" | \"income\">(transaction.type);\r\n    const [isLoanPayment, setIsLoanPayment] = useState(!!transaction.loanId);\r\n    const [isCCPayment, setIsCCPayment] = useState(!!transaction.creditCardId && !!transaction.bankAccountId);\r\n    const [paymentSource, setPaymentSource] = useState(\r\n        transaction.bankAccountId ? `bank:${transaction.bankAccountId}` :\r\n            transaction.creditCardId ? `card:${transaction.creditCardId}` : \"\"\r\n    );\r\n    const [loading, setLoading] = useState(false);\r\n    const [date, setDate] = useState<Date | undefined>(new Date(transaction.date));\r\n    const router = useRouter();\r\n\r\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        formData.set(\"type\", type);\r\n        if (date) {\r\n            formData.set(\"date\", `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`);\r\n        }\r\n\r\n        // Handle consolidated payment source for expenses\r\n        if (type === \"expense\") {\r\n            const source = formData.get(\"paymentSource\") as string;\r\n            if (source) {\r\n                const [sourceType, id] = source.split(\":\");\r\n                if (sourceType === \"bank\") {\r\n                    formData.set(\"bankAccountId\", id);\r\n                    if (isCCPayment) {\r\n                        formData.set(\"creditCardId\", formData.get(\"targetCreditCardId\") as string);\r\n                    } else {\r\n                        formData.delete(\"creditCardId\");\r\n                    }\r\n                } else if (sourceType === \"card\") {\r\n                    formData.set(\"creditCardId\", id);\r\n                    formData.delete(\"bankAccountId\");\r\n                }\r\n            }\r\n        } else {\r\n            // Clear expense-only fields for income\r\n            formData.delete(\"categoryId\");\r\n            formData.delete(\"creditCardId\");\r\n            formData.delete(\"loanId\");\r\n        }\r\n\r\n        const result = await updateTransaction(transaction.id, formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Transaction updated successfully\");\r\n            onSuccess();\r\n            router.refresh();\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {/* Transaction Type */}\r\n            <div className=\"flex gap-2\">\r\n                <Button\r\n                    type=\"button\"\r\n                    variant={type === \"expense\" ? \"default\" : \"outline\"}\r\n                    className={`flex-1 ${type === \"expense\" ? \"bg-red-500 hover:bg-red-600\" : \"\"}`}\r\n                    onClick={() => setType(\"expense\")}\r\n                >\r\n                    <ArrowLeft className=\"mr-2 h-4 w-4 rotate-[-45deg]\" />\r\n                    Expense\r\n                </Button>\r\n                <Button\r\n                    type=\"button\"\r\n                    variant={type === \"income\" ? \"default\" : \"outline\"}\r\n                    className={`flex-1 ${type === \"income\" ? \"bg-emerald-500 hover:bg-emerald-600\" : \"\"}`}\r\n                    onClick={() => {\r\n                        setType(\"income\");\r\n                        setIsCCPayment(false);\r\n                        setIsLoanPayment(false);\r\n                    }}\r\n                >\r\n                    <ArrowLeft className=\"mr-2 h-4 w-4 rotate-[135deg]\" />\r\n                    Income\r\n                </Button>\r\n            </div>\r\n\r\n            {/* Amount */}\r\n            <div className=\"space-y-2\">\r\n                <Label htmlFor=\"amount\">Amount</Label>\r\n                <div className=\"relative\">\r\n                    <DollarSign className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                    <Input\r\n                        id=\"amount\"\r\n                        name=\"amount\"\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        min=\"0\"\r\n                        defaultValue={transaction.amount}\r\n                        className=\"pl-9\"\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Date */}\r\n            <div className=\"space-y-2\">\r\n                <Label>Date</Label>\r\n                <DatePicker date={date} setDate={setDate} />\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div className=\"space-y-2\">\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Input\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    defaultValue={transaction.description || \"\"}\r\n                    placeholder=\"What was this for?\"\r\n                />\r\n            </div>\r\n\r\n            {/* Income specific fields */}\r\n            {type === \"income\" && (\r\n                <>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"bankAccountId\">Destination Account</Label>\r\n                        <Select name=\"bankAccountId\" defaultValue={transaction.bankAccountId || undefined}>\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"Where is the money going?\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                {bankAccounts.map((account) => (\r\n                                    <SelectItem key={account.id} value={account.id}>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <Landmark className=\"h-4 w-4 text-muted-foreground\" />\r\n                                            {account.name}\r\n                                        </div>\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"incomeSourceId\">Income Source</Label>\r\n                        <Select name=\"incomeSourceId\" defaultValue={transaction.incomeSourceId || undefined}>\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"Where is the money from?\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                {incomeSources.map((source) => (\r\n                                    <SelectItem key={source.id} value={source.id}>\r\n                                        {source.name}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            {/* Expense specific fields */}\r\n            {type === \"expense\" && (\r\n                <>\r\n                    <div className=\"grid gap-4 md:grid-cols-2\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"categoryId\">Category</Label>\r\n                            <Select name=\"categoryId\" defaultValue={transaction.categoryId || undefined}>\r\n                                <SelectTrigger>\r\n                                    <SelectValue placeholder=\"Select a category\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {categories.map((cat) => (\r\n                                        <SelectItem key={cat.id} value={cat.id}>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div\r\n                                                    className=\"h-3 w-3 rounded-full\"\r\n                                                    style={{ backgroundColor: cat.color || \"#6b7280\" }}\r\n                                                />\r\n                                                {cat.name}\r\n                                            </div>\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"paymentSource\">Source of Funds</Label>\r\n                            <Select name=\"paymentSource\" defaultValue={paymentSource} onValueChange={(val) => {\r\n                                setPaymentSource(val);\r\n                                if (!val.startsWith(\"bank:\")) setIsCCPayment(false);\r\n                            }}>\r\n                                <SelectTrigger>\r\n                                    <SelectValue placeholder=\"How did you pay?\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {bankAccounts.length > 0 && (\r\n                                        <>\r\n                                            <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground\">\r\n                                                Accounts & Wallets\r\n                                            </div>\r\n                                            {bankAccounts.map((account) => (\r\n                                                <SelectItem key={account.id} value={`bank:${account.id}`}>\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <Landmark className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                        {account.name}\r\n                                                    </div>\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </>\r\n                                    )}\r\n                                    {creditCards.length > 0 && (\r\n                                        <>\r\n                                            <Separator className=\"my-1\" />\r\n                                            <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground\">\r\n                                                Credit Cards\r\n                                            </div>\r\n                                            {creditCards.map((card) => (\r\n                                                <SelectItem key={card.id} value={`card:${card.id}`}>\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <CreditCard className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                        {card.name}\r\n                                                    </div>\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </>\r\n                                    )}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {paymentSource.startsWith(\"bank:\") && (\r\n                        <div className=\"space-y-4 border-t pt-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div className=\"space-y-0.5\">\r\n                                    <Label>Credit Card Payment</Label>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Is this a payment towards a credit card?\r\n                                    </p>\r\n                                </div>\r\n                                <Switch\r\n                                    checked={isCCPayment}\r\n                                    onCheckedChange={(checked) => {\r\n                                        setIsCCPayment(checked);\r\n                                        if (checked) setIsLoanPayment(false);\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            {isCCPayment && (\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"targetCreditCardId\">Select Credit Card</Label>\r\n                                    <Select name=\"targetCreditCardId\" defaultValue={transaction.creditCardId || undefined} required={isCCPayment}>\r\n                                        <SelectTrigger>\r\n                                            <SelectValue placeholder=\"Which card are you paying?\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {creditCards.map((card) => (\r\n                                                <SelectItem key={card.id} value={card.id}>\r\n                                                    {card.name}\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"space-y-4 border-t pt-4\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"space-y-0.5\">\r\n                                <Label>Loan Payment</Label>\r\n                                <p className=\"text-sm text-muted-foreground\">\r\n                                    Is this expense a payment for a loan?\r\n                                </p>\r\n                            </div>\r\n                            <Switch\r\n                                checked={isLoanPayment}\r\n                                onCheckedChange={(checked) => {\r\n                                    setIsLoanPayment(checked);\r\n                                    if (checked) setIsCCPayment(false);\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        {isLoanPayment && (\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"loanId\">Select Loan</Label>\r\n                                <Select name=\"loanId\" defaultValue={transaction.loanId || undefined} required={isLoanPayment}>\r\n                                    <SelectTrigger>\r\n                                        <SelectValue placeholder=\"Which loan is this for?\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {loans.map((loan) => (\r\n                                            <SelectItem key={loan.id} value={loan.id}>\r\n                                                {loan.name}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            {/* Notes */}\r\n            <div className=\"space-y-2\">\r\n                <Label htmlFor=\"notes\">Notes (optional)</Label>\r\n                <Input\r\n                    id=\"notes\"\r\n                    name=\"notes\"\r\n                    defaultValue={transaction.notes || \"\"}\r\n                    placeholder=\"Any additional notes...\"\r\n                />\r\n            </div>\r\n\r\n            {/* Submit */}\r\n            <div className=\"flex gap-2 pt-4\">\r\n                <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    className=\"flex-1\"\r\n                    onClick={onCancel}\r\n                >\r\n                    Cancel\r\n                </Button>\r\n                <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                    {loading ? \"Updating...\" : \"Update Transaction\"}\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\income-sources-settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Switch' is defined but never used.","line":33,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Switch"},"fix":{"range":[861,909],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":258,"column":119,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[11732,11910],"text":"\r\n                                This will permanently delete this income source. Past transactions will remain but won&apos;t be linked to this source.\r\n                            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[11732,11910],"text":"\r\n                                This will permanently delete this income source. Past transactions will remain but won&lsquo;t be linked to this source.\r\n                            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[11732,11910],"text":"\r\n                                This will permanently delete this income source. Past transactions will remain but won&#39;t be linked to this source.\r\n                            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[11732,11910],"text":"\r\n                                This will permanently delete this income source. Past transactions will remain but won&rsquo;t be linked to this source.\r\n                            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { ArrowLeft, DollarSign, Plus, Trash2, Pencil } from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { createIncomeSource, deleteIncomeSource, updateIncomeSource } from \"@/actions/income-sources\";\r\nimport { toast } from \"sonner\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\ninterface IncomeSourcesSettingsProps {\r\n    incomeSources: {\r\n        id: string;\r\n        name: string;\r\n        type: string;\r\n    }[];\r\n}\r\n\r\nexport function IncomeSourcesSettings({ incomeSources }: IncomeSourcesSettingsProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [editOpen, setEditOpen] = useState(false);\r\n    const [selectedSource, setSelectedSource] = useState<IncomeSourcesSettingsProps[\"incomeSources\"][0] | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\r\n    const [idToDelete, setIdToDelete] = useState<string | null>(null);\r\n    const router = useRouter();\r\n\r\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n\r\n        const result = await createIncomeSource(formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Income source added\");\r\n            setOpen(false);\r\n            router.refresh();\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleEditSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        if (!selectedSource) return;\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        const result = await updateIncomeSource(selectedSource.id, formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Income source updated\");\r\n            setEditOpen(false);\r\n            setSelectedSource(null);\r\n            router.refresh();\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleDelete(id: string) {\r\n        setIdToDelete(id);\r\n        setDeleteConfirmOpen(true);\r\n    }\r\n\r\n    async function confirmDelete() {\r\n        if (!idToDelete) return;\r\n        const result = await deleteIncomeSource(idToDelete);\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Income source deleted\");\r\n            setDeleteConfirmOpen(false);\r\n            setIdToDelete(null);\r\n            router.refresh();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <header className=\"flex h-16 shrink-0 items-center gap-2 border-b\">\r\n                <div className=\"flex items-center gap-2 px-4\">\r\n                    <SidebarTrigger className=\"-ml-1\" />\r\n                    <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\r\n                    <Button variant=\"ghost\" size=\"icon\" asChild>\r\n                        <Link href=\"/settings\">\r\n                            <ArrowLeft className=\"h-4 w-4\" />\r\n                        </Link>\r\n                    </Button>\r\n                    <DollarSign className=\"h-4 w-4\" />\r\n                    <h1 className=\"text-lg font-semibold\">Income Sources</h1>\r\n                </div>\r\n            </header>\r\n            <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold tracking-tight\">Income Sources</h2>\r\n                        <p className=\"text-muted-foreground\">\r\n                            Manage your income streams\r\n                        </p>\r\n                    </div>\r\n                    <Dialog open={open} onOpenChange={setOpen}>\r\n                        <DialogTrigger asChild>\r\n                            <Button>\r\n                                <Plus className=\"mr-2 h-4 w-4\" />\r\n                                Add Income Source\r\n                            </Button>\r\n                        </DialogTrigger>\r\n                        <DialogContent>\r\n                            <DialogHeader>\r\n                                <DialogTitle>Add Income Source</DialogTitle>\r\n                                <DialogDescription>\r\n                                    Add a new source of income to track\r\n                                </DialogDescription>\r\n                            </DialogHeader>\r\n                            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"name\">Name</Label>\r\n                                    <Input\r\n                                        id=\"name\"\r\n                                        name=\"name\"\r\n                                        placeholder=\"e.g., Main Job, Freelance\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"type\">Type</Label>\r\n                                    <Select name=\"type\" required defaultValue=\"salary\">\r\n                                        <SelectTrigger>\r\n                                            <SelectValue placeholder=\"Select type\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"salary\">Salary</SelectItem>\r\n                                            <SelectItem value=\"freelance\">Freelance</SelectItem>\r\n                                            <SelectItem value=\"investment\">Investment</SelectItem>\r\n                                            <SelectItem value=\"gift\">Gift</SelectItem>\r\n                                            <SelectItem value=\"other\">Other</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                                <div className=\"flex gap-2 pt-4\">\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"outline\"\r\n                                        className=\"flex-1\"\r\n                                        onClick={() => setOpen(false)}\r\n                                    >\r\n                                        Cancel\r\n                                    </Button>\r\n                                    <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                        {loading ? \"Adding...\" : \"Add Source\"}\r\n                                    </Button>\r\n                                </div>\r\n                            </form>\r\n                        </DialogContent>\r\n                    </Dialog>\r\n\r\n                    {/* Edit Dialog */}\r\n                    <Dialog open={editOpen} onOpenChange={setEditOpen}>\r\n                        <DialogContent>\r\n                            <DialogHeader>\r\n                                <DialogTitle>Edit Income Source</DialogTitle>\r\n                                <DialogDescription>\r\n                                    Update income source details\r\n                                </DialogDescription>\r\n                            </DialogHeader>\r\n                            {selectedSource && (\r\n                                <form onSubmit={handleEditSubmit} className=\"space-y-4\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label htmlFor=\"edit-name\">Name</Label>\r\n                                        <Input\r\n                                            id=\"edit-name\"\r\n                                            name=\"name\"\r\n                                            defaultValue={selectedSource.name}\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label htmlFor=\"edit-type\">Type</Label>\r\n                                        <Select name=\"type\" required defaultValue={selectedSource.type}>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select type\" />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                <SelectItem value=\"salary\">Salary</SelectItem>\r\n                                                <SelectItem value=\"freelance\">Freelance</SelectItem>\r\n                                                <SelectItem value=\"investment\">Investment</SelectItem>\r\n                                                <SelectItem value=\"gift\">Gift</SelectItem>\r\n                                                <SelectItem value=\"other\">Other</SelectItem>\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n                                    <div className=\"flex gap-2 pt-4\">\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            variant=\"outline\"\r\n                                            className=\"flex-1\"\r\n                                            onClick={() => setEditOpen(false)}\r\n                                        >\r\n                                            Cancel\r\n                                        </Button>\r\n                                        <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                            {loading ? \"Updating...\" : \"Update Source\"}\r\n                                        </Button>\r\n                                    </div>\r\n                                </form>\r\n                            )}\r\n                        </DialogContent>\r\n                    </Dialog>\r\n                </div>\r\n\r\n                <AlertDialog open={deleteConfirmOpen} onOpenChange={setDeleteConfirmOpen}>\r\n                    <AlertDialogContent>\r\n                        <AlertDialogHeader>\r\n                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\r\n                            <AlertDialogDescription>\r\n                                This will permanently delete this income source. Past transactions will remain but won't be linked to this source.\r\n                            </AlertDialogDescription>\r\n                        </AlertDialogHeader>\r\n                        <AlertDialogFooter>\r\n                            <AlertDialogCancel onClick={() => setIdToDelete(null)}>Cancel</AlertDialogCancel>\r\n                            <AlertDialogAction onClick={confirmDelete} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n                                Delete\r\n                            </AlertDialogAction>\r\n                        </AlertDialogFooter>\r\n                    </AlertDialogContent>\r\n                </AlertDialog>\r\n\r\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                    {incomeSources.map((source) => (\r\n                        <Card key={source.id} className=\"group relative\">\r\n                            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                                <CardTitle className=\"text-sm font-medium\">\r\n                                    {source.name}\r\n                                </CardTitle>\r\n                                <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <div className=\"flex items-center justify-between mt-2\">\r\n                                    <Badge variant=\"secondary\" className=\"capitalize\">\r\n                                        {source.type}\r\n                                    </Badge>\r\n                                    <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-muted-foreground hover:text-primary\"\r\n                                            onClick={() => {\r\n                                                setSelectedSource(source);\r\n                                                setEditOpen(true);\r\n                                            }}\r\n                                        >\r\n                                            <Pencil className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-muted-foreground hover:text-destructive\"\r\n                                            onClick={() => handleDelete(source.id)}\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n\r\n                {incomeSources.length === 0 && (\r\n                    <Card>\r\n                        <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                            <DollarSign className=\"h-12 w-12 text-muted-foreground/50\" />\r\n                            <p className=\"mt-4 text-lg font-medium\">No income sources yet</p>\r\n                            <p className=\"text-muted-foreground\">\r\n                                Add your first income source to start tracking\r\n                            </p>\r\n                        </CardContent>\r\n                    </Card>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\loans-dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Switch' is defined but never used.","line":23,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Switch"},"fix":{"range":[572,620],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Plus, CreditCard, Calendar, TrendingDown, Trash2, Pencil } from \"lucide-react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { createLoan, deleteLoan, updateLoan } from \"@/actions/loans\";\r\nimport { toast } from \"sonner\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { formatCurrency } from \"@/lib/utils\";\r\n\r\ninterface LoansDashboardProps {\r\n    loans: {\r\n        id: string;\r\n        name: string;\r\n        totalAmount: number;\r\n        remainingAmount: number;\r\n        interestRate: number;\r\n        monthlyPayment: number | null;\r\n        dueDate: number | null;\r\n    }[];\r\n}\r\n\r\nexport function LoansDashboard({ loans }: LoansDashboardProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [editOpen, setEditOpen] = useState(false);\r\n    const [selectedLoan, setSelectedLoan] = useState<LoansDashboardProps[\"loans\"][0] | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\r\n    const [idToDelete, setIdToDelete] = useState<string | null>(null);\r\n\r\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        const result = await createLoan(formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Loan added\");\r\n            setOpen(false);\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleEditSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        if (!selectedLoan) return;\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        const result = await updateLoan(selectedLoan.id, formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Loan updated\");\r\n            setEditOpen(false);\r\n            setSelectedLoan(null);\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleDelete(id: string) {\r\n        setIdToDelete(id);\r\n        setDeleteConfirmOpen(true);\r\n    }\r\n\r\n    async function confirmDelete() {\r\n        if (!idToDelete) return;\r\n        const result = await deleteLoan(idToDelete);\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Loan deleted\");\r\n            setDeleteConfirmOpen(false);\r\n            setIdToDelete(null);\r\n        }\r\n    }\r\n\r\n    const totalDebt = loans.reduce((sum, loan) => sum + Number(loan.remainingAmount), 0);\r\n    const totalMonthlyPayment = loans.reduce((sum, loan) => sum + (Number(loan.monthlyPayment) || 0), 0);\r\n\r\n    return (\r\n        <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold tracking-tight\">Loans & Liablities</h2>\r\n                    <p className=\"text-muted-foreground\">\r\n                        Manage your debts and payment schedules\r\n                    </p>\r\n                </div>\r\n                <Dialog open={open} onOpenChange={setOpen}>\r\n                    <DialogTrigger asChild>\r\n                        <Button variant=\"destructive\">\r\n                            <Plus className=\"mr-2 h-4 w-4\" />\r\n                            Add Loan\r\n                        </Button>\r\n                    </DialogTrigger>\r\n                    <DialogContent>\r\n                        <DialogHeader>\r\n                            <DialogTitle>Add Loan</DialogTitle>\r\n                            <DialogDescription>\r\n                                Track a new loan or debt\r\n                            </DialogDescription>\r\n                        </DialogHeader>\r\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"name\">Loan Name</Label>\r\n                                <Input id=\"name\" name=\"name\" placeholder=\"e.g., Car Loan, Mortgage\" required />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"totalAmount\">Original Amount</Label>\r\n                                <Input id=\"totalAmount\" name=\"totalAmount\" type=\"number\" step=\"0.01\" min=\"0\" placeholder=\"0.00\" required />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"remainingAmount\">Remaining Balance</Label>\r\n                                <Input id=\"remainingAmount\" name=\"remainingAmount\" type=\"number\" step=\"0.01\" min=\"0\" placeholder=\"Leave empty if same as Original\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"interestRate\">Interest Rate (Annual %)</Label>\r\n                                <Input id=\"interestRate\" name=\"interestRate\" type=\"number\" step=\"0.01\" min=\"0\" placeholder=\"e.g. 3.5\" required />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"monthlyPayment\">Monthly Payment</Label>\r\n                                <Input id=\"monthlyPayment\" name=\"monthlyPayment\" type=\"number\" step=\"0.01\" min=\"0\" placeholder=\"0.00\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"dueDate\">Due Date (Day of Month)</Label>\r\n                                <Input id=\"dueDate\" name=\"dueDate\" type=\"number\" min=\"1\" max=\"31\" placeholder=\"e.g. 15\" />\r\n                            </div>\r\n                            <div className=\"flex gap-2 pt-4\">\r\n                                <Button type=\"submit\" variant=\"destructive\" className=\"flex-1\" disabled={loading}>\r\n                                    {loading ? \"Adding...\" : \"Add Loan\"}\r\n                                </Button>\r\n                            </div>\r\n                        </form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n\r\n                {/* Edit Dialog */}\r\n                <Dialog open={editOpen} onOpenChange={setEditOpen}>\r\n                    <DialogContent>\r\n                        <DialogHeader>\r\n                            <DialogTitle>Edit Loan</DialogTitle>\r\n                            <DialogDescription>\r\n                                Update loan details\r\n                            </DialogDescription>\r\n                        </DialogHeader>\r\n                        {selectedLoan && (\r\n                            <form onSubmit={handleEditSubmit} className=\"space-y-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-name\">Loan Name</Label>\r\n                                    <Input id=\"edit-name\" name=\"name\" defaultValue={selectedLoan.name} required />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-totalAmount\">Original Amount</Label>\r\n                                    <Input id=\"edit-totalAmount\" name=\"totalAmount\" type=\"number\" step=\"0.01\" min=\"0\" defaultValue={selectedLoan.totalAmount} required />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-remainingAmount\">Remaining Balance</Label>\r\n                                    <Input id=\"edit-remainingAmount\" name=\"remainingAmount\" type=\"number\" step=\"0.01\" min=\"0\" defaultValue={selectedLoan.remainingAmount} required />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-interestRate\">Interest Rate (Annual %)</Label>\r\n                                    <Input id=\"edit-interestRate\" name=\"interestRate\" type=\"number\" step=\"0.01\" min=\"0\" defaultValue={selectedLoan.interestRate} required />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-monthlyPayment\">Monthly Payment</Label>\r\n                                    <Input id=\"edit-monthlyPayment\" name=\"monthlyPayment\" type=\"number\" step=\"0.01\" min=\"0\" defaultValue={selectedLoan.monthlyPayment ?? \"\"} />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"edit-dueDate\">Due Date (Day of Month)</Label>\r\n                                    <Input id=\"edit-dueDate\" name=\"dueDate\" type=\"number\" min=\"1\" max=\"31\" defaultValue={selectedLoan.dueDate ?? \"\"} />\r\n                                </div>\r\n                                <div className=\"flex gap-2 pt-4\">\r\n                                    <Button type=\"button\" variant=\"outline\" className=\"flex-1\" onClick={() => setEditOpen(false)}>\r\n                                        Cancel\r\n                                    </Button>\r\n                                    <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                        {loading ? \"Updating...\" : \"Update Loan\"}\r\n                                    </Button>\r\n                                </div>\r\n                            </form>\r\n                        )}\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n            <div className=\"grid gap-6 md:grid-cols-2\">\r\n                <Card className=\"bg-gradient-to-br from-rose-500/10 via-pink-500/5 to-transparent border-rose-500/20 shadow-sm relative overflow-hidden group hover:shadow-md transition-all\">\r\n                    <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-rose-500/10 to-transparent -mr-12 -mt-12 rounded-full transition-transform group-hover:scale-110\" />\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-semibold uppercase tracking-wider text-muted-foreground\">Total Debt</CardTitle>\r\n                        <div className=\"bg-rose-500/20 p-2 rounded-lg z-10\">\r\n                            <TrendingDown className=\"h-4 w-4 text-rose-600 dark:text-rose-400\" />\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent className=\"relative z-10\">\r\n                        <div className=\"text-3xl font-extrabold tracking-tight text-rose-600 dark:text-rose-400\">\r\n                            {formatCurrency(totalDebt)}\r\n                        </div>\r\n                        <p className=\"text-[10px] font-bold text-muted-foreground uppercase mt-1 tracking-widest\">Calculated current balances</p>\r\n                    </CardContent>\r\n                </Card>\r\n                <Card className=\"bg-gradient-to-br from-slate-500/10 via-slate-500/5 to-transparent border-slate-500/20 shadow-sm relative overflow-hidden group hover:shadow-md transition-all\">\r\n                    <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-slate-500/10 to-transparent -mr-12 -mt-12 rounded-full transition-transform group-hover:scale-110\" />\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-semibold uppercase tracking-wider text-muted-foreground\">Total Monthly Payments</CardTitle>\r\n                        <div className=\"bg-slate-500/20 p-2 rounded-lg z-10\">\r\n                            <Calendar className=\"h-4 w-4 text-slate-600 dark:text-slate-400\" />\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent className=\"relative z-10\">\r\n                        <div className=\"text-3xl font-extrabold tracking-tight\">\r\n                            {formatCurrency(totalMonthlyPayment)}\r\n                        </div>\r\n                        <p className=\"text-[10px] font-bold text-muted-foreground uppercase mt-1 tracking-widest\">Combined monthly obligation</p>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            <AlertDialog open={deleteConfirmOpen} onOpenChange={setDeleteConfirmOpen}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This will permanently delete this loan record and all associated history.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel onClick={() => setIdToDelete(null)}>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={confirmDelete} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n\r\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n                {loans.map((loan) => {\r\n                    const progress = (Number(loan.remainingAmount) / Number(loan.totalAmount)) * 100;\r\n                    const paidPercentage = 100 - progress;\r\n\r\n                    return (\r\n                        <Card key={loan.id} className=\"relative overflow-hidden group transition-all hover:shadow-md hover:border-rose-500/30\">\r\n                            <div className=\"absolute top-0 left-0 w-1.5 h-full bg-gradient-to-b from-rose-500 to-rose-600\" />\r\n                            <CardHeader className=\"pb-2\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex flex-col\">\r\n                                        <CardTitle className=\"text-base font-bold uppercase tracking-tight\">{loan.name}</CardTitle>\r\n                                        <CardDescription className=\"text-xs font-semibold text-rose-600 dark:text-rose-400\">{Number(loan.interestRate)}% ANNUAL INTEREST</CardDescription>\r\n                                    </div>\r\n                                    <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10\">\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-muted-foreground hover:text-primary hover:bg-primary/10\"\r\n                                            onClick={() => {\r\n                                                setSelectedLoan(loan);\r\n                                                setEditOpen(true);\r\n                                            }}\r\n                                        >\r\n                                            <Pencil className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10\"\r\n                                            onClick={() => handleDelete(loan.id)}\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </CardHeader>\r\n                            <CardContent className=\"relative\">\r\n                                <div className=\"text-3xl font-extrabold mb-1 tracking-tighter\">{formatCurrency(Number(loan.remainingAmount))}</div>\r\n                                <div className=\"space-y-3 mb-6\">\r\n                                    <div className=\"flex justify-between text-[10px] font-bold uppercase tracking-widest text-muted-foreground\">\r\n                                        <span>Paid: {paidPercentage.toFixed(0)}%</span>\r\n                                        <span>Total: {formatCurrency(Number(loan.totalAmount))}</span>\r\n                                    </div>\r\n                                    <Progress value={paidPercentage} className=\"h-2 bg-rose-100 dark:bg-rose-950/20 [&>div]:bg-rose-500\" />\r\n                                    {Number(loan.monthlyPayment) > 0 && Number(loan.remainingAmount) > 0 && (\r\n                                        <div className=\"text-[10px] font-bold text-rose-600 dark:text-rose-400 mt-1 text-right bg-rose-500/5 py-1 px-2 rounded w-fit ml-auto\">\r\n                                            EST. {Math.ceil(Number(loan.remainingAmount) / Number(loan.monthlyPayment))} MONTHS REMAINING\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"flex items-center justify-between text-xs font-bold text-muted-foreground pt-4 border-t border-slate-100 dark:border-slate-800\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"p-1.5 bg-slate-100 dark:bg-slate-900 rounded\">\r\n                                            <CreditCard className=\"h-3 w-3\" />\r\n                                        </div>\r\n                                        <span className=\"uppercase tracking-tight\">{formatCurrency(Number(loan.monthlyPayment || 0))}/MO</span>\r\n                                    </div>\r\n                                    {loan.dueDate && (\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <div className=\"p-1.5 bg-slate-100 dark:bg-slate-900 rounded\">\r\n                                                <Calendar className=\"h-3 w-3\" />\r\n                                            </div>\r\n                                            <span className=\"uppercase tracking-tight\">DUE: {loan.dueDate}TH</span>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\login-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loginUser' is defined but never used.","line":22,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"loginUser"},"fix":{"range":[470,481],"text":""},"desc":"Remove unused variable \"loginUser\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  Field,\n  FieldDescription,\n  FieldGroup,\n  FieldLabel,\n  FieldSeparator,\n} from \"@/components/ui/field\";\nimport { Input } from \"@/components/ui/input\";\nimport { registerUser, loginUser } from \"@/actions/auth\";\nimport { signIn } from \"next-auth/react\";\n\nexport function LoginForm({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  const [isRegister, setIsRegister] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const router = useRouter();\n\n  async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    const formData = new FormData(e.currentTarget);\n\n    if (isRegister) {\n      const result = await registerUser(formData);\n      if (result.error) {\n        setError(result.error);\n        setLoading(false);\n        return;\n      }\n      // Auto login after register\n      const loginResult = await signIn(\"credentials\", {\n        email: formData.get(\"email\"),\n        password: formData.get(\"password\"),\n        redirect: false,\n      });\n      if (loginResult?.error) {\n        setError(\"Registration successful. Please log in.\");\n        setIsRegister(false);\n      } else {\n        router.push(\"/\");\n        router.refresh();\n      }\n    } else {\n      const result = await signIn(\"credentials\", {\n        email: formData.get(\"email\"),\n        password: formData.get(\"password\"),\n        redirect: false,\n      });\n      if (result?.error) {\n        setError(\"Invalid email or password\");\n      } else {\n        router.push(\"/\");\n        router.refresh();\n      }\n    }\n    setLoading(false);\n  }\n\n  async function handleGoogleSignIn() {\n    await signIn(\"google\", { callbackUrl: \"/\" });\n  }\n\n  return (\n    <div className={cn(\"flex flex-col gap-6\", className)} {...props}>\n      <Card>\n        <CardHeader className=\"text-center\">\n          <CardTitle className=\"text-xl\">\n            {isRegister ? \"Create an account\" : \"Welcome back\"}\n          </CardTitle>\n          <CardDescription>\n            {isRegister\n              ? \"Enter your details to get started\"\n              : \"Sign in to your financial tracker\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit}>\n            <FieldGroup>\n              <Field>\n                <Button\n                  variant=\"outline\"\n                  type=\"button\"\n                  onClick={handleGoogleSignIn}\n                  className=\"w-full\"\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                    <path\n                      d=\"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z\"\n                      fill=\"currentColor\"\n                    />\n                  </svg>\n                  Continue with Google\n                </Button>\n              </Field>\n              <FieldSeparator className=\"*:data-[slot=field-separator-content]:bg-card\">\n                Or continue with email\n              </FieldSeparator>\n              {isRegister && (\n                <Field>\n                  <FieldLabel htmlFor=\"name\">Name</FieldLabel>\n                  <Input\n                    id=\"name\"\n                    name=\"name\"\n                    type=\"text\"\n                    placeholder=\"John Doe\"\n                    required\n                  />\n                </Field>\n              )}\n              <Field>\n                <FieldLabel htmlFor=\"email\">Email</FieldLabel>\n                <Input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  placeholder=\"you@example.com\"\n                  required\n                />\n              </Field>\n              <Field>\n                <FieldLabel htmlFor=\"password\">Password</FieldLabel>\n                <Input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  required\n                  minLength={6}\n                />\n              </Field>\n              {error && (\n                <p className=\"text-sm text-destructive text-center\">{error}</p>\n              )}\n              <Field>\n                <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n                  {loading\n                    ? \"Loading...\"\n                    : isRegister\n                      ? \"Create Account\"\n                      : \"Sign In\"}\n                </Button>\n                <FieldDescription className=\"text-center\">\n                  {isRegister ? (\n                    <>\n                      Already have an account?{\" \"}\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsRegister(false)}\n                        className=\"underline underline-offset-4 hover:text-primary\"\n                      >\n                        Sign in\n                      </button>\n                    </>\n                  ) : (\n                    <>\n                      Don&apos;t have an account?{\" \"}\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsRegister(true)}\n                        className=\"underline underline-offset-4 hover:text-primary\"\n                      >\n                        Sign up\n                      </button>\n                    </>\n                  )}\n                </FieldDescription>\n              </Field>\n            </FieldGroup>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\monthly-breakdown-chart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatCurrency' is defined but never used.","line":22,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":24,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"formatCurrency"},"fix":{"range":[443,487],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { TrendingUp } from \"lucide-react\"\r\nimport { Area, AreaChart, CartesianGrid, XAxis } from \"recharts\"\r\n\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardFooter,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\"\r\nimport {\r\n    ChartContainer,\r\n    ChartLegend,\r\n    ChartLegendContent,\r\n    ChartTooltip,\r\n    ChartTooltipContent,\r\n    type ChartConfig,\r\n} from \"@/components/ui/chart\"\r\nimport { formatCurrency } from \"@/lib/utils\"\r\n\r\nconst chartConfig = {\r\n    income: {\r\n        label: \"Income\",\r\n        color: \"hsl(142 71% 45%)\", // emerald-500\r\n    },\r\n    expenses: {\r\n        label: \"Expenses\",\r\n        color: \"hsl(346 84% 61%)\", // rose-500\r\n    },\r\n} satisfies ChartConfig\r\n\r\ninterface MonthlyBreakdownChartProps {\r\n    data: {\r\n        month: string\r\n        income: number\r\n        expenses: number\r\n    }[]\r\n}\r\n\r\nexport function MonthlyBreakdownChart({ data }: MonthlyBreakdownChartProps) {\r\n    // Calculate trend (simplified: compare current month with previous)\r\n    const currentMonthData = data[data.length - 1];\r\n    const prevMonthData = data.length > 1 ? data[data.length - 2] : null;\r\n\r\n    const trendPercentage = prevMonthData && prevMonthData.expenses > 0\r\n        ? ((currentMonthData.expenses - prevMonthData.expenses) / prevMonthData.expenses) * 100\r\n        : 0;\r\n\r\n    const isTrendingUp = trendPercentage > 0;\r\n\r\n    return (\r\n        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden h-full flex flex-col\">\r\n            <CardHeader className=\"bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-800\">\r\n                <CardTitle className=\"text-lg font-bold uppercase tracking-tight\">Monthly Breakdown</CardTitle>\r\n                <CardDescription className=\"font-medium text-[10px] uppercase tracking-widest\">\r\n                    Income and Expenses trend over the last 6 months\r\n                </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 pt-6 pb-0\">\r\n                <ChartContainer config={chartConfig}>\r\n                    <AreaChart\r\n                        accessibilityLayer\r\n                        data={data}\r\n                        margin={{\r\n                            left: 12,\r\n                            right: 12,\r\n                            top: 10,\r\n                        }}\r\n                    >\r\n                        <defs>\r\n                            <linearGradient id=\"fillIncome\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                <stop\r\n                                    offset=\"5%\"\r\n                                    stopColor=\"var(--color-income)\"\r\n                                    stopOpacity={0.5}\r\n                                />\r\n                                <stop\r\n                                    offset=\"95%\"\r\n                                    stopColor=\"var(--color-income)\"\r\n                                    stopOpacity={0.1}\r\n                                />\r\n                            </linearGradient>\r\n                            <linearGradient id=\"fillExpenses\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                <stop\r\n                                    offset=\"5%\"\r\n                                    stopColor=\"var(--color-expenses)\"\r\n                                    stopOpacity={0.5}\r\n                                />\r\n                                <stop\r\n                                    offset=\"95%\"\r\n                                    stopColor=\"var(--color-expenses)\"\r\n                                    stopOpacity={0.1}\r\n                                />\r\n                            </linearGradient>\r\n                        </defs>\r\n                        <CartesianGrid vertical={false} strokeDasharray=\"3 3\" />\r\n                        <XAxis\r\n                            dataKey=\"month\"\r\n                            tickLine={false}\r\n                            axisLine={false}\r\n                            tickMargin={8}\r\n                            tickFormatter={(value) => value.slice(0, 3)}\r\n                        />\r\n                        <ChartTooltip\r\n                            cursor={false}\r\n                            content={<ChartTooltipContent indicator=\"dot\" />}\r\n                        />\r\n                        <Area\r\n                            dataKey=\"income\"\r\n                            type=\"natural\"\r\n                            fill=\"url(#fillIncome)\"\r\n                            stroke=\"var(--color-income)\"\r\n                            strokeWidth={2}\r\n                            dot={{ fill: \"var(--color-income)\", r: 4, strokeWidth: 2, stroke: \"#fff\" }}\r\n                            activeDot={{ r: 6, strokeWidth: 0 }}\r\n                        />\r\n                        <Area\r\n                            dataKey=\"expenses\"\r\n                            type=\"natural\"\r\n                            fill=\"url(#fillExpenses)\"\r\n                            stroke=\"var(--color-expenses)\"\r\n                            strokeWidth={2}\r\n                            dot={{ fill: \"var(--color-expenses)\", r: 4, strokeWidth: 2, stroke: \"#fff\" }}\r\n                            activeDot={{ r: 6, strokeWidth: 0 }}\r\n                        />\r\n                        <ChartLegend content={<ChartLegendContent />} />\r\n                    </AreaChart>\r\n                </ChartContainer>\r\n            </CardContent>\r\n            <CardFooter className=\"border-t bg-slate-50/30 dark:bg-slate-900/30 py-4 mt-auto\">\r\n                <div className=\"flex w-full items-start gap-2 text-sm\">\r\n                    <div className=\"grid gap-2\">\r\n                        <div className=\"flex items-center gap-2 leading-none font-medium\">\r\n                            {isTrendingUp ? \"Expenses up\" : \"Expenses down\"} by {Math.abs(trendPercentage).toFixed(1)}% this month{\" \"}\r\n                            <TrendingUp className={`h-4 w-4 ${isTrendingUp ? \"text-rose-500\" : \"text-emerald-500 rotate-180\"}`} />\r\n                        </div>\r\n                        <div className=\"text-muted-foreground flex items-center gap-2 leading-none text-xs\">\r\n                            {data[0]?.month} - {data[data.length - 1]?.month} {new Date().getFullYear()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </CardFooter>\r\n        </Card>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\nav-main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\nav-projects.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\nav-secondary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\nav-user.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\new-transaction-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":6,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":29,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[147,157],"text":""},"desc":"Remove unused variable \"Calendar\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { ArrowLeft, Calendar, CreditCard, DollarSign, Landmark } from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { DatePicker } from \"@/components/ui/date-picker\";\r\nimport { createTransaction } from \"@/actions/transactions\";\r\nimport { toast } from \"sonner\";\r\nimport { getCurrentDateInKL } from \"@/lib/utils\";\r\n\r\ninterface NewTransactionFormProps {\r\n    categories: { id: string; name: string; color: string | null }[];\r\n    creditCards: { id: string; name: string }[];\r\n    incomeSources: { id: string; name: string }[];\r\n    bankAccounts: { id: string; name: string; type: string }[];\r\n    loans: { id: string; name: string }[];\r\n}\r\n\r\nexport function NewTransactionForm({\r\n    categories,\r\n    creditCards,\r\n    incomeSources,\r\n    bankAccounts,\r\n    loans,\r\n}: NewTransactionFormProps) {\r\n    const [type, setType] = useState<\"expense\" | \"income\">(\"expense\");\r\n    const [isLoanPayment, setIsLoanPayment] = useState(false);\r\n    const [isCCPayment, setIsCCPayment] = useState(false);\r\n    const [paymentSource, setPaymentSource] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [date, setDate] = useState<Date | undefined>(getCurrentDateInKL());\r\n    const router = useRouter();\r\n\r\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        formData.set(\"type\", type);\r\n        if (date) {\r\n            formData.set(\"date\", `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`);\r\n        }\r\n\r\n        // Handle consolidated payment source for expenses\r\n        if (type === \"expense\") {\r\n            const source = formData.get(\"paymentSource\") as string;\r\n            if (source) {\r\n                const [sourceType, id] = source.split(\":\");\r\n                if (sourceType === \"bank\") {\r\n                    formData.set(\"bankAccountId\", id);\r\n                    if (isCCPayment) {\r\n                        formData.set(\"creditCardId\", formData.get(\"targetCreditCardId\") as string);\r\n                    }\r\n                } else if (sourceType === \"card\") {\r\n                    formData.set(\"creditCardId\", id);\r\n                }\r\n            }\r\n        }\r\n\r\n        const result = await createTransaction(formData);\r\n\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Transaction added successfully\");\r\n            router.push(\"/transactions\");\r\n            router.refresh();\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <header className=\"flex h-16 shrink-0 items-center gap-2 border-b\">\r\n                <div className=\"flex items-center gap-2 px-4\">\r\n                    <SidebarTrigger className=\"-ml-1\" />\r\n                    <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\r\n                    <Button variant=\"ghost\" size=\"icon\" asChild>\r\n                        <Link href=\"/transactions\">\r\n                            <ArrowLeft className=\"h-4 w-4\" />\r\n                        </Link>\r\n                    </Button>\r\n                    <h1 className=\"text-lg font-semibold\">New Transaction</h1>\r\n                </div>\r\n            </header>\r\n            <div className=\"flex flex-1 flex-col gap-6 p-6\">\r\n                <Card className=\"max-w-2xl mx-auto w-full\">\r\n                    <CardHeader>\r\n                        <CardTitle>Add Transaction</CardTitle>\r\n                        <CardDescription>\r\n                            Record a new income or expense transaction\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                            {/* Transaction Type */}\r\n                            <div className=\"flex gap-2\">\r\n                                <Button\r\n                                    type=\"button\"\r\n                                    variant={type === \"expense\" ? \"default\" : \"outline\"}\r\n                                    className={`flex-1 ${type === \"expense\" ? \"bg-red-500 hover:bg-red-600\" : \"\"}`}\r\n                                    onClick={() => setType(\"expense\")}\r\n                                >\r\n                                    <ArrowLeft className=\"mr-2 h-4 w-4 rotate-[-45deg]\" />\r\n                                    Expense\r\n                                </Button>\r\n                                <Button\r\n                                    type=\"button\"\r\n                                    variant={type === \"income\" ? \"default\" : \"outline\"}\r\n                                    className={`flex-1 ${type === \"income\" ? \"bg-emerald-500 hover:bg-emerald-600\" : \"\"}`}\r\n                                    onClick={() => {\r\n                                        setType(\"income\");\r\n                                        setIsCCPayment(false);\r\n                                        setIsLoanPayment(false);\r\n                                    }}\r\n                                >\r\n                                    <ArrowLeft className=\"mr-2 h-4 w-4 rotate-[135deg]\" />\r\n                                    Income\r\n                                </Button>\r\n                            </div>\r\n\r\n                            {/* Amount */}\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"amount\">Amount</Label>\r\n                                <div className=\"relative\">\r\n                                    <DollarSign className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                                    <Input\r\n                                        id=\"amount\"\r\n                                        name=\"amount\"\r\n                                        type=\"number\"\r\n                                        step=\"0.01\"\r\n                                        min=\"0\"\r\n                                        placeholder=\"0.00\"\r\n                                        className=\"pl-9\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Date */}\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Date</Label>\r\n                                <DatePicker date={date} setDate={setDate} />\r\n                            </div>\r\n\r\n                            {/* Description */}\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"description\">Description</Label>\r\n                                <Input\r\n                                    id=\"description\"\r\n                                    name=\"description\"\r\n                                    placeholder=\"What was this for?\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Income specific fields */}\r\n                            {type === \"income\" && (\r\n                                <>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label htmlFor=\"bankAccountId\">Destination Account</Label>\r\n                                        <Select name=\"bankAccountId\">\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Where is the money going?\" />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                {bankAccounts.map((account) => (\r\n                                                    <SelectItem key={account.id} value={account.id}>\r\n                                                        <div className=\"flex items-center gap-2\">\r\n                                                            <Landmark className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                            {account.name}\r\n                                                        </div>\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label htmlFor=\"incomeSourceId\">Income Source</Label>\r\n                                        <Select name=\"incomeSourceId\">\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Where is the money from?\" />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                {incomeSources.map((source) => (\r\n                                                    <SelectItem key={source.id} value={source.id}>\r\n                                                        {source.name}\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n\r\n                            {/* Expense specific fields */}\r\n                            {type === \"expense\" && (\r\n                                <>\r\n                                    <div className=\"grid gap-4 md:grid-cols-2\">\r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"categoryId\">Category</Label>\r\n                                            <Select name=\"categoryId\">\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Select a category\" />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    {categories.map((cat) => (\r\n                                                        <SelectItem key={cat.id} value={cat.id}>\r\n                                                            <div className=\"flex items-center gap-2\">\r\n                                                                <div\r\n                                                                    className=\"h-3 w-3 rounded-full\"\r\n                                                                    style={{ backgroundColor: cat.color || \"#6b7280\" }}\r\n                                                                />\r\n                                                                {cat.name}\r\n                                                            </div>\r\n                                                        </SelectItem>\r\n                                                    ))}\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                        </div>\r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"paymentSource\">Source of Funds</Label>\r\n                                            <Select name=\"paymentSource\" onValueChange={(val) => {\r\n                                                setPaymentSource(val);\r\n                                                if (!val.startsWith(\"bank:\")) setIsCCPayment(false);\r\n                                            }}>\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"How did you pay?\" />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    {bankAccounts.length > 0 && (\r\n                                                        <>\r\n                                                            <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground\">\r\n                                                                Accounts & Wallets\r\n                                                            </div>\r\n                                                            {bankAccounts.map((account) => (\r\n                                                                <SelectItem key={account.id} value={`bank:${account.id}`}>\r\n                                                                    <div className=\"flex items-center gap-2\">\r\n                                                                        <Landmark className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                                        {account.name}\r\n                                                                    </div>\r\n                                                                </SelectItem>\r\n                                                            ))}\r\n                                                        </>\r\n                                                    )}\r\n                                                    {creditCards.length > 0 && (\r\n                                                        <>\r\n                                                            <Separator className=\"my-1\" />\r\n                                                            <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground\">\r\n                                                                Credit Cards\r\n                                                            </div>\r\n                                                            {creditCards.map((card) => (\r\n                                                                <SelectItem key={card.id} value={`card:${card.id}`}>\r\n                                                                    <div className=\"flex items-center gap-2\">\r\n                                                                        <CreditCard className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                                        {card.name}\r\n                                                                    </div>\r\n                                                                </SelectItem>\r\n                                                            ))}\r\n                                                        </>\r\n                                                    )}\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {paymentSource.startsWith(\"bank:\") && (\r\n                                        <div className=\"space-y-4 border-t pt-4\">\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <div className=\"space-y-0.5\">\r\n                                                    <Label>Credit Card Payment</Label>\r\n                                                    <p className=\"text-sm text-muted-foreground\">\r\n                                                        Is this a payment towards a credit card?\r\n                                                    </p>\r\n                                                </div>\r\n                                                <Switch\r\n                                                    checked={isCCPayment}\r\n                                                    onCheckedChange={(checked) => {\r\n                                                        setIsCCPayment(checked);\r\n                                                        if (checked) setIsLoanPayment(false);\r\n                                                    }}\r\n                                                />\r\n                                            </div>\r\n\r\n                                            {isCCPayment && (\r\n                                                <div className=\"space-y-2\">\r\n                                                    <Label htmlFor=\"targetCreditCardId\">Select Credit Card</Label>\r\n                                                    <Select name=\"targetCreditCardId\" required={isCCPayment}>\r\n                                                        <SelectTrigger>\r\n                                                            <SelectValue placeholder=\"Which card are you paying?\" />\r\n                                                        </SelectTrigger>\r\n                                                        <SelectContent>\r\n                                                            {creditCards.map((card) => (\r\n                                                                <SelectItem key={card.id} value={card.id}>\r\n                                                                    {card.name}\r\n                                                                </SelectItem>\r\n                                                            ))}\r\n                                                        </SelectContent>\r\n                                                    </Select>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"space-y-4 border-t pt-4\">\r\n                                        <div className=\"flex items-center justify-between\">\r\n                                            <div className=\"space-y-0.5\">\r\n                                                <Label>Loan Payment</Label>\r\n                                                <p className=\"text-sm text-muted-foreground\">\r\n                                                    Is this expense a payment for a loan?\r\n                                                </p>\r\n                                            </div>\r\n                                            <Switch\r\n                                                checked={isLoanPayment}\r\n                                                onCheckedChange={(checked) => {\r\n                                                    setIsLoanPayment(checked);\r\n                                                    if (checked) setIsCCPayment(false);\r\n                                                }}\r\n                                            />\r\n                                        </div>\r\n\r\n                                        {isLoanPayment && (\r\n                                            <div className=\"space-y-2\">\r\n                                                <Label htmlFor=\"loanId\">Select Loan</Label>\r\n                                                <Select name=\"loanId\" required={isLoanPayment}>\r\n                                                    <SelectTrigger>\r\n                                                        <SelectValue placeholder=\"Which loan is this for?\" />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        {loans.map((loan) => (\r\n                                                            <SelectItem key={loan.id} value={loan.id}>\r\n                                                                {loan.name}\r\n                                                            </SelectItem>\r\n                                                        ))}\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n\r\n                            {/* Notes */}\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"notes\">Notes (optional)</Label>\r\n                                <Input\r\n                                    id=\"notes\"\r\n                                    name=\"notes\"\r\n                                    placeholder=\"Any additional notes...\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Submit */}\r\n                            <div className=\"flex gap-2 pt-4\">\r\n                                <Button\r\n                                    type=\"button\"\r\n                                    variant=\"outline\"\r\n                                    className=\"flex-1\"\r\n                                    onClick={() => router.back()}\r\n                                >\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button type=\"submit\" className=\"flex-1\" disabled={loading}>\r\n                                    {loading ? \"Adding...\" : \"Add Transaction\"}\r\n                                </Button>\r\n                            </div>\r\n                        </form>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\profile-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\transaction-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[121,134],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1282,1285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1282,1285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1306,1309],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1306,1309],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1331,1334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1331,1334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1358,1361],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1358,1361],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1384,1387],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1384,1387],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1403,1406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1403,1406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2007,2010],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2007,2010],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo } from \"react\";\r\nimport {\r\n    ArrowDownRight,\r\n    ArrowUpRight,\r\n    Pencil,\r\n    Filter,\r\n    Search,\r\n    Trash2,\r\n} from \"lucide-react\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { formatCurrency } from \"@/lib/utils\";\r\nimport { deleteTransaction } from \"@/actions/transactions\";\r\nimport { toast } from \"sonner\";\r\nimport { EditTransactionForm } from \"./edit-transaction-form\";\r\nimport { format } from \"date-fns\";\r\n\r\ninterface TransactionListProps {\r\n    initialTransactions: any[];\r\n    categories: any[];\r\n    creditCards: any[];\r\n    incomeSources: any[];\r\n    bankAccounts: any[];\r\n    loans: any[];\r\n}\r\n\r\nexport function TransactionList({\r\n    initialTransactions,\r\n    categories,\r\n    creditCards,\r\n    incomeSources,\r\n    bankAccounts,\r\n    loans,\r\n}: TransactionListProps) {\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [typeFilter, setTypeFilter] = useState<string>(\"all\");\r\n    const [categoryFilter, setCategoryFilter] = useState<string>(\"all\");\r\n    const [paymentFilter, setPaymentFilter] = useState<string>(\"all\");\r\n    const [incomeSourceFilter, setIncomeSourceFilter] = useState<string>(\"all\");\r\n\r\n    const [editingTransaction, setEditingTransaction] = useState<any | null>(null);\r\n    const [deletingId, setDeletingId] = useState<string | null>(null);\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n    const filteredTransactions = useMemo(() => {\r\n        return initialTransactions.filter((tx) => {\r\n            const matchesSearch = (tx.description || \"\").toLowerCase().includes(searchTerm.toLowerCase());\r\n            const matchesType = typeFilter === \"all\" || tx.type?.toLowerCase() === typeFilter.toLowerCase();\r\n            const matchesCategory = categoryFilter === \"all\" || tx.categoryId === categoryFilter;\r\n            const matchesIncomeSource = incomeSourceFilter === \"all\" || tx.incomeSourceId === incomeSourceFilter;\r\n\r\n            let matchesPayment = true;\r\n            if (paymentFilter !== \"all\") {\r\n                const [sourceType, id] = paymentFilter.split(\":\");\r\n                if (sourceType === \"bank\") {\r\n                    matchesPayment = tx.bankAccountId === id;\r\n                } else if (sourceType === \"card\") {\r\n                    matchesPayment = tx.creditCardId === id;\r\n                }\r\n            }\r\n\r\n            return matchesSearch && matchesType && matchesCategory && matchesPayment && matchesIncomeSource;\r\n        });\r\n    }, [initialTransactions, searchTerm, typeFilter, categoryFilter, paymentFilter, incomeSourceFilter]);\r\n\r\n    async function handleDelete() {\r\n        if (!deletingId) return;\r\n        setIsDeleting(true);\r\n        const result = await deleteTransaction(deletingId);\r\n        if (result.error) {\r\n            toast.error(result.error);\r\n        } else {\r\n            toast.success(\"Transaction deleted\");\r\n            setDeletingId(null);\r\n        }\r\n        setIsDeleting(false);\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {/* Filters */}\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-5\">\r\n                <div className=\"relative\">\r\n                    <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                    <Input\r\n                        placeholder=\"Search descriptions...\"\r\n                        className=\"pl-8\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                    />\r\n                </div>\r\n                <Select value={typeFilter} onValueChange={setTypeFilter}>\r\n                    <SelectTrigger>\r\n                        <SelectValue placeholder=\"All Types\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                        <SelectItem value=\"all\">All Types</SelectItem>\r\n                        <SelectItem value=\"expense\">Expense</SelectItem>\r\n                        <SelectItem value=\"income\">Income</SelectItem>\r\n                    </SelectContent>\r\n                </Select>\r\n                <Select value={categoryFilter} onValueChange={setCategoryFilter}>\r\n                    <SelectTrigger>\r\n                        <SelectValue placeholder=\"All Categories\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                        <SelectItem value=\"all\">All Categories</SelectItem>\r\n                        {categories.map((cat) => (\r\n                            <SelectItem key={cat.id} value={cat.id}>\r\n                                {cat.name}\r\n                            </SelectItem>\r\n                        ))}\r\n                    </SelectContent>\r\n                </Select>\r\n                <Select value={incomeSourceFilter} onValueChange={setIncomeSourceFilter}>\r\n                    <SelectTrigger>\r\n                        <SelectValue placeholder=\"All Income Sources\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                        <SelectItem value=\"all\">All Income Sources</SelectItem>\r\n                        {incomeSources.map((source) => (\r\n                            <SelectItem key={source.id} value={source.id}>\r\n                                {source.name}\r\n                            </SelectItem>\r\n                        ))}\r\n                    </SelectContent>\r\n                </Select>\r\n                <Select value={paymentFilter} onValueChange={setPaymentFilter}>\r\n                    <SelectTrigger>\r\n                        <SelectValue placeholder=\"All Payment Methods\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                        <SelectItem value=\"all\">All Payment Methods</SelectItem>\r\n                        {bankAccounts.map((acc) => (\r\n                            <SelectItem key={acc.id} value={`bank:${acc.id}`}>\r\n                                {acc.name} (Bank)\r\n                            </SelectItem>\r\n                        ))}\r\n                        {creditCards.map((card) => (\r\n                            <SelectItem key={card.id} value={`card:${card.id}`}>\r\n                                {card.name} (Card)\r\n                            </SelectItem>\r\n                        ))}\r\n                    </SelectContent>\r\n                </Select>\r\n            </div>\r\n\r\n            {/* Table */}\r\n            <div className=\"rounded-md border bg-card\">\r\n                <Table>\r\n                    <TableHeader>\r\n                        <TableRow>\r\n                            <TableHead>Date</TableHead>\r\n                            <TableHead>Description</TableHead>\r\n                            <TableHead>Category</TableHead>\r\n                            <TableHead>Payment Method</TableHead>\r\n                            <TableHead>Amount</TableHead>\r\n                            <TableHead className=\"text-right\">Actions</TableHead>\r\n                        </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                        {filteredTransactions.length > 0 ? (\r\n                            filteredTransactions.map((tx) => (\r\n                                <TableRow key={tx.id}>\r\n                                    <TableCell className=\"font-medium whitespace-nowrap\">\r\n                                        {format(new Date(tx.date), \"dd/MM/yyyy\")}\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            {tx.type === \"income\" ? (\r\n                                                <ArrowUpRight className=\"h-4 w-4 text-emerald-500\" />\r\n                                            ) : (\r\n                                                <ArrowDownRight className=\"h-4 w-4 text-red-500\" />\r\n                                            )}\r\n                                            <div className=\"flex flex-col min-w-0\">\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <span className=\"truncate\">{tx.description || \"-\"}</span>\r\n                                                    {tx.loanId && (\r\n                                                        <Badge variant=\"outline\" className=\"text-[10px] h-4 px-1 bg-red-500/10 text-red-500 border-red-500/20\">\r\n                                                            Loan\r\n                                                        </Badge>\r\n                                                    )}\r\n                                                    {tx.installmentId && (\r\n                                                        <Badge variant=\"outline\" className=\"text-[10px] h-4 px-1 bg-amber-500/10 text-amber-500 border-amber-500/20\">\r\n                                                            Inst.\r\n                                                        </Badge>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        {tx.category ? (\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div\r\n                                                    className=\"h-2 w-2 rounded-full flex-shrink-0\"\r\n                                                    style={{ backgroundColor: tx.category.color || \"#6b7280\" }}\r\n                                                />\r\n                                                <span className=\"truncate\">{tx.category.name}</span>\r\n                                            </div>\r\n                                        ) : tx.incomeSource ? (\r\n                                            <Badge variant=\"outline\">{tx.incomeSource.name}</Badge>\r\n                                        ) : (\r\n                                            \"-\"\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"max-w-[150px] truncate\">\r\n                                        {tx.creditCard?.name || tx.bankAccount?.name || \"-\"}\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <span className={`font-semibold ${tx.type === \"income\" ? \"text-emerald-500\" : \"text-red-500\"}`}>\r\n                                            {tx.type === \"income\" ? \"+\" : \"-\"}{formatCurrency(Number(tx.amount))}\r\n                                        </span>\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right\">\r\n                                        <div className=\"flex justify-end gap-1\">\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-8 w-8 text-muted-foreground hover:text-primary\"\r\n                                                onClick={() => setEditingTransaction(tx)}\r\n                                            >\r\n                                                <Pencil className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-8 w-8 text-muted-foreground hover:text-destructive\"\r\n                                                onClick={() => setDeletingId(tx.id)}\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))\r\n                        ) : (\r\n                            <TableRow>\r\n                                <TableCell colSpan={6} className=\"h-24 text-center text-muted-foreground\">\r\n                                    No transactions found matching your filters.\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        )}\r\n                    </TableBody>\r\n                </Table>\r\n            </div>\r\n\r\n            {/* Edit Dialog */}\r\n            <Dialog open={!!editingTransaction} onOpenChange={(open) => !open && setEditingTransaction(null)}>\r\n                <DialogContent className=\"max-w-2xl\">\r\n                    <DialogHeader>\r\n                        <DialogTitle>Edit Transaction</DialogTitle>\r\n                        <DialogDescription>\r\n                            Make changes to your transaction details.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    {editingTransaction && (\r\n                        <EditTransactionForm\r\n                            transaction={editingTransaction}\r\n                            categories={categories}\r\n                            creditCards={creditCards}\r\n                            incomeSources={incomeSources}\r\n                            bankAccounts={bankAccounts}\r\n                            loans={loans}\r\n                            onSuccess={() => setEditingTransaction(null)}\r\n                            onCancel={() => setEditingTransaction(null)}\r\n                        />\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Delete Alert */}\r\n            <AlertDialog open={!!deletingId} onOpenChange={(open) => !open && setDeletingId(null)}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This action cannot be undone. This will permanently delete your\r\n                            transaction and reverse its effect on your account balance.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel disabled={isDeleting}>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                            onClick={handleDelete}\r\n                            disabled={isDeleting}\r\n                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                        >\r\n                            {isDeleting ? \"Deleting...\" : \"Delete\"}\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\date-picker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\field.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\sidebar.tsx:611:26\n  609 |   // Random width between 50 to 90%.\n  610 |   const width = React.useMemo(() => {\n> 611 |     return `${Math.floor(Math.random() * 40) + 50}%`\n      |                          ^^^^^^^^^^^^^ Cannot call impure function\n  612 |   }, [])\n  613 |\n  614 |   return (","line":611,"column":26,"nodeType":null,"endLine":611,"endColumn":39}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\nimport * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\nimport { Slot } from \"radix-ui\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon)\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"size-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot.Root : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot.Root : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot.Root : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot.Root : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-(--skeleton-width) flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot.Root : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\hooks\\use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\lib\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\lib\\prisma.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hafiz\\projects\\coin\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
